/*! For license information please see main.217a1480.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},82:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function E(e){return x(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return E(e)||x(e)===u},t.isConcurrentMode=E,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===s},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===b||e.$$typeof===w||e.$$typeof===y)},t.typeOf=x},86:(e,t,n)=>{"use strict";e.exports=n(82)},123:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))n.call(s,c)&&(a[c]=s[c]);if(t){o=t(s);for(var u=0;u<o.length;u++)r.call(s,o[u])&&(a[o[u]]=s[o[u]])}}return a}},141:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},153:(e,t,n)=>{"use strict";n(123);var r=n(43),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var s=Symbol.for;i=s("react.element"),t.Fragment=s("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.jsx=c,t.jsxs=c},173:(e,t,n)=>{e.exports=n(497)()},202:(e,t,n)=>{"use strict";var r=n(123),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),u=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=v.prototype=new y;b.constructor=v,r(b,g.prototype),b.isPureReactComponent=!0;var w={current:null},x=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&!E.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:w.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case s:l=!0}}if(l)return o=o(l=e),e=""===r?"."+T(l,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),I(o,t,n,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=r+T(a=e[c],c);l+=I(a,t,n,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,n,u=r+T(a,c++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function C(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function P(){var e=A.current;if(null===e)throw Error(f(321));return e}var R={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)x.call(t,u)&&!E.hasOwnProperty(u)&&(s[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)s.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},219:(e,t,n)=>{"use strict";var r=n(86),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{c(t,y,v)}catch(b){}}}}return t}},234:(e,t)=>{"use strict";var n,r,i,s;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,u=null,h=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(n){throw setTimeout(h,0),n}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,x=w.port2;w.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();b=e+v;try{g(!0,e)?x.postMessage(null):(m=!1,g=null)}catch(n){throw x.postMessage(null),n}}else m=!1},n=function(e){g=e,m||(m=!0,x.postMessage(null))},r=function(e,n){y=d((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,l=e[a];if(void 0!==o&&0>S(o,n))void 0!==l&&0>S(l,o)?(e[r]=l,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==l&&0>S(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],I=[],C=1,N=null,A=3,P=!1,R=!1,D=!1;function O(e){for(var t=_(I);null!==t;){if(null===t.callback)k(I);else{if(!(t.startTime<=e))break;k(I),t.sortIndex=t.expirationTime,E(T,t)}t=_(I)}}function L(e){if(D=!1,O(e),!R)if(null!==_(T))R=!0,n(j);else{var t=_(I);null!==t&&r(L,t.startTime-e)}}function j(e,n){R=!1,D&&(D=!1,i()),P=!0;var s=A;try{for(O(n),N=_(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var a=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?N.callback=a:N===_(T)&&k(T),O(n)}else k(T);N=_(T)}if(null!==N)var l=!0;else{var c=_(I);null!==c&&r(L,c.startTime-n),l=!1}return l}finally{N=null,A=s,P=!1}}var M=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||P||(R=!0,n(j))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return _(T)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=M,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:C++,callback:s,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>a?(e.sortIndex=o,E(I,e),null===_(T)&&e===_(I)&&(D?i():D=!0,r(L,o-a))):(e.sortIndex=l,E(T,e),R||P||(R=!0,n(j))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},504:(e,t,n)=>{var r=n(141);e.exports=p,e.exports.parse=s,e.exports.compile=function(e,t){return l(s(e,t),t)},e.exports.tokensToFunction=l,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,r=[],s=0,a=0,l="",c=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(l+=e.slice(a,f),a=f+h.length,d)l+=d[1];else{var p=e[a],m=n[2],g=n[3],y=n[4],v=n[5],b=n[6],w=n[7];l&&(r.push(l),l="");var x=null!=m&&null!=p&&p!==m,E="+"===b||"*"===b,_="?"===b||"*"===b,k=m||c,S=y||v,T=m||("string"===typeof r[r.length-1]?r[r.length-1]:"");r.push({name:g||s++,prefix:m||"",delimiter:k,optional:_,repeat:E,partial:x,asterisk:!!w,pattern:S?u(S):w?".*":o(k,T)})}}return a<e.length&&(l+=e.substr(a)),l&&r.push(l),r}function o(e,t){return!t||t.indexOf(e)>-1?"[^"+c(e)+"]+?":c(t)+"|(?:(?!"+c(t)+")[^"+c(e)+"])+?"}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function l(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",d(t)));return function(t,i){for(var s="",o=t||{},l=(i||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!==typeof u){var h,d=o[u.name];if(null==d){if(u.optional){u.partial&&(s+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=l(d[f]),!n[c].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");s+=(0===f?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(d),!n[c].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');s+=u.prefix+h}}else s+=u}return s}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function h(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,s=!1!==n.end,o="",a=0;a<e.length;a++){var l=e[a];if("string"===typeof l)o+=c(l);else{var u=c(l.prefix),f="(?:"+l.pattern+")";t.push(l),l.repeat&&(f+="(?:"+u+f+")*"),o+=f=l.optional?l.partial?u+"("+f+")?":"(?:"+u+"("+f+"))?":u+"("+f+")"}}var p=c(n.delimiter||"/"),m=o.slice(-p.length)===p;return i||(o=(m?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=s?"$":i&&m?"":"(?="+p+"|$)",h(new RegExp("^"+o,d(n)),t)}function p(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return h(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(p(e[i],t,n).source);return h(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return f(s(e,n),t,n)}(e,t,n)}},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),i=n(123),s=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,_=60106,k=60107,S=60108,T=60114,I=60109,C=60110,N=60112,A=60113,P=60120,R=60115,D=60116,O=60121,L=60128,j=60129,M=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;E=U("react.element"),_=U("react.portal"),k=U("react.fragment"),S=U("react.strict_mode"),T=U("react.profiler"),I=U("react.provider"),C=U("react.context"),N=U("react.forward_ref"),A=U("react.suspense"),P=U("react.suspense_list"),R=U("react.memo"),D=U("react.lazy"),O=U("react.block"),U("react.scope"),L=U("react.opaque.id"),j=U("react.debug_trace_mode"),M=U("react.offscreen"),F=U("react.legacy_hidden")}var V,z="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}function $(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var q=!1;function H(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$(e):""}function W(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case T:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return K(e.type);case O:return K(e._render);case D:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function G(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ce(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge,ye=(ge=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function Ee(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=xe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(be).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ke(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ce=null,Ne=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Ie)throw Error(o(280));var t=e.stateNode;t&&(t=si(t),Ie(e.stateNode,e.type,t))}}function Pe(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Re(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function De(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var je=De,Me=!1,Fe=!1;function Ue(){null===Ce&&null===Ne||(Le(),Re())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var ze=!1;if(h)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ge){ze=!1}function $e(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var qe=!1,He=null,We=!1,Ke=null,Ge={onError:function(e){qe=!0,He=e}};function Qe(e,t,n,r,i,s,o,a,l){qe=!1,He=null,$e.apply(Ge,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Je(i),e;if(s===r)return Je(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,st=!1,ot=[],at=null,lt=null,ct=null,ut=new Map,ht=new Map,dt=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function mt(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function gt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=pt(t,n,r,i,s),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){vt(e)&&n.delete(t)}function wt(){for(st=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==at&&vt(at)&&(at=null),null!==lt&&vt(lt)&&(lt=null),null!==ct&&vt(ct)&&(ct=null),ut.forEach(bt),ht.forEach(bt)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,st||(st=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wt)))}function Et(e){function t(t){return xt(t,e)}if(0<ot.length){xt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&xt(at,e),null!==lt&&xt(lt,e),null!==ct&&xt(ct,e),ut.forEach(t),ht.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)yt(n),null===n.blockedOn&&dt.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kt={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},St={},Tt={};function It(e){if(St[e])return St[e];if(!kt[e])return e;var t,n=kt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return St[e]=n[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete kt.animationend.animation,delete kt.animationiteration.animation,delete kt.animationstart.animation),"TransitionEvent"in window||delete kt.transitionend.transition);var Ct=It("animationend"),Nt=It("animationiteration"),At=It("animationstart"),Pt=It("transitionend"),Rt=new Map,Dt=new Map,Ot=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Pt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Dt.set(r,t),Rt.set(r,i),c(i,[r])}}(0,s.unstable_now)();var jt=8;function Mt(e){if(0!==(1&e))return jt=15,1;if(0!==(2&e))return jt=14,2;if(0!==(4&e))return jt=13,4;var t=24&e;return 0!==t?(jt=12,t):0!==(32&e)?(jt=11,32):0!==(t=192&e)?(jt=10,t):0!==(256&e)?(jt=9,256):0!==(t=3584&e)?(jt=8,t):0!==(4096&e)?(jt=7,4096):0!==(t=4186112&e)?(jt=6,t):0!==(t=62914560&e)?(jt=5,t):67108864&e?(jt=4,67108864):0!==(134217728&e)?(jt=3,134217728):0!==(t=805306368&e)?(jt=2,t):0!==(1073741824&e)?(jt=1,1073741824):(jt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return jt=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=jt=15;else if(0!==(s=134217727&n)){var l=s&~o;0!==l?(r=Mt(l),i=jt):0!==(a&=s)&&(r=Mt(a),i=jt)}else 0!==(s=n&~o)?(r=Mt(s),i=jt):0!==a&&(r=Mt(a),i=jt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=jt)return t;jt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-qt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=zt(24&~t))?Vt(10,t):e;case 10:return 0===(e=zt(192&~t))?Vt(8,t):e;case 8:return 0===(e=zt(3584&~t))&&(0===(e=zt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=zt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function zt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $t(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Wt|0)|0},Ht=Math.log,Wt=Math.LN2;var Kt=s.unstable_UserBlockingPriority,Gt=s.unstable_runWithPriority,Qt=!0;function Yt(e,t,n,r){Me||Le();var i=Jt,s=Me;Me=!0;try{Oe(i,e,t,n,r)}finally{(Me=s)||Ue()}}function Xt(e,t,n,r){Gt(Kt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<ot.length&&-1<ft.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var s=Zt(e,t,n,r);if(null===s)i&&mt(e,r);else{if(i){if(-1<ft.indexOf(e))return e=pt(s,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return at=gt(at,e,t,n,r,i),!0;case"dragenter":return lt=gt(lt,e,t,n,r,i),!0;case"mouseover":return ct=gt(ct,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ut.set(s,gt(ut.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ht.set(s,gt(ht.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;mt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var s=Ye(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Xe(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function sn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function an(){return!1}function ln(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:an,this.isPropagationStopped=an,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,un,hn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=ln(dn),pn=i({},dn,{view:0,detail:0}),mn=ln(pn),gn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(cn=e.screenX-hn.screenX,un=e.screenY-hn.screenY):un=cn=0,hn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:un}}),yn=ln(gn),vn=ln(i({},gn,{dataTransfer:0})),bn=ln(i({},pn,{relatedTarget:0})),wn=ln(i({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=i({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),En=ln(xn),_n=ln(i({},dn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return In}var Nn=i({},pn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=sn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?sn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?sn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=ln(Nn),Pn=ln(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=ln(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Dn=ln(i({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=ln(On),jn=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var Un=h&&"TextEvent"in window&&!Fn,Vn=h&&(!Mn||Fn&&8<Fn&&11>=Fn),zn=String.fromCharCode(32),Bn=!1;function $n(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Gn(e,t,n,r){Pe(r),0<(t=Mr(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Xn(e){Nr(e,0)}function Jn(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(h){var tr;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Qn&&(Qn.detachEvent("onpropertychange",sr),Yn=Qn=null)}function sr(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Gn(t,Yn,e,Te(e)),e=Xn,Me)e(t);else{Me=!0;try{De(e,t)}finally{Me=!1,Ue()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,(Qn=t).attachEvent("onpropertychange",sr)):"focusout"===e&&ir()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function lr(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},hr=Object.prototype.hasOwnProperty;function dr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=fr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fr(r)}}function mr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vr=h&&"documentMode"in document&&11>=document.documentMode,br=null,wr=null,xr=null,Er=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Er||null==br||br!==J(r)||("selectionStart"in(r=br)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&dr(xr,r)||(xr=r,0<(r=Mr(wr,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Ot,2);for(var kr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<kr.length;Sr++)Dt.set(kr[Sr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Qe.apply(this,arguments),qe){if(!qe)throw Error(o(198));var u=He;qe=!1,He=null,We||(We=!0,Ke=u)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Cr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Cr(i,a,c),s=l}}}if(We)throw e=Ke,We=!1,Ke=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Pr="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){e[Pr]||(e[Pr]=!0,a.forEach((function(t){Ir.has(t)||Dr(t,!1,e,null),Dr(t,!0,e,null)})))}function Dr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&Ir.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=oi(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Or(s,e,i,t),o.add(a))}function Or(e,t,n,r){var i=Dt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ni(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return je(e,t,n)}finally{Fe=!1,Ue()}}((function(){var r=s,i=Te(n),o=[];e:{var a=Rt.get(e);if(void 0!==a){var l=fn,c=e;switch(e){case"keypress":if(0===sn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=bn;break;case"focusout":c="blur",l=bn;break;case"beforeblur":case"afterblur":l=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Ct:case Nt:case At:l=wn;break;case Pt:l=Dn;break;case"scroll":l=mn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=En;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Ve(p,d))&&u.push(jr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(h=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=yn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:ii(l),f=null==c?a:ii(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,ni(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Fr(f))p++;for(f=0,m=d;m;m=Fr(m))f++;for(;0<p-f;)u=Fr(u),p--;for(;0<f-p;)d=Fr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Fr(u),d=Fr(d)}u=null}else u=null;null!==l&&Ur(o,a,l,u,!1),null!==c&&null!==h&&Ur(o,h,c,u,!0)}if("select"===(l=(a=r?ii(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Zn;else if(Kn(a))if(er)g=cr;else{g=ar;var y=or}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=lr);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ie(a,"number",a.value)),y=r?ii(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(br=y,wr=r,xr=null);break;case"focusout":xr=wr=br=null;break;case"mousedown":Er=!0;break;case"contextmenu":case"mouseup":case"dragend":Er=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?$n(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Vn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(v=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(y=Mr(r,b)).length&&(b=new _n(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=qn(n))&&(b.data=v))),(v=Un?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Mn&&$n(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Nr(o,t)}))}function jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ve(e,n))&&r.unshift(jr(e,s,i)),null!=(s=Ve(e,t))&&r.push(jr(e,s,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ve(n,s))&&o.unshift(jr(n,l,a)):i||null!=(l=Ve(n,s))&&o.push(jr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var zr=null,Br=null;function $r(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Kr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Gr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Jr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function si(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ai=[],li=-1;function ci(e){return{current:e}}function ui(e){0>li||(e.current=ai[li],ai[li]=null,li--)}function hi(e,t){li++,ai[li]=e.current,e.current=t}var di={},fi=ci(di),pi=ci(!1),mi=di;function gi(e,t){var n=e.type.contextTypes;if(!n)return di;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vi(){ui(pi),ui(fi)}function bi(e,t,n){if(fi.current!==di)throw Error(o(168));hi(fi,t),hi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,K(t)||"Unknown",s));return i({},n,r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||di,mi=fi.current,hi(fi,e),hi(pi,pi.current),!0}function Ei(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,ui(pi),ui(fi),hi(fi,e)):ui(pi),hi(pi,n)}var _i=null,ki=null,Si=s.unstable_runWithPriority,Ti=s.unstable_scheduleCallback,Ii=s.unstable_cancelCallback,Ci=s.unstable_shouldYield,Ni=s.unstable_requestPaint,Ai=s.unstable_now,Pi=s.unstable_getCurrentPriorityLevel,Ri=s.unstable_ImmediatePriority,Di=s.unstable_UserBlockingPriority,Oi=s.unstable_NormalPriority,Li=s.unstable_LowPriority,ji=s.unstable_IdlePriority,Mi={},Fi=void 0!==Ni?Ni:function(){},Ui=null,Vi=null,zi=!1,Bi=Ai(),$i=1e4>Bi?Ai:function(){return Ai()-Bi};function qi(){switch(Pi()){case Ri:return 99;case Di:return 98;case Oi:return 97;case Li:return 96;case ji:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Ri;case 98:return Di;case 97:return Oi;case 96:return Li;case 95:return ji;default:throw Error(o(332))}}function Wi(e,t){return e=Hi(e),Si(e,t)}function Ki(e,t,n){return e=Hi(e),Ti(e,t,n)}function Gi(){if(null!==Vi){var e=Vi;Vi=null,Ii(e)}Qi()}function Qi(){if(!zi&&null!==Ui){zi=!0;var e=0;try{var t=Ui;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ti(Ri,Gi),n}finally{zi=!1}}}var Yi=x.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),Zi=null,es=null,ts=null;function ns(){ts=es=Zi=null}function rs(e){var t=Ji.current;ui(Ji),e.type._context._currentValue=t}function is(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ss(e,t){Zi=e,ts=es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function os(e,t){if(ts!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ts=e,t=1073741823),t={context:e,observedBits:t,next:null},null===es){if(null===Zi)throw Error(o(308));es=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else es=es.next=t;return e._currentValue}var as=!1;function ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function cs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hs(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ds(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fs(e,t,n,r){var s=e.updateQueue;as=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var c=l,u=c.next;c.next=null,null===a?o=u:a.next=u,a=c;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=c)}}if(null!==o){for(d=s.baseState,a=0,h=u=c=null;;){l=o.lane;var f=o.eventTime;if((r&l)===l){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(l=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,l);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(l="function"===typeof(p=m.payload)?p.call(f,d,l):p)||void 0===l)break e;d=i({},d,l);break e;case 2:as=!0}}null!==o.callback&&(e.flags|=32,null===(l=s.effects)?s.effects=[o]:l.push(o))}else f={eventTime:f,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(u=h=f,c=d):h=h.next=f,a|=l;if(null===(o=o.next)){if(null===(l=s.shared.pending))break;o=l.next,l.next=null,s.lastBaseUpdate=l,s.shared.pending=null}}null===h&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,Ba|=a,e.lanes=a,e.memoizedState=d}}function ps(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var ms=(new r.Component).refs;function gs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ys={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fl(),i=pl(e),s=us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),hs(e,s),ml(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fl(),i=pl(e),s=us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),hs(e,s),ml(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fl(),r=pl(e),i=us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),hs(e,i),ml(e,r,n)}};function vs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!dr(n,r)||!dr(i,s))}function bs(e,t,n){var r=!1,i=di,s=t.contextType;return"object"===typeof s&&null!==s?s=os(s):(i=yi(t)?mi:fi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?gi(e,i):di),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ys,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ys.enqueueReplaceState(t,t.state,null)}function xs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ms,ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=os(s):(s=yi(t)?mi:fi.current,i.context=gi(e,s)),fs(e,n,i,r),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(gs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ys.enqueueReplaceState(i,i.state,null),fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var Es=Array.isArray;function _s(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ms&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function ks(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ss(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Kl(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Xl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_s(e,t,n),r.return=e,r):((r=Gl(n.type,n.key,n.props,null,e.mode,r)).ref=_s(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Jl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ql(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Gl(t.type,t.key,t.props,null,e.mode,n)).ref=_s(e,null,t),n.return=e,n;case _:return(t=Jl(t,e.mode,n)).return=e,t}if(Es(t)||B(t))return(t=Ql(t,e.mode,n,null)).return=e,t;ks(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?n.type===k?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null}if(Es(n)||B(n))return null!==i?null:h(e,t,n,r,null);ks(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return e=e.get(null===r.key?n:r.key)||null,r.type===k?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Es(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);ks(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),c}function g(i,a,l,c){var u=B(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,s,l){var c="object"===typeof s&&null!==s&&s.type===k&&null===s.key;c&&(s=s.props.children);var u="object"===typeof s&&null!==s;if(u)switch(s.$$typeof){case E:e:{for(u=s.key,c=r;null!==c;){if(c.key===u){if(7===c.tag){if(s.type===k){n(e,c.sibling),(r=i(c,s.props.children)).return=e,e=r;break e}}else if(c.elementType===s.type){n(e,c.sibling),(r=i(c,s.props)).ref=_s(e,c,s),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}s.type===k?((r=Ql(s.props.children,e.mode,l,s.key)).return=e,e=r):((l=Gl(s.type,s.key,s.props,null,e.mode,l)).ref=_s(e,r,s),l.return=e,e=l)}return a(e);case _:e:{for(c=s.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Jl(s,e.mode,l)).return=e,e=r}return a(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Xl(s,e.mode,l)).return=e,e=r),a(e);if(Es(s))return m(e,r,s,l);if(B(s))return g(e,r,s,l);if(u&&ks(e,s),"undefined"===typeof s&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,K(e.type)||"Component"))}return n(e,r)}}var Ts=Ss(!0),Is=Ss(!1),Cs={},Ns=ci(Cs),As=ci(Cs),Ps=ci(Cs);function Rs(e){if(e===Cs)throw Error(o(174));return e}function Ds(e,t){switch(hi(Ps,t),hi(As,e),hi(Ns,Cs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Ns),hi(Ns,t)}function Os(){ui(Ns),ui(As),ui(Ps)}function Ls(e){Rs(Ps.current);var t=Rs(Ns.current),n=pe(t,e.type);t!==n&&(hi(As,e),hi(Ns,n))}function js(e){As.current===e&&(ui(Ns),ui(As))}var Ms=ci(0);function Fs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Us=null,Vs=null,zs=!1;function Bs(e,t){var n=Hl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function $s(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function qs(e){if(zs){var t=Vs;if(t){var n=t;if(!$s(e,t)){if(!(t=Gr(n.nextSibling))||!$s(e,t))return e.flags=-1025&e.flags|2,zs=!1,void(Us=e);Bs(Us,n)}Us=e,Vs=Gr(t.firstChild)}else e.flags=-1025&e.flags|2,zs=!1,Us=e}}function Hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Us=e}function Ws(e){if(e!==Us)return!1;if(!zs)return Hs(e),zs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Vs;t;)Bs(e,t),t=Gr(t.nextSibling);if(Hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Vs=Gr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Vs=null}}else Vs=Us?Gr(e.stateNode.nextSibling):null;return!0}function Ks(){Vs=Us=null,zs=!1}var Gs=[];function Qs(){for(var e=0;e<Gs.length;e++)Gs[e]._workInProgressVersionPrimary=null;Gs.length=0}var Ys=x.ReactCurrentDispatcher,Xs=x.ReactCurrentBatchConfig,Js=0,Zs=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function so(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,s){if(Js=s,Zs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ys.current=null===e||null===e.memoizedState?Do:Oo,e=n(r,i),ro){s=0;do{if(ro=!1,!(25>s))throw Error(o(301));s+=1,to=eo=null,t.updateQueue=null,Ys.current=Lo,e=n(r,i)}while(ro)}if(Ys.current=Ro,t=null!==eo&&null!==eo.next,Js=0,to=eo=Zs=null,no=!1,t)throw Error(o(300));return e}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Zs.memoizedState=to=e:to=to.next=e,to}function lo(){if(null===eo){var e=Zs.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Zs.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Zs.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function uo(e){var t=lo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=s=null,c=i;do{var u=c.lane;if((Js&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=h,s=r):l=l.next=h,Zs.lanes|=u,Ba|=u}c=c.next}while(null!==c&&c!==i);null===l?s=r:l.next=a,ur(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ho(e){var t=lo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ur(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function fo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Js&e)===e)&&(t._workInProgressVersionPrimary=r,Gs.push(t))),e)return n(t._source);throw Gs.push(t),Error(o(350))}function po(e,t,n,r){var i=Oa;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),l=Ys.current,c=l.useState((function(){return fo(i,t,n)})),u=c[1],h=c[0];c=to;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=Zs;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=u;var e=s(t._source);if(!ur(a,e)){e=n(t._source),ur(h,e)||(u(e),e=pl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var l=31-qt(o),c=1<<l;r[l]|=e,o&=~c}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=pl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(s){n((function(){throw s}))}}))}),[t,r]),ur(p,n)&&ur(m,t)&&ur(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:h}).dispatch=u=Po.bind(null,Zs,e),c.queue=e,c.baseQueue=null,h=fo(i,t,n),c.memoizedState=c.baseState=h),h}function mo(e,t,n){return po(lo(),e,t,n)}function go(e){var t=ao();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Po.bind(null,Zs,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Zs.updateQueue)?(t={lastEffect:null},Zs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function vo(e){return e={current:e},ao().memoizedState=e}function bo(){return lo().memoizedState}function wo(e,t,n,r){var i=ao();Zs.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function xo(e,t,n,r){var i=lo();r=void 0===r?null:r;var s=void 0;if(null!==eo){var o=eo.memoizedState;if(s=o.destroy,null!==r&&so(r,o.deps))return void yo(t,n,s,r)}Zs.flags|=e,i.memoizedState=yo(1|t,n,s,r)}function Eo(e,t){return wo(516,4,e,t)}function _o(e,t){return xo(516,4,e,t)}function ko(e,t){return xo(4,2,e,t)}function So(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xo(4,2,So.bind(null,t,e),n)}function Io(){}function Co(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&so(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&so(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=qi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Xs.transition;Xs.transition=1;try{e(!1),t()}finally{Xs.transition=n}}))}function Po(e,t,n){var r=fl(),i=pl(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===Zs||null!==o&&o===Zs)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=o(a,n);if(s.eagerReducer=o,s.eagerState=l,ur(l,a))return}catch(c){}ml(e,i,r)}}var Ro={readContext:os,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Do={readContext:os,useCallback:function(e,t){return ao().memoizedState=[e,void 0===t?null:t],e},useContext:os,useEffect:Eo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=ao();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ao();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Po.bind(null,Zs,e),[r.memoizedState,e]},useRef:vo,useState:go,useDebugValue:Io,useDeferredValue:function(e){var t=go(e),n=t[0],r=t[1];return Eo((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=go(!1),t=e[0];return vo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ao();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(zs){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=go(t)[1];return 0===(2&Zs.mode)&&(Zs.flags|=516,yo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return go(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:os,useCallback:Co,useContext:os,useEffect:_o,useImperativeHandle:To,useLayoutEffect:ko,useMemo:No,useReducer:uo,useRef:bo,useState:function(){return uo(co)},useDebugValue:Io,useDeferredValue:function(e){var t=uo(co),n=t[0],r=t[1];return _o((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=uo(co)[0];return[bo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return uo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:os,useCallback:Co,useContext:os,useEffect:_o,useImperativeHandle:To,useLayoutEffect:ko,useMemo:No,useReducer:ho,useRef:bo,useState:function(){return ho(co)},useDebugValue:Io,useDeferredValue:function(e){var t=ho(co),n=t[0],r=t[1];return _o((function(){var t=Xs.transition;Xs.transition=1;try{r(e)}finally{Xs.transition=t}}),[e]),n},useTransition:function(){var e=ho(co)[0];return[bo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return ho(co)[0]},unstable_isNewReconciler:!1},jo=x.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Is(t,null,n,r):Ts(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var s=t.ref;return ss(t,i),r=oo(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,oa(e,t,i))}function Vo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!==typeof o||Wl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gl(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,zo(e,t,o,r,i,s))}return o=e.child,0===(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:dr)(i,r)&&e.ref===t.ref)?oa(e,t,s):(t.flags|=1,(e=Kl(o,r)).ref=t.ref,e.return=t,t.child=e)}function zo(e,t,n,r,i,s){if(null!==e&&dr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(s&i))return t.lanes=e.lanes,oa(e,t,s);0!==(16384&e.flags)&&(Mo=!0)}return qo(e,t,n,r,s)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_l(t,n);else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_l(t,e),null;t.memoizedState={baseLanes:0},_l(t,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,_l(t,r);return Fo(e,t,i,n),t.child}function $o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function qo(e,t,n,r,i){var s=yi(n)?mi:fi.current;return s=gi(t,s),ss(t,i),n=oo(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,oa(e,t,i))}function Ho(e,t,n,r,i){if(yi(n)){var s=!0;xi(t)}else s=!1;if(ss(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bs(t,n,r),xs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=os(c):c=gi(t,c=yi(n)?mi:fi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&ws(t,o,r,c),as=!1;var d=t.memoizedState;o.state=d,fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||pi.current||as?("function"===typeof u&&(gs(t,n,u,r),l=t.memoizedState),(a=as||vs(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,cs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Xi(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=os(l):l=gi(t,l=yi(n)?mi:fi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&ws(t,o,r,l),as=!1,d=t.memoizedState,o.state=d,fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||pi.current||as?("function"===typeof f&&(gs(t,n,f,r),p=t.memoizedState),(c=as||vs(t,n,c,r,d,p,l))?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,s,i)}function Wo(e,t,n,r,i,s){$o(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&Ei(t,n,!1),oa(e,t,s);r=t.stateNode,jo.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ts(t,e.child,null,s),t.child=Ts(t,null,a,s)):Fo(e,t,a,s),t.memoizedState=r.state,i&&Ei(t,n,!0),t.child}function Ko(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),Ds(e,t.containerInfo)}var Go,Qo,Yo,Xo,Jo={dehydrated:null,retryLane:0};function Zo(e,t,n){var r,i=t.pendingProps,s=Ms.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),hi(Ms,1&s),null===e?(void 0!==i.fallback&&qs(t),e=i.children,s=i.fallback,o?(e=ea(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=ea(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Yl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=na(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=ta(e,t,i.children,n),t.memoizedState=null,n))}function ea(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=Yl(t,i,0,null),n=Ql(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function ta(e,t,n,r){var i=e.child;return e=i.sibling,n=Kl(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function na(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0===(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Kl(o,a),null!==e?r=Kl(e,r):(r=Ql(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ra(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),is(e.return,t)}function ia(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function sa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ms.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ra(e,n);else if(19===e.tag)ra(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(Ms,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ia(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ia(t,!0,n,null,s,t.lastEffect);break;case"together":ia(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function oa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ba|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Kl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Kl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function aa(e,t){if(!zs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function la(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&vi(),null;case 3:return Os(),ui(pi),ui(fi),Qs(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ws(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Qo(t),null;case 5:js(t);var s=Rs(Ps.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Rs(Ns.current),Ws(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Jr]=t,r[Zr]=a,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,a),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ar("invalid",r);break;case"textarea":le(r,a),Ar("invalid",r)}for(var c in ke(n,a),e=null,a)a.hasOwnProperty(c)&&(s=a[c],"children"===c?"string"===typeof s?r.textContent!==s&&(e=["children",s]):"number"===typeof s&&r.textContent!==""+s&&(e=["children",""+s]):l.hasOwnProperty(c)&&null!=s&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,a,!0);break;case"textarea":Y(r),ue(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===s.nodeType?s:s.ownerDocument,e===he&&(e=fe(n)),e===he?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Go(e,t,!1,!1),t.stateNode=e,c=Se(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),s=r;break;case"iframe":case"object":case"embed":Ar("load",e),s=r;break;case"video":case"audio":for(s=0;s<Tr.length;s++)Ar(Tr[s],e);s=r;break;case"source":Ar("error",e),s=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),s=r;break;case"details":Ar("toggle",e),s=r;break;case"input":ee(e,r),s=Z(e,r),Ar("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":le(e,r),s=ae(e,r),Ar("invalid",e);break;default:s=r}ke(n,s);var u=s;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?Ee(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ye(e,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&ve(e,h):"number"===typeof h&&ve(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Ar("scroll",e):null!=h&&w(e,a,h,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Vr)}$r(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Rs(Ps.current),Rs(Ns.current),Ws(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ui(Ms),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ws(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ms.current)?0===Ua&&(Ua=3):(0!==Ua&&3!==Ua||(Ua=4),null===Oa||0===(134217727&Ba)&&0===(134217727&$a)||bl(Oa,ja))),(r||n)&&(t.flags|=4),null);case 4:return Os(),Qo(t),null===e&&Rr(t.stateNode.containerInfo),null;case 10:return rs(t),null;case 19:if(ui(Ms),null===(r=t.memoizedState))return null;if(a=0!==(64&t.flags),null===(c=r.rendering))if(a)aa(r,!1);else{if(0!==Ua||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fs(e))){for(t.flags|=64,aa(r,!1),null!==(a=c.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hi(Ms,1&Ms.current|2),t.child}e=e.sibling}null!==r.tail&&$i()>Ka&&(t.flags|=64,a=!0,aa(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Fs(c))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),aa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!zs)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*$i()-r.renderingStartTime>Ka&&1073741824!==n&&(t.flags|=64,a=!0,aa(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=$i(),n.sibling=null,t=Ms.current,hi(Ms,a?1&t|2:1&t),n):null;case 23:case 24:return kl(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function ca(e){switch(e.tag){case 1:yi(e.type)&&vi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Os(),ui(pi),ui(fi),Qs(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return js(e),null;case 13:return ui(Ms),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ui(Ms),null;case 4:return Os(),null;case 10:return rs(e),null;case 23:case 24:return kl(),null;default:return null}}function ua(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Go=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(){},Yo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Rs(Ns.current);var o,a=null;switch(n){case"input":s=Z(e,s),r=Z(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(h in ke(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var c=s[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var u=r[h];if(c=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(null!=u||null!=c))if("style"===h)if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(a=a||[]).push(h,u)):"children"===h?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Ar("scroll",e),a||c===u||(a=[])):"object"===typeof u&&null!==u&&u.$$typeof===L?u.toString():(a=a||[]).push(h,u))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xa||(Xa=!0,Ja=r),ha(0,t)},n}function pa(e,t,n){(n=us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ha(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Za?Za=new Set([this]):Za.add(this),ha(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ma="function"===typeof WeakSet?WeakSet:Set;function ga(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){zl(e,n)}else t.current=null}function ya(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Kr(t.stateNode.containerInfo))}throw Error(o(163))}function va(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fl(n,e),Ml(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ps(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ps(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&$r(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Et(n)))))}throw Error(o(163))}function ba(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=xe("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function wa(e,t){if(ki&&"function"===typeof ki.onCommitFiberUnmount)try{ki.onCommitFiberUnmount(_i,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fl(t,n);else{r=t;try{i()}catch(s){zl(r,s)}}n=n.next}while(n!==e)}break;case 1:if(ga(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){zl(t,s)}break;case 5:ga(t);break;case 4:Ta(e,t)}}function xa(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Ea(e){return 5===e.tag||3===e.tag||4===e.tag}function _a(e){e:{for(var t=e.return;null!==t;){if(Ea(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ve(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Ea(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ka(e,n,t):Sa(e,n,t)}function ka(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(ka(e,t,n),e=e.sibling;null!==e;)ka(e,t,n),e=e.sibling}function Sa(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Sa(e,t,n),e=e.sibling;null!==e;)Sa(e,t,n),e=e.sibling}function Ta(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,l=i,c=l;;)if(wa(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(a=n,l=i.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(wa(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function Ia(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,i),t=Se(e,r),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];"style"===a?Ee(n,l):"dangerouslySetInnerHTML"===a?ye(n,l):"children"===a?ve(n,l):w(n,a,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,Et(n.containerInfo)));case 13:return null!==t.memoizedState&&(Wa=$i(),ba(t.child,!0)),void Ca(t);case 19:return void Ca(t);case 23:case 24:return void ba(t,null!==t.memoizedState)}throw Error(o(163))}function Ca(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ma),t.forEach((function(t){var r=$l.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Na(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Aa=Math.ceil,Pa=x.ReactCurrentDispatcher,Ra=x.ReactCurrentOwner,Da=0,Oa=null,La=null,ja=0,Ma=0,Fa=ci(0),Ua=0,Va=null,za=0,Ba=0,$a=0,qa=0,Ha=null,Wa=0,Ka=1/0;function Ga(){Ka=$i()+500}var Qa,Ya=null,Xa=!1,Ja=null,Za=null,el=!1,tl=null,nl=90,rl=[],il=[],sl=null,ol=0,al=null,ll=-1,cl=0,ul=0,hl=null,dl=!1;function fl(){return 0!==(48&Da)?$i():-1!==ll?ll:ll=$i()}function pl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qi()?1:2;if(0===cl&&(cl=za),0!==Yi.transition){0!==ul&&(ul=null!==Ha?Ha.pendingLanes:0),e=cl;var t=4186112&~ul;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qi(),0!==(4&Da)&&98===e?e=Vt(12,cl):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),cl),e}function ml(e,t,n){if(50<ol)throw ol=0,al=null,Error(o(185));if(null===(e=gl(e,t)))return null;$t(e,t,n),e===Oa&&($a|=t,4===Ua&&bl(e,ja));var r=qi();1===t?0!==(8&Da)&&0===(48&Da)?wl(e):(yl(e,n),0===Da&&(Ga(),Gi())):(0===(4&Da)||98!==r&&99!==r||(null===sl?sl=new Set([e]):sl.add(e)),yl(e,n)),Ha=e}function gl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function yl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-qt(a),c=1<<l,u=s[l];if(-1===u){if(0===(c&r)||0!==(c&i)){u=t,Mt(c);var h=jt;s[l]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);a&=~c}if(r=Ft(e,e===Oa?ja:0),t=jt,0===r)null!==n&&(n!==Mi&&Ii(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Ii(n)}15===t?(n=wl.bind(null,e),null===Ui?(Ui=[n],Vi=Ti(Ri,Qi)):Ui.push(n),n=Mi):14===t?n=Ki(99,wl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Ki(n,vl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function vl(e){if(ll=-1,ul=cl=0,0!==(48&Da))throw Error(o(327));var t=e.callbackNode;if(jl()&&e.callbackNode!==t)return null;var n=Ft(e,e===Oa?ja:0);if(0===n)return null;var r=n,i=Da;Da|=16;var s=Il();for(Oa===e&&ja===r||(Ga(),Sl(e,r));;)try{Al();break}catch(l){Tl(e,l)}if(ns(),Pa.current=s,Da=i,null!==La?r=0:(Oa=null,ja=0,r=Ua),0!==(za&$a))Sl(e,0);else if(0!==r){if(2===r&&(Da|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(n=Ut(e))&&(r=Cl(e,n))),1===r)throw t=Va,Sl(e,0),bl(e,n),yl(e,$i()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Dl(e);break;case 3:if(bl(e,n),(62914560&n)===n&&10<(r=Wa+500-$i())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Dl.bind(null,e),r);break}Dl(e);break;case 4:if(bl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-qt(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=$i()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Aa(n/1960))-n)){e.timeoutHandle=Hr(Dl.bind(null,e),n);break}Dl(e);break;default:throw Error(o(329))}}return yl(e,$i()),e.callbackNode===t?vl.bind(null,e):null}function bl(e,t){for(t&=~qa,t&=~$a,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function wl(e){if(0!==(48&Da))throw Error(o(327));if(jl(),e===Oa&&0!==(e.expiredLanes&ja)){var t=ja,n=Cl(e,t);0!==(za&$a)&&(n=Cl(e,t=Ft(e,t)))}else n=Cl(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Da|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(t=Ut(e))&&(n=Cl(e,t))),1===n)throw n=Va,Sl(e,0),bl(e,t),yl(e,$i()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dl(e),yl(e,$i()),null}function xl(e,t){var n=Da;Da|=1;try{return e(t)}finally{0===(Da=n)&&(Ga(),Gi())}}function El(e,t){var n=Da;Da&=-2,Da|=8;try{return e(t)}finally{0===(Da=n)&&(Ga(),Gi())}}function _l(e,t){hi(Fa,Ma),Ma|=t,za|=t}function kl(){Ma=Fa.current,ui(Fa)}function Sl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==La)for(n=La.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vi();break;case 3:Os(),ui(pi),ui(fi),Qs();break;case 5:js(r);break;case 4:Os();break;case 13:case 19:ui(Ms);break;case 10:rs(r);break;case 23:case 24:kl()}n=n.return}Oa=e,La=Kl(e.current,null),ja=Ma=za=t,Ua=0,Va=null,qa=$a=Ba=0}function Tl(e,t){for(;;){var n=La;try{if(ns(),Ys.current=Ro,no){for(var r=Zs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Js=0,to=eo=Zs=null,ro=!1,Ra.current=null,null===n||null===n.return){Ua=1,Va=t,La=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=ja,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l;if(0===(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&Ms.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var y=new Set;y.add(c),d.updateQueue=y}else g.add(c);if(0===(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=us(-1,1);v.tag=2,hs(a,v)}a.lanes|=1;break e}l=void 0,a=t;var b=s.pingCache;if(null===b?(b=s.pingCache=new da,l=new Set,b.set(c,l)):void 0===(l=b.get(c))&&(l=new Set,b.set(c,l)),!l.has(a)){l.add(a);var w=Bl.bind(null,s,c,a);c.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((K(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ua&&(Ua=2),l=ua(l,a),d=o;do{switch(d.tag){case 3:s=l,d.flags|=4096,t&=-t,d.lanes|=t,ds(d,fa(0,s,t));break e;case 1:s=l;var x=d.type,E=d.stateNode;if(0===(64&d.flags)&&("function"===typeof x.getDerivedStateFromError||null!==E&&"function"===typeof E.componentDidCatch&&(null===Za||!Za.has(E)))){d.flags|=4096,t&=-t,d.lanes|=t,ds(d,pa(d,s,t));break e}}d=d.return}while(null!==d)}Rl(n)}catch(_){t=_,La===n&&null!==n&&(La=n=n.return);continue}break}}function Il(){var e=Pa.current;return Pa.current=Ro,null===e?Ro:e}function Cl(e,t){var n=Da;Da|=16;var r=Il();for(Oa===e&&ja===t||Sl(e,t);;)try{Nl();break}catch(i){Tl(e,i)}if(ns(),Da=n,Pa.current=r,null!==La)throw Error(o(261));return Oa=null,ja=0,Ua}function Nl(){for(;null!==La;)Pl(La)}function Al(){for(;null!==La&&!Ci();)Pl(La)}function Pl(e){var t=Qa(e.alternate,e,Ma);e.memoizedProps=e.pendingProps,null===t?Rl(e):La=t,Ra.current=null}function Rl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=la(n,t,Ma)))return void(La=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ma)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=ca(t)))return n.flags&=2047,void(La=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(La=t);La=t=e}while(null!==t);0===Ua&&(Ua=5)}function Dl(e){var t=qi();return Wi(99,Ol.bind(null,e,t)),null}function Ol(e,t){do{jl()}while(null!==tl);if(0!==(48&Da))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<s;){var c=31-qt(s),u=1<<c;i[c]=0,a[c]=-1,l[c]=-1,s&=~u}if(null!==sl&&0===(24&r)&&sl.has(e)&&sl.delete(e),e===Oa&&(La=Oa=null,ja=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Da,Da|=32,Ra.current=null,zr=Qt,yr(a=gr())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,s=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(T){l=null;break e}var h=0,d=-1,f=-1,p=0,m=0,g=a,y=null;t:for(;;){for(var v;g!==l||0!==s&&3!==g.nodeType||(d=h+s),g!==c||0!==u&&3!==g.nodeType||(f=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===a)break t;if(y===l&&++p===s&&(d=h),y===c&&++m===u&&(f=h),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}l=-1===d||-1===f?null:{start:d,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;Br={focusedElem:a,selectionRange:l},Qt=!1,hl=null,dl=!1,Ya=r;do{try{Ll()}catch(T){if(null===Ya)throw Error(o(330));zl(Ya,T),Ya=Ya.nextEffect}}while(null!==Ya);hl=null,Ya=r;do{try{for(a=e;null!==Ya;){var b=Ya.flags;if(16&b&&ve(Ya.stateNode,""),128&b){var w=Ya.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&b){case 2:_a(Ya),Ya.flags&=-3;break;case 6:_a(Ya),Ya.flags&=-3,Ia(Ya.alternate,Ya);break;case 1024:Ya.flags&=-1025;break;case 1028:Ya.flags&=-1025,Ia(Ya.alternate,Ya);break;case 4:Ia(Ya.alternate,Ya);break;case 8:Ta(a,l=Ya);var E=l.alternate;xa(l),null!==E&&xa(E)}Ya=Ya.nextEffect}}catch(T){if(null===Ya)throw Error(o(330));zl(Ya,T),Ya=Ya.nextEffect}}while(null!==Ya);if(x=Br,w=gr(),b=x.focusedElem,a=x.selectionRange,w!==b&&b&&b.ownerDocument&&mr(b.ownerDocument.documentElement,b)){null!==a&&yr(b)&&(w=a.start,void 0===(x=a.end)&&(x=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(x,b.value.length)):(x=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),l=b.textContent.length,E=Math.min(a.start,l),a=void 0===a.end?E:Math.min(a.end,l),!x.extend&&E>a&&(l=a,a=E,E=l),l=pr(b,E),s=pr(b,a),l&&s&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==s.node||x.focusOffset!==s.offset)&&((w=w.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),E>a?(x.addRange(w),x.extend(s.node,s.offset)):(w.setEnd(s.node,s.offset),x.addRange(w))))),w=[];for(x=b;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<w.length;b++)(x=w[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Qt=!!zr,Br=zr=null,e.current=n,Ya=r;do{try{for(b=e;null!==Ya;){var _=Ya.flags;if(36&_&&va(b,Ya.alternate,Ya),128&_){w=void 0;var k=Ya.ref;if(null!==k){var S=Ya.stateNode;Ya.tag,w=S,"function"===typeof k?k(w):k.current=w}}Ya=Ya.nextEffect}}catch(T){if(null===Ya)throw Error(o(330));zl(Ya,T),Ya=Ya.nextEffect}}while(null!==Ya);Ya=null,Fi(),Da=i}else e.current=n;if(el)el=!1,tl=e,nl=t;else for(Ya=r;null!==Ya;)t=Ya.nextEffect,Ya.nextEffect=null,8&Ya.flags&&((_=Ya).sibling=null,_.stateNode=null),Ya=t;if(0===(r=e.pendingLanes)&&(Za=null),1===r?e===al?ol++:(ol=0,al=e):ol=0,n=n.stateNode,ki&&"function"===typeof ki.onCommitFiberRoot)try{ki.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(T){}if(yl(e,$i()),Xa)throw Xa=!1,e=Ja,Ja=null,e;return 0!==(8&Da)||Gi(),null}function Ll(){for(;null!==Ya;){var e=Ya.alternate;dl||null===hl||(0!==(8&Ya.flags)?et(Ya,hl)&&(dl=!0):13===Ya.tag&&Na(e,Ya)&&et(Ya,hl)&&(dl=!0));var t=Ya.flags;0!==(256&t)&&ya(e,Ya),0===(512&t)||el||(el=!0,Ki(97,(function(){return jl(),null}))),Ya=Ya.nextEffect}}function jl(){if(90!==nl){var e=97<nl?97:nl;return nl=90,Wi(e,Ul)}return!1}function Ml(e,t){rl.push(t,e),el||(el=!0,Ki(97,(function(){return jl(),null})))}function Fl(e,t){il.push(t,e),el||(el=!0,Ki(97,(function(){return jl(),null})))}function Ul(){if(null===tl)return!1;var e=tl;if(tl=null,0!==(48&Da))throw Error(o(331));var t=Da;Da|=32;var n=il;il=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"===typeof a)try{a()}catch(c){if(null===s)throw Error(o(330));zl(s,c)}}for(n=rl,rl=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var l=i.create;i.destroy=l()}catch(c){if(null===s)throw Error(o(330));zl(s,c)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Da=t,Gi(),!0}function Vl(e,t,n){hs(e,t=fa(0,t=ua(n,t),1)),t=fl(),null!==(e=gl(e,1))&&($t(e,1,t),yl(e,t))}function zl(e,t){if(3===e.tag)Vl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Vl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Za||!Za.has(r))){var i=pa(n,e=ua(t,e),1);if(hs(n,i),i=fl(),null!==(n=gl(n,1)))$t(n,1,i),yl(n,i);else if("function"===typeof r.componentDidCatch&&(null===Za||!Za.has(r)))try{r.componentDidCatch(t,e)}catch(s){}break}}n=n.return}}function Bl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fl(),e.pingedLanes|=e.suspendedLanes&n,Oa===e&&(ja&n)===n&&(4===Ua||3===Ua&&(62914560&ja)===ja&&500>$i()-Wa?Sl(e,0):qa|=n),yl(e,t)}function $l(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qi()?1:2:(0===cl&&(cl=za),0===(t=zt(62914560&~cl))&&(t=4194304))),n=fl(),null!==(e=gl(e,t))&&($t(e,t,n),yl(e,n))}function ql(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hl(e,t,n,r){return new ql(e,t,n,r)}function Wl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Kl(e,t){var n=e.alternate;return null===n?((n=Hl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gl(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Wl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Ql(n.children,i,s,t);case j:a=8,i|=16;break;case S:a=8,i|=1;break;case T:return(e=Hl(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=s,e;case A:return(e=Hl(13,n,t,i)).type=A,e.elementType=A,e.lanes=s,e;case P:return(e=Hl(19,n,t,i)).elementType=P,e.lanes=s,e;case M:return Yl(n,i,s,t);case F:return(e=Hl(24,n,t,i)).elementType=F,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case C:a=9;break e;case N:a=11;break e;case R:a=14;break e;case D:a=16,r=null;break e;case O:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Hl(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Ql(e,t,n,r){return(e=Hl(7,e,r,t)).lanes=n,e}function Yl(e,t,n,r){return(e=Hl(23,e,r,t)).elementType=M,e.lanes=n,e}function Xl(e,t,n){return(e=Hl(6,e,null,t)).lanes=n,e}function Jl(e,t,n){return(t=Hl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function ec(e,t,n,r){var i=t.current,s=fl(),a=pl(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(yi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=wi(n,c,l);break e}}n=l}else n=di;return null===t.context?t.context=n:t.pendingContext=n,(t=us(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),hs(i,t),ml(i,a,s),a}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Zl(e,t,null!=n&&!0===n.hydrate),t=Hl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ls(t),e[ei]=n.current,Rr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function sc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=tc(o);a.call(e)}}ec(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"===typeof i){var l=i;i=function(){var e=tc(o);l.call(e)}}El((function(){ec(t,o,e,i)}))}return tc(o)}function ac(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!sc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Qa=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Ko(t),Ks();break;case 5:Ls(t);break;case 1:yi(t.type)&&xi(t);break;case 4:Ds(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;hi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Zo(e,t,n):(hi(Ms,1&Ms.current),null!==(t=oa(e,t,n))?t.sibling:null);hi(Ms,1&Ms.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return sa(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(Ms,Ms.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return oa(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=gi(t,fi.current),ss(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var s=!0;xi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ls(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&gs(t,r,a,e),i.updater=ys,t.stateNode=i,i._reactInternals=t,xs(t,r,e,n),t=Wo(null,t,r,!0,s,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return Wl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===R)return 14}return 2}(i),e=Xi(i,e),s){case 0:t=qo(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Ko(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,cs(e,t),fs(t,r,null,n),(r=t.memoizedState.element)===i)Ks(),t=oa(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Vs=Gr(t.stateNode.containerInfo.firstChild),Us=t,s=zs=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Gs.push(s);for(n=Is(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ks();t=t.child}return t;case 5:return Ls(t),null===e&&qs(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,qr(r,i)?a=null:null!==s&&qr(r,s)&&(t.flags|=16),$o(e,t),Fo(e,t,a,n),t.child;case 6:return null===e&&qs(t),null;case 13:return Zo(e,t,n);case 4:return Ds(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ts(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var l=t.type._context;if(hi(Ji,l._currentValue),l._currentValue=s,null!==a)if(l=a.value,0===(s=ur(l,s)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,s):1073741823))){if(a.children===i.children&&!pi.current){t=oa(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&s)){1===l.tag&&((u=us(-1,n&-n)).tag=2,hs(l,u)),l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),is(l.return,n),c.lanes|=n;break}u=u.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,ss(t,n),r=r(i=os(i,s.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return s=Xi(i=t.type,t.pendingProps),Vo(e,t,i,s=Xi(i.type,s),r,n);case 15:return zo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,xi(t)):e=!1,ss(t,n),bs(t,r,i),xs(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return sa(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ml(e,4,fl()),rc(e,4))},nt=function(e){13===e.tag&&(ml(e,67108864,fl()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=fl(),n=pl(e);ml(e,n,t),rc(e,n)}},it=function(e,t){return t()},Ie=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=si(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},De=xl,Oe=function(e,t,n,r,i){var s=Da;Da|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Da=s)&&(Ga(),Gi())}},Le=function(){0===(49&Da)&&(function(){if(null!==sl){var e=sl;sl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,yl(e,$i())}))}Gi()}(),jl())},je=function(e,t){var n=Da;Da|=2;try{return e(t)}finally{0===(Da=n)&&(Ga(),Gi())}};var lc={Events:[ri,ii,si,Pe,Re,jl,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},uc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{_i=hc.inject(uc),ki=hc}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lc,t.createPortal=ac,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Da;if(0!==(48&n))return e(t);Da|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Da=n,Gi()}},t.hydrate=function(e,t,n){if(!sc(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!sc(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!sc(e))throw Error(o(40));return!!e._reactRootContainer&&(El((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=xl,t.unstable_createPortal=function(e,t){return ac(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!sc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(43),t=n(950);function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}var s=n(173),o=n.n(s);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(null,arguments)}function l(e){return"/"===e.charAt(0)}function c(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const u=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],s=e&&l(e),o=t&&l(t),a=s||o;if(e&&l(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var u=i[i.length-1];n="."===u||".."===u||""===u}else n=!1;for(var h=0,d=i.length;d>=0;d--){var f=i[d];"."===f?c(i,d):".."===f?(c(i,d),h++):h&&(c(i,d),h--)}if(!a)for(;h--;h)i.unshift("..");!a||""===i[0]||i[0]&&l(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function h(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const d=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=h(t),i=h(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1};var f="Invariant failed";function p(e,t){if(!e)throw new Error(f)}function m(e){return"/"===e.charAt(0)?e:"/"+e}function g(e){return"/"===e.charAt(0)?e.substr(1):e}function y(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function v(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function b(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function w(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=a({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=u(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function x(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var s="function"===typeof e?e(t,n):e;"string"===typeof s?"function"===typeof r?r(s,i):i(!0):i(!1!==s)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var E=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(e,t){t(window.confirm(e))}var k="popstate",S="hashchange";function T(){try{return window.history.state||{}}catch(e){return{}}}function I(e){void 0===e&&(e={}),E||p(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,s=i.forceRefresh,o=void 0!==s&&s,l=i.getUserConfirmation,c=void 0===l?_:l,u=i.keyLength,h=void 0===u?6:u,d=e.basename?v(m(e.basename)):"";function f(e){var t=e||{},n=t.key,r=t.state,i=window.location,s=i.pathname+i.search+i.hash;return d&&(s=y(s,d)),w(s,r,n)}function g(){return Math.random().toString(36).substr(2,h)}var I=x();function C(e){a(V,e),V.length=t.length,I.notifyListeners(V.location,V.action)}function N(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||R(f(e.state))}function A(){R(f(T()))}var P=!1;function R(e){if(P)P=!1,C();else{I.confirmTransitionTo(e,"POP",c,(function(t){t?C({action:"POP",location:e}):function(e){var t=V.location,n=O.indexOf(t.key);-1===n&&(n=0);var r=O.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(P=!0,j(i))}(e)}))}}var D=f(T()),O=[D.key];function L(e){return d+b(e)}function j(e){t.go(e)}var M=0;function F(e){1===(M+=e)&&1===e?(window.addEventListener(k,N),r&&window.addEventListener(S,A)):0===M&&(window.removeEventListener(k,N),r&&window.removeEventListener(S,A))}var U=!1;var V={length:t.length,action:"POP",location:D,createHref:L,push:function(e,r){var i="PUSH",s=w(e,r,g(),V.location);I.confirmTransitionTo(s,i,c,(function(e){if(e){var r=L(s),a=s.key,l=s.state;if(n)if(t.pushState({key:a,state:l},null,r),o)window.location.href=r;else{var c=O.indexOf(V.location.key),u=O.slice(0,c+1);u.push(s.key),O=u,C({action:i,location:s})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",s=w(e,r,g(),V.location);I.confirmTransitionTo(s,i,c,(function(e){if(e){var r=L(s),a=s.key,l=s.state;if(n)if(t.replaceState({key:a,state:l},null,r),o)window.location.replace(r);else{var c=O.indexOf(V.location.key);-1!==c&&(O[c]=s.key),C({action:i,location:s})}else window.location.replace(r)}}))},go:j,goBack:function(){j(-1)},goForward:function(){j(1)},block:function(e){void 0===e&&(e=!1);var t=I.setPrompt(e);return U||(F(1),U=!0),function(){return U&&(U=!1,F(-1)),t()}},listen:function(e){var t=I.appendListener(e);return F(1),function(){F(-1),t()}}};return V}var C="hashchange",N={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+g(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:g,decodePath:m},slash:{encodePath:m,decodePath:m}};function A(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function P(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function R(e){window.location.replace(A(window.location.href)+"#"+e)}function D(e){void 0===e&&{},E||p(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?_:r,s=n.hashType,o=void 0===s?"slash":s,l=e.basename?v(m(e.basename)):"",c=N[o],u=c.encodePath,h=c.decodePath;function d(){var e=h(P());return l&&y(e,l),w(e)}var f=x();function g(e){a(V,e),V.length=t.length,f.notifyListeners(V.location,V.action)}var k=!1,S=null;function T(){var e=P(),t=u(e);if(e!==t)R(t);else{var n=d(),r=V.location;if(!k&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(S===b(n))return;(function(e){if(k)g();else{var t="POP";f.confirmTransitionTo(e,t,i,(function(n){n?g({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(b(t));-1===n&&0;var r=L.lastIndexOf(b(e));-1===r&&0;var i=n-r;i&&j(i)}(e)}))}})(n)}}var I=P(),D=u(I);I!==D&&R(D);var O=d(),L=[b(O)];function j(e){t.go(e)}var M=0;function F(e){1===(M+=e)&&1===e?window.addEventListener(C,T):0===M&&window.removeEventListener(C,T)}var U=!1;var V={length:t.length,action:"POP",location:O,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&A(window.location.href),n+"#"+u(l+b(e))},push:function(e,t){var n="PUSH",r=w(e,void 0,void 0,V.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=b(r),i=u(l+t);if(P()!==i){(function(e){window.location.hash=e})(i);var s=L.lastIndexOf(b(V.location)),o=L.slice(0,s+1);o.push(t),g({action:n,location:r})}else g()}}))},replace:function(e,t){var n="REPLACE",r=w(e,void 0,void 0,V.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=b(r),i=u(l+t);P()!==i&&R(i);var s=L.indexOf(b(V.location));-1!==s&&(L[s]=t),g({action:n,location:r})}}))},go:j,goBack:function(){j(-1)},goForward:function(){j(1)},block:function(e){void 0===e&&!1;var t=f.setPrompt(e);return U||(F(1),!0),function(){return U&&F(-1),t()}},listen:function(e){var t=f.appendListener(e);return F(1),function(){F(-1),t()}}};return V}function O(e,t,n){return Math.min(Math.max(e,t),n)}var L=n(504),j=n.n(L);n(86);function M(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n(219);var F=1073741823,U="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var V=e.createContext||function(t,n){var r,s,a="__create-react-context-"+function(){var e="__global_unique_id__";return U[e]=(U[e]||0)+1}()+"__",l=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}i(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):F,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(e.Component);l.childContextTypes=((r={})[a]=o().object.isRequired,r);var c=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).observedBits=void 0,t.state={value:t.getValue()},t.onUpdate=function(e,n){0!==((0|t.observedBits)&n)&&t.setState({value:t.getValue()})},t}i(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?F:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?F:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():t},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(e.Component);return c.contextTypes=((s={})[a]=o().object,s),{Provider:l,Consumer:c}},z=function(e){var t=V();return t.displayName=e,t},B=z("Router-History"),$=z("Router"),q=function(t){function n(e){var n;return(n=t.call(this,e)||this).state={location:e.history.location},n._isMounted=!1,n._pendingLocation=null,e.staticContext||(n.unlisten=e.history.listen((function(e){n._pendingLocation=e}))),n}i(n,t),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return e.createElement($.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},e.createElement(B.Provider,{children:this.props.children||null,value:this.props.history}))},n}(e.Component);e.Component;var H=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(e.Component);var W={},K=0;function G(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(W[e])return W[e];var t=j().compile(e);return K<1e4&&(W[e]=t,K++),t}(e)(t,{pretty:!0})}function Q(t){var n=t.computedMatch,r=t.to,i=t.push,s=void 0!==i&&i;return e.createElement($.Consumer,null,(function(t){t||p(!1);var i=t.history,o=t.staticContext,l=s?i.push:i.replace,c=w(n?"string"===typeof r?G(r,n.params):a({},r,{pathname:G(r.pathname,n.params)}):r);return o?(l(c),null):e.createElement(H,{onMount:function(){l(c)},onUpdate:function(e,t){var n=w(t.to);(function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&d(e.state,t.state)})(n,a({},c,{key:n.key}))||l(c)},to:r})}))}var Y={},X=0;function J(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,s=void 0!==i&&i,o=n.strict,a=void 0!==o&&o,l=n.sensitive,c=void 0!==l&&l;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=Y[n]||(Y[n]={});if(r[e])return r[e];var i=[],s={regexp:j()(e,i,t),keys:i};return X<1e4&&(r[e]=s,X++),s}(n,{end:s,strict:a,sensitive:c}),i=r.regexp,o=r.keys,l=i.exec(e);if(!l)return null;var u=l[0],h=l.slice(1),d=e===u;return s&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var Z=function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),n.prototype.render=function(){var t=this;return e.createElement($.Consumer,null,(function(n){n||p(!1);var r=t.props.location||n.location,i=a({},n,{location:r,match:t.props.computedMatch?t.props.computedMatch:t.props.path?J(r.pathname,t.props):n.match}),s=t.props,o=s.children,l=s.component,c=s.render;return Array.isArray(o)&&function(t){return 0===e.Children.count(t)}(o)&&(o=null),e.createElement($.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:l?e.createElement(l,i):c?c(i):null:"function"===typeof o?o(i):null)}))},n}(e.Component);function ee(e){return"/"===e.charAt(0)?e:"/"+e}function te(e,t){if(!e)return t;var n=ee(e);return 0!==t.pathname.indexOf(n)?t:a({},t,{pathname:t.pathname.substr(n.length)})}function ne(e){return"string"===typeof e?e:b(e)}function re(e){return function(){p(!1)}}function ie(){}e.Component;var se=function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),n.prototype.render=function(){var t=this;return e.createElement($.Consumer,null,(function(n){n||p(!1);var r,i,s=t.props.location||n.location;return e.Children.forEach(t.props.children,(function(t){if(null==i&&e.isValidElement(t)){r=t;var o=t.props.path||t.props.from;i=o?J(s.pathname,a({},t.props,{path:o})):n.match}})),i?e.cloneElement(r,{location:s,computedMatch:i}):null}))},n}(e.Component);var oe=e.useContext;function ae(){return oe(B)}function le(){return oe($).location}var ce=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).history=I(e.props),e}return i(n,t),n.prototype.render=function(){return e.createElement(q,{history:this.history,children:this.props.children})},n}(e.Component);e.Component;var ue=function(e,t){return"function"===typeof e?e(t):e},he=function(e,t){return"string"===typeof e?w(e,null,null,t):e},de=function(e){return e},fe=e.forwardRef;"undefined"===typeof fe&&(fe=de);var pe=fe((function(t,n){var r=t.innerRef,i=t.navigate,s=t.onClick,o=M(t,["innerRef","navigate","onClick"]),l=o.target,c=a({},o,{onClick:function(e){try{s&&s(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||l&&"_self"!==l||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=de!==fe&&n||r,e.createElement("a",c)}));var me=fe((function(t,n){var r=t.component,i=void 0===r?pe:r,s=t.replace,o=t.to,l=t.innerRef,c=M(t,["component","replace","to","innerRef"]);return e.createElement($.Consumer,null,(function(t){t||p(!1);var r=t.history,u=he(ue(o,t.location),t.location),h=u?r.createHref(u):"",d=a({},c,{href:h,navigate:function(){var e=ue(o,t.location),n=b(t.location)===b(he(e));(s||n?r.replace:r.push)(e)}});return de!==fe?d.ref=n||l:d.innerRef=l,e.createElement(i,d)}))})),ge=function(e){return e},ye=e.forwardRef;"undefined"===typeof ye&&(ye=ge);ye((function(t,n){var r=t["aria-current"],i=void 0===r?"page":r,s=t.activeClassName,o=void 0===s?"active":s,l=t.activeStyle,c=t.className,u=t.exact,h=t.isActive,d=t.location,f=t.sensitive,m=t.strict,g=t.style,y=t.to,v=t.innerRef,b=M(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return e.createElement($.Consumer,null,(function(t){t||p(!1);var r=d||t.location,s=he(ue(y,r),r),w=s.pathname,x=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),E=x?J(r.pathname,{path:x,exact:u,sensitive:f,strict:m}):null,_=!!(h?h(E,r):E),k="function"===typeof c?c(_):c,S="function"===typeof g?g(_):g;_&&(k=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(k,o),S=a({},S,l));var T=a({"aria-current":_&&i||null,className:k,style:S,to:s},b);return ge!==ye?T.ref=n||v:T.innerRef=v,e.createElement(me,T)}))}));const ve=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ve(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new we;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xe=function(e){return function(e){const t=ve(e);return be.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ee=function(e){try{return be.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const _e=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ke=()=>{try{return _e()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBBSDWWb8W1YD5o34R99U2YLBcd75hhOwA",REACT_APP_FIREBASE_AUTH_DOMAIN:"my-shop-cdeac.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"my-shop-cdeac",REACT_APP_FIREBASE_STORAGE_BUCKET:"my-shop-cdeac.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"656183080182",REACT_APP_FIREBASE_APP_ID:"1:656183080182:web:2657a61c5d62ae383268d7"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Ee(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Se=e=>{var t,n;return null===(n=null===(t=ke())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Te=()=>{var e;return null===(e=ke())||void 0===e?void 0:e.config},Ie=e=>{var t;return null===(t=ke())||void 0===t?void 0:t[`_${e}`]};class Ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ne(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ae(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Pe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Re.prototype.create)}}class Re{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(De,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new Pe(n,s,t)}}const De=/\{\$([^}]+)}/g;function Oe(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Le(n)&&Le(s)){if(!Oe(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Le(e){return null!==e&&"object"===typeof e}function je(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Me(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Fe(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Ue{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ve),void 0===r.error&&(r.error=Ve),void 0===r.complete&&(r.complete=Ve);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ve(){}function ze(e){return e&&e._delegate?e._delegate:e}class Be{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $e="[DEFAULT]";class qe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ce;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:$e})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===$e?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e;return this.component?this.component.multipleInstances?e:$e:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class He{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const We=[];var Ke;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ke||(Ke={}));const Ge={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},Qe=Ke.INFO,Ye={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},Xe=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ye[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class Je{constructor(e){this.name=e,this._logLevel=Qe,this._logHandler=Xe,this._userLogHandler=null,We.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ge[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...t),this._logHandler(this,Ke.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...t),this._logHandler(this,Ke.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...t),this._logHandler(this,Ke.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...t),this._logHandler(this,Ke.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...t),this._logHandler(this,Ke.ERROR,...t)}}let Ze,et;const tt=new WeakMap,nt=new WeakMap,rt=new WeakMap,it=new WeakMap,st=new WeakMap;let ot={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return nt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||rt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ct(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function at(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(et||(et=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ut(this),n),ct(tt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ct(e.apply(ut(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ut(this),t,...r);return rt.set(s,t.sort?t.sort():[t]),ct(s)}}function lt(e){return"function"===typeof e?at(e):(e instanceof IDBTransaction&&function(e){if(nt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));nt.set(e,t)}(e),t=e,(Ze||(Ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,ot):e);var t}function ct(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ct(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&tt.set(t,e)})).catch((()=>{})),st.set(t,e),t}(e);if(it.has(e))return it.get(e);const t=lt(e);return t!==e&&(it.set(e,t),st.set(t,e)),t}const ut=e=>st.get(e);const ht=["get","getKey","getAll","getAllKeys","count"],dt=["put","add","delete","clear"],ft=new Map;function pt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ft.get(t))return ft.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=dt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ht.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ft.set(t,s),s}ot=(e=>({...e,get:(t,n,r)=>pt(t,n)||e.get(t,n,r),has:(t,n)=>!!pt(t,n)||e.has(t,n)}))(ot);class mt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const gt="@firebase/app",yt="0.9.13",vt=new Je("@firebase/app"),bt="@firebase/app-compat",wt="@firebase/analytics-compat",xt="@firebase/analytics",Et="@firebase/app-check-compat",_t="@firebase/app-check",kt="@firebase/auth",St="@firebase/auth-compat",Tt="@firebase/database",It="@firebase/database-compat",Ct="@firebase/functions",Nt="@firebase/functions-compat",At="@firebase/installations",Pt="@firebase/installations-compat",Rt="@firebase/messaging",Dt="@firebase/messaging-compat",Ot="@firebase/performance",Lt="@firebase/performance-compat",jt="@firebase/remote-config",Mt="@firebase/remote-config-compat",Ft="@firebase/storage",Ut="@firebase/storage-compat",Vt="@firebase/firestore",zt="@firebase/firestore-compat",Bt="firebase",$t="[DEFAULT]",qt={[gt]:"fire-core",[bt]:"fire-core-compat",[xt]:"fire-analytics",[wt]:"fire-analytics-compat",[_t]:"fire-app-check",[Et]:"fire-app-check-compat",[kt]:"fire-auth",[St]:"fire-auth-compat",[Tt]:"fire-rtdb",[It]:"fire-rtdb-compat",[Ct]:"fire-fn",[Nt]:"fire-fn-compat",[At]:"fire-iid",[Pt]:"fire-iid-compat",[Rt]:"fire-fcm",[Dt]:"fire-fcm-compat",[Ot]:"fire-perf",[Lt]:"fire-perf-compat",[jt]:"fire-rc",[Mt]:"fire-rc-compat",[Ft]:"fire-gcs",[Ut]:"fire-gcs-compat",[Vt]:"fire-fst",[zt]:"fire-fst-compat","fire-js":"fire-js",[Bt]:"fire-js-all"},Ht=new Map,Wt=new Map;function Kt(e,t){try{e.container.addComponent(t)}catch(n){vt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Gt(e){const t=e.name;if(Wt.has(t))return vt.debug(`There were multiple attempts to register component ${t}.`),!1;Wt.set(t,e);for(const n of Ht.values())Kt(n,e);return!0}function Qt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Yt=new Re("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Xt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Be("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yt.create("app-deleted",{appName:this._name})}}const Jt="9.23.0";function Zt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:$t,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Yt.create("bad-app-name",{appName:String(i)});if(n||(n=Te()),!n)throw Yt.create("no-options");const s=Ht.get(i);if(s){if(Oe(n,s.options)&&Oe(r,s.config))return s;throw Yt.create("duplicate-app",{appName:i})}const o=new He(i);for(const l of Wt.values())o.addComponent(l);const a=new Xt(n,r,o);return Ht.set(i,a),a}function en(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;const t=Ht.get(e);if(!t&&e===$t&&Te())return Zt();if(!t)throw Yt.create("no-app",{appName:e});return t}function tn(e,t,n){var r;let i=null!==(r=qt[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void vt.warn(e.join(" "))}Gt(new Be(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const nn="firebase-heartbeat-store";let rn=null;function sn(){return rn||(rn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ct(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ct(o.result),e.oldVersion,e.newVersion,ct(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(nn)}}).catch((e=>{throw Yt.create("idb-open",{originalErrorMessage:e.message})}))),rn}async function on(e,t){try{const n=(await sn()).transaction(nn,"readwrite"),r=n.objectStore(nn);await r.put(t,an(e)),await n.done}catch(n){if(n instanceof Pe)vt.warn(n.message);else{const e=Yt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});vt.warn(e.message)}}}function an(e){return`${e.name}!${e.options.appId}`}class ln{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new un(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=cn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=cn(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),hn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=xe(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function cn(){return(new Date).toISOString().substring(0,10)}class un{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ae()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await sn();return await t.transaction(nn).objectStore(nn).get(an(e))}catch(t){if(t instanceof Pe)vt.warn(t.message);else{const e=Yt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});vt.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return on(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return on(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function hn(e){return xe(JSON.stringify({version:2,heartbeats:e})).length}var dn;dn="",Gt(new Be("platform-logger",(e=>new mt(e)),"PRIVATE")),Gt(new Be("heartbeat",(e=>new ln(e)),"PRIVATE")),tn(gt,yt,dn),tn(gt,yt,"esm2017"),tn("fire-js","");tn("firebase","9.23.0","app");function fn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function pn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mn=pn,gn=new Re("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yn=new Je("@firebase/auth");function vn(e){if(yn.logLevel<=Ke.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];yn.error(`Auth (${Jt}): ${e}`,...n)}}function bn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw En(e,...n)}function wn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return En(e,...n)}function xn(e,t,n){const r=Object.assign(Object.assign({},mn()),{[t]:n});return new Re("auth","Firebase",r).create(t,{appName:e.name})}function En(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return gn.create(e,...n)}function _n(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw En(t,...r)}}function kn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw vn(t),new Error(t)}function Sn(e,t){e||kn(t)}function Tn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function In(){return"http:"===Cn()||"https:"===Cn()}function Cn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Nn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(In()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class An{constructor(e,t){this.shortDelay=e,this.longDelay=t,Sn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Nn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pn(e,t){Sn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Rn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},On=new An(3e4,6e4);function Ln(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function jn(e,t,n,r){return Mn(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=je(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Rn.fetch()(Un(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Mn(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Dn),t);try{const t=new Vn(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw zn(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw zn(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw zn(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw zn(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw xn(e,a,o);bn(e,a)}}catch(i){if(i instanceof Pe)throw i;bn(e,"network-request-failed",{message:String(i)})}}async function Fn(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await jn(e,t,n,r,i);return"mfaPendingCredential"in s&&bn(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Un(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Pn(e.config,i):`${e.config.apiScheme}://${i}`}class Vn{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(wn(this.auth,"network-request-failed"))),On.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function zn(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=wn(e,t,r);return i.customData._tokenResponse=n,i}function Bn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function $n(e){return 1e3*Number(e)}function qn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return vn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ee(n);return e?JSON.parse(e):(vn("Failed to decode base64 JWT payload"),null)}catch(i){return vn("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Hn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Pe&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Wn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Kn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bn(this.lastLoginAt),this.creationTime=Bn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Gn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Hn(e,async function(e,t){return jn(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));_n(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=fn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kn(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Qn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_n(e.idToken,"internal-error"),_n("undefined"!==typeof e.idToken,"internal-error"),_n("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=qn(e);return _n(t,"internal-error"),_n("undefined"!==typeof t.exp,"internal-error"),_n("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _n(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Mn(e,{},(async()=>{const n=je({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Un(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Rn.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Qn;return n&&(_n("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(_n("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(_n("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qn,this.toJSON())}_performRefresh(){return kn("not implemented")}}function Yn(e,t){_n("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Xn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=fn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Kn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Hn(this,this.stsTokenManager.getToken(this.auth,e));return _n(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ze(e),r=await n.getIdToken(t),i=qn(r);_n(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Bn($n(i.auth_time)),issuedAtTime:Bn($n(i.iat)),expirationTime:Bn($n(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ze(e);await Gn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(_n(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_n(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Gn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Hn(this,async function(e,t){return jn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:E}=t;_n(v&&E,e,"internal-error");const _=Qn.fromJSON(this.name,E);_n("string"===typeof v,e,"internal-error"),Yn(u,e.name),Yn(h,e.name),_n("boolean"===typeof b,e,"internal-error"),_n("boolean"===typeof w,e,"internal-error"),Yn(d,e.name),Yn(f,e.name),Yn(p,e.name),Yn(m,e.name),Yn(g,e.name),Yn(y,e.name);const k=new Xn({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:_,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(k.providerData=x.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Qn;r.updateFromServerResponse(t);const i=new Xn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Gn(i),i}}const Jn=new Map;function Zn(e){Sn(e instanceof Function,"Expected a class definition");let t=Jn.get(e);return t?(Sn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Jn.set(e,t),t)}class er{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}er.type="NONE";const tr=er;function nr(e,t,n){return`firebase:${e}:${t}:${n}`}class rr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=nr(this.userKey,r.apiKey,i),this.fullPersistenceKey=nr("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new rr(Zn(tr),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Zn(tr);const s=nr(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Xn._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new rr(i,e,n)):new rr(i,e,n)}}function ir(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(sr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ur(t))return"Blackberry";if(hr(t))return"Webos";if(or(t))return"Safari";if((t.includes("chrome/")||ar(t))&&!t.includes("edge/"))return"Chrome";if(cr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function sr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne();return/firefox\//i.test(e)}function or(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne();return/crios\//i.test(e)}function lr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne();return/iemobile/i.test(e)}function cr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne();return/android/i.test(e)}function ur(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne();return/blackberry/i.test(e)}function hr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne();return/webos/i.test(e)}function dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fr(){return function(){const e=Ne();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function pr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne();return dr(e)||cr(e)||hr(e)||ur(e)||/windows phone/i.test(e)||lr(e)}function mr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ir(Ne());break;case"Worker":t=`${ir(Ne())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Jt}/${r}`}async function gr(e,t){return jn(e,"GET","/v2/recaptchaConfig",Ln(e,t))}function yr(e){return void 0!==e&&void 0!==e.enterprise}class vr{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function br(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=wn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function wr(e){return`__${e}${Math.floor(1e6*Math.random())}`}class xr{constructor(e){this.type="recaptcha-enterprise",this.auth=Sr(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;yr(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{gr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new vr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&yr(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));br("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Er(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new xr(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class _r{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class kr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tr(this),this.idTokenSubscription=new Tr(this),this.beforeStateQueue=new _r(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zn(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await rr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _n(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gn(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?ze(e):null;return t&&_n(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&_n(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Zn(e))}))}async initializeRecaptchaConfig(){const e=await gr(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new vr(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new xr(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Re("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zn(e)||this._popupRedirectResolver;_n(t,this,"argument-error"),this.redirectPersistenceManager=await rr.create(this,[Zn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return _n(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _n(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(yn.logLevel<=Ke.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];yn.warn(`Auth (${Jt}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Sr(e){return ze(e)}class Tr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Ue(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return _n(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ir(e,t,n){const r=Sr(e);_n(r._canInitEmulator,r,"emulator-config-failed"),_n(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Cr(t),{host:o,port:a}=function(e){const t=Cr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Nr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Nr(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Cr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Nr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ar{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return kn("not implemented")}_getIdTokenResponse(e){return kn("not implemented")}_linkToIdToken(e,t){return kn("not implemented")}_getReauthenticationResolver(e){return kn("not implemented")}}async function Pr(e,t){return jn(e,"POST","/v1/accounts:update",t)}async function Rr(e,t){return Fn(e,"POST","/v1/accounts:signInWithPassword",Ln(e,t))}class Dr extends Ar{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Dr(e,t,"password")}static _fromEmailAndCode(e,t){return new Dr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Er(e,n,"signInWithPassword");return Rr(e,t)}return Rr(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Er(e,n,"signInWithPassword");return Rr(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return Fn(e,"POST","/v1/accounts:signInWithEmailLink",Ln(e,t))}(e,{email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Pr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Fn(e,"POST","/v1/accounts:signInWithEmailLink",Ln(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Or(e,t){return Fn(e,"POST","/v1/accounts:signInWithIdp",Ln(e,t))}class Lr extends Ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Lr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=fn(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Lr(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Or(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Or(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Or(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=je(t)}return e}}const jr={USER_NOT_FOUND:"user-not-found"};class Mr extends Ar{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Mr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Mr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Fn(e,"POST","/v1/accounts:signInWithPhoneNumber",Ln(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Fn(e,"POST","/v1/accounts:signInWithPhoneNumber",Ln(e,t));if(n.temporaryProof)throw zn(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Fn(e,"POST","/v1/accounts:signInWithPhoneNumber",Ln(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),jr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Mr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Fr{constructor(e){var t,n,r,i,s,o;const a=Me(Fe(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);_n(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Me(Fe(e)).link,n=t?Me(Fe(t)).deep_link_id:null,r=Me(Fe(e)).deep_link_id;return(r?Me(Fe(r)).link:null)||r||n||t||e}(e);try{return new Fr(t)}catch(n){return null}}}class Ur{constructor(){this.providerId=Ur.PROVIDER_ID}static credential(e,t){return Dr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Fr.parseLink(t);return _n(n,"argument-error"),Dr._fromEmailAndCode(e,n.code,n.tenantId)}}Ur.PROVIDER_ID="password",Ur.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ur.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Vr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class zr extends Vr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Br extends zr{constructor(){super("facebook.com")}static credential(e){return Lr._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Br.credential(t.oauthAccessToken)}catch(n){return null}}}Br.FACEBOOK_SIGN_IN_METHOD="facebook.com",Br.PROVIDER_ID="facebook.com";class $r extends zr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Lr._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return $r.credential(n,r)}catch(i){return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com",$r.PROVIDER_ID="google.com";class qr extends zr{constructor(){super("github.com")}static credential(e){return Lr._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return qr.credential(t.oauthAccessToken)}catch(n){return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com",qr.PROVIDER_ID="github.com";class Hr extends zr{constructor(){super("twitter.com")}static credential(e,t){return Lr._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Hr.credential(n,r)}catch(i){return null}}}async function Wr(e,t){return Fn(e,"POST","/v1/accounts:signUp",Ln(e,t))}Hr.TWITTER_SIGN_IN_METHOD="twitter.com",Hr.PROVIDER_ID="twitter.com";class Kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Xn._fromIdTokenResponse(e,n,r),s=Gr(n);return new Kr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Gr(n);return new Kr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Gr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Qr extends Pe{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Qr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Qr(e,t,n,r)}}function Yr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Qr._fromErrorAndOperation(e,n,t,r);throw n}))}async function Xr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Hn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Kr._forOperation(e,"link",r)}async function Jr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Hn(e,Yr(r,i,t,e),n);_n(s.idToken,r,"internal-error");const o=qn(s.idToken);_n(o,r,"internal-error");const{sub:a}=o;return _n(e.uid===a,r,"user-mismatch"),Kr._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&bn(r,"user-mismatch"),s}}async function Zr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Yr(e,r,t),s=await Kr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ei(e,t){return Zr(Sr(e),t)}function ti(e){return ze(e).signOut()}new WeakMap;const ni="__sak";class ri{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ni,"1"),this.storage.removeItem(ni),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ii extends ri{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ne();return or(e)||dr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=pr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);fr()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ii.type="LOCAL";const si=ii;class oi extends ri{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}oi.type="SESSION";const ai=oi;class li{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new li(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}li.receivers=[];class ui{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=ci("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function hi(){return window}function di(){return"undefined"!==typeof hi().WorkerGlobalScope&&"function"===typeof hi().importScripts}const fi="firebaseLocalStorageDb",pi="firebaseLocalStorage",mi="fbase_key";class gi{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function yi(e,t){return e.transaction([pi],t?"readwrite":"readonly").objectStore(pi)}function vi(){const e=indexedDB.open(fi,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(pi,{keyPath:mi})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(pi)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(fi);return new gi(e).toPromise()}(),t(await vi()))}))}))}async function bi(e,t,n){const r=yi(e,!0).put({[mi]:t,value:n});return new gi(r).toPromise()}function wi(e,t){const n=yi(e,!0).delete(t);return new gi(n).toPromise()}class xi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await vi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return di()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=li._getInstance(di()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ui(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vi();return await bi(e,ni,"1"),await wi(e,ni),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>bi(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=yi(e,!1).get(t),r=await new gi(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>wi(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=yi(e,!1).getAll();return new gi(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xi.type="LOCAL";const Ei=xi;wr("rcb"),new An(3e4,6e4);const _i="recaptcha";async function ki(e,t,n){var r;const i=await n.verify();try{let s;if(_n("string"===typeof i,e,"argument-error"),_n(n.type===_i,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){_n("enroll"===t.type,e,"internal-error");const n=await function(e,t){return jn(e,"POST","/v2/accounts/mfaEnrollment:start",Ln(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{_n("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;_n(n,e,"missing-multi-factor-info");const o=await function(e,t){return jn(e,"POST","/v2/accounts/mfaSignIn:start",Ln(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return jn(e,"POST","/v1/accounts:sendVerificationCode",Ln(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Si{constructor(e){this.providerId=Si.PROVIDER_ID,this.auth=Sr(e)}verifyPhoneNumber(e,t){return ki(this.auth,e,ze(t))}static credential(e,t){return Mr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Si.credentialFromTaggedObject(t)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Mr._fromTokenResponse(n,r):null}}function Ti(e,t){return t?Zn(t):(_n(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Si.PROVIDER_ID="phone",Si.PHONE_SIGN_IN_METHOD="phone";class Ii extends Ar{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Or(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Or(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Or(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ci(e){return Zr(e.auth,new Ii(e),e.bypassAuthState)}function Ni(e){const{auth:t,user:n}=e;return _n(n,t,"internal-error"),Jr(n,new Ii(e),e.bypassAuthState)}async function Ai(e){const{auth:t,user:n}=e;return _n(n,t,"internal-error"),Xr(n,new Ii(e),e.bypassAuthState)}class Pi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ci;case"linkViaPopup":case"linkViaRedirect":return Ai;case"reauthViaPopup":case"reauthViaRedirect":return Ni;default:bn(this.auth,"internal-error")}}resolve(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ri=new An(2e3,1e4);class Di extends Pi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Di.currentPopupAction&&Di.currentPopupAction.cancel(),Di.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _n(e,this.auth,"internal-error"),e}async onExecution(){Sn(1===this.filter.length,"Popup operations only handle one event");const e=ci();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(wn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Di.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Ri.get())};e()}}Di.currentPopupAction=null;const Oi=new Map;class Li extends Pi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Oi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Fi(t),r=Mi(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Oi.set(this.auth._key(),e)}return this.bypassAuthState||Oi.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ji(e,t){Oi.set(e._key(),t)}function Mi(e){return Zn(e._redirectPersistence)}function Fi(e){return nr("pendingRedirect",e.config.apiKey,e.name)}async function Ui(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Sr(e),i=Ti(r,t),s=new Li(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Vi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Bi(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(wn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zi(e))}saveEventToCache(e){this.cachedEventUids.add(zi(e)),this.lastProcessedEventTime=Date.now()}}function zi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Bi(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const $i=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qi=/^https?/;async function Hi(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return jn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Wi(r))return}catch(n){}bn(e,"unauthorized-domain")}function Wi(e){const t=Tn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!qi.test(n))return!1;if($i.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ki=new An(3e4,6e4);function Gi(){const e=hi().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Qi=null;function Yi(e){return Qi=Qi||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){Gi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Gi(),n(wn(e,"network-request-failed"))},timeout:Ki.get()})}if(null===(i=null===(r=hi().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=hi().gapi)||void 0===s?void 0:s.load)){const t=wr("iframefcb");return hi()[t]=()=>{gapi.load?o():n(wn(e,"network-request-failed"))},br(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Qi=null,e}))}(e),Qi}const Xi=new An(5e3,15e3),Ji={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function es(e){const t=e.config;_n(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Pn(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Jt},i=Zi.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${je(r).slice(1)}`}const ts={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ns{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function rs(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ts),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ne().toLowerCase();n&&(a=ar(c)?"_blank":n),sr(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return dr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ns(null);const h=window.open(t||"",a,u);_n(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ns(h)}const is="__/auth/handler",ss="emulator/auth/handler",os=encodeURIComponent("fac");async function as(e,t,n,r,i,s){_n(e.config.authDomain,e,"auth-domain-config-required"),_n(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Jt,eventId:i};if(t instanceof Vr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof zr){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${os}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${is}`;return Pn(t,ss)}(e)}?${je(a).slice(1)}${c}`}const ls="webStorageSupport";const cs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ai,this._completeRedirectFn=Ui,this._overrideRedirectResult=ji}async _openPopup(e,t,n,r){var i;Sn(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return rs(e,await as(e,t,n,Tn(),r),ci())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){hi().location.href=e}(await as(e,t,n,Tn(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Sn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Yi(e),n=hi().gapi;return _n(n,e,"internal-error"),t.open({where:document.body,url:es(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ji,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=wn(e,"network-request-failed"),s=hi().setTimeout((()=>{r(i)}),Xi.get());function o(){hi().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Vi(e);return t.register("authEvent",(t=>{_n(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ls,{type:ls},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ls];void 0!==i&&t(!!i),bn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Hi(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pr()||or()||dr()}};var us="@firebase/auth",hs="0.23.2";class ds{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_n(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const fs=Ie("authIdTokenMaxAge")||300;let ps=null;function ms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en();const t=Qt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Qt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Oe(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;bn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:cs,persistence:[Ei,si,ai]}),r=Ie("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>fs)return;const r=null===t||void 0===t?void 0:t.token;ps!==r&&(ps=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){ze(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){ze(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const s=Se("auth");return s&&Ir(n,`http://${s}`),n}var gs;gs="Browser",Gt(new Be("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;_n(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:gs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mr(gs)},c=new kr(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Gt(new Be("auth-internal",(e=>(e=>new ds(e))(Sr(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),tn(us,hs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(gs)),tn(us,hs,"esm2017");var ys,vs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},bs={},ws=ws||{},xs=vs||self;function Es(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function _s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ks="closure_uid_"+(1e9*Math.random()>>>0),Ss=0;function Ts(e,t,n){return e.call.apply(e.bind,arguments)}function Is(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Cs(e,t,n){return(Cs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ts:Is).apply(null,arguments)}function Ns(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function As(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Ps(){this.s=this.s,this.o=this.o}Ps.prototype.s=!1,Ps.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ks)&&e[ks]||(e[ks]=++Ss))},Ps.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Rs=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ds(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Os(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Es(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Ls(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ls.prototype.h=function(){this.defaultPrevented=!0};var js=function(){if(!xs.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{xs.addEventListener("test",(()=>{}),t),xs.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function Ms(e){return/^[\s\xa0]*$/.test(e)}function Fs(){var e=xs.navigator;return e&&(e=e.userAgent)?e:""}function Us(e){return-1!=Fs().indexOf(e)}function Vs(e){return Vs[" "](e),e}Vs[" "]=function(){};var zs,Bs,$s=Us("Opera"),qs=Us("Trident")||Us("MSIE"),Hs=Us("Edge"),Ws=Hs||qs,Ks=Us("Gecko")&&!(-1!=Fs().toLowerCase().indexOf("webkit")&&!Us("Edge"))&&!(Us("Trident")||Us("MSIE"))&&!Us("Edge"),Gs=-1!=Fs().toLowerCase().indexOf("webkit")&&!Us("Edge");function Qs(){var e=xs.document;return e?e.documentMode:void 0}e:{var Ys="",Xs=function(){var e=Fs();return Ks?/rv:([^\);]+)(\)|;)/.exec(e):Hs?/Edge\/([\d\.]+)/.exec(e):qs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Gs?/WebKit\/(\S+)/.exec(e):$s?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Xs&&(Ys=Xs?Xs[1]:""),qs){var Js=Qs();if(null!=Js&&Js>parseFloat(Ys)){zs=String(Js);break e}}zs=Ys}if(xs.document&&qs){var Zs=Qs();Bs=Zs||(parseInt(zs,10)||void 0)}else Bs=void 0;var eo=Bs;function to(e,t){if(Ls.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ks){e:{try{Vs(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:no[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&to.$.h.call(this)}}As(to,Ls);var no={2:"touch",3:"pen",4:"mouse"};to.prototype.h=function(){to.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ro="closure_listenable_"+(1e6*Math.random()|0),io=0;function so(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++io,this.fa=this.ia=!1}function oo(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ao(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function lo(e){const t={};for(const n in e)t[n]=e[n];return t}const co="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uo(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<co.length;t++)n=co[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ho(e){this.src=e,this.g={},this.h=0}function fo(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Rs(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(oo(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function po(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}ho.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=po(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new so(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var mo="closure_lm_"+(1e6*Math.random()|0),go={};function yo(e,t,n,r,i){if(r&&r.once)return bo(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)yo(e,t[s],n,r,i);return null}return n=To(n),e&&e[ro]?e.O(t,n,_s(r)?!!r.capture:!!r,i):vo(e,t,n,!1,r,i)}function vo(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=_s(i)?!!i.capture:!!i,a=ko(e);if(a||(e[mo]=a=new ho(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=_o;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)js||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Eo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function bo(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)bo(e,t[s],n,r,i);return null}return n=To(n),e&&e[ro]?e.P(t,n,_s(r)?!!r.capture:!!r,i):vo(e,t,n,!0,r,i)}function wo(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)wo(e,t[s],n,r,i);else r=_s(r)?!!r.capture:!!r,n=To(n),e&&e[ro]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=po(s=e.g[t],n,r,i))&&(oo(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ko(e))&&(t=e.g[t.toString()],e=-1,t&&(e=po(t,n,r,i)),(n=-1<e?t[e]:null)&&xo(n))}function xo(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[ro])fo(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Eo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ko(t))?(fo(n,e),0==n.h&&(n.src=null,t[mo]=null)):oo(e)}}}function Eo(e){return e in go?go[e]:go[e]="on"+e}function _o(e,t){if(e.fa)e=!0;else{t=new to(t,this);var n=e.listener,r=e.la||e.src;e.ia&&xo(e),e=n.call(r,t)}return e}function ko(e){return(e=e[mo])instanceof ho?e:null}var So="__closure_events_fn_"+(1e9*Math.random()>>>0);function To(e){return"function"===typeof e?e:(e[So]||(e[So]=function(t){return e.handleEvent(t)}),e[So])}function Io(){Ps.call(this),this.i=new ho(this),this.S=this,this.J=null}function Co(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ls(t,e);else if(t instanceof Ls)t.target=t.target||e;else{var i=t;uo(t=new Ls(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=No(o,r,!0,t)&&i}if(i=No(o=t.g=e,r,!0,t)&&i,i=No(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=No(o=t.g=n[s],r,!1,t)&&i}function No(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&fo(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}As(Io,Ps),Io.prototype[ro]=!0,Io.prototype.removeEventListener=function(e,t,n,r){wo(this,e,t,n,r)},Io.prototype.N=function(){if(Io.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)oo(n[r]);delete t.g[e],t.h--}}this.J=null},Io.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Io.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ao=xs.JSON.stringify;function Po(){var e=Fo;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ro=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Do),(e=>e.reset()));class Do{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Oo(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Lo(e){xs.setTimeout((()=>{throw e}),0)}let jo,Mo=!1,Fo=new class{constructor(){this.h=this.g=null}add(e,t){const n=Ro.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Uo=()=>{const e=xs.Promise.resolve(void 0);jo=()=>{e.then(Vo)}};var Vo=()=>{for(var e;e=Po();){try{e.h.call(e.g)}catch(n){Lo(n)}var t=Ro;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Mo=!1};function zo(e,t){Io.call(this),this.h=e||1,this.g=t||xs,this.j=Cs(this.qb,this),this.l=Date.now()}function Bo(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function $o(e,t,n){if("function"===typeof e)n&&(e=Cs(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Cs(e.handleEvent,e)}return 2147483647<Number(t)?-1:xs.setTimeout(e,t||0)}function qo(e){e.g=$o((()=>{e.g=null,e.i&&(e.i=!1,qo(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}As(zo,Io),(ys=zo.prototype).ga=!1,ys.T=null,ys.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Co(this,"tick"),this.ga&&(Bo(this),this.start()))}},ys.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ys.N=function(){zo.$.N.call(this),Bo(this),delete this.g};class Ho extends Ps{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qo(this)}N(){super.N(),this.g&&(xs.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wo(e){Ps.call(this),this.h=e,this.g={}}As(Wo,Ps);var Ko=[];function Go(e,t,n,r){Array.isArray(n)||(n&&(Ko[0]=n.toString()),n=Ko);for(var i=0;i<n.length;i++){var s=yo(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Qo(e){ao(e.g,(function(e,t){this.g.hasOwnProperty(t)&&xo(e)}),e),e.g={}}function Yo(){this.g=!0}function Xo(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ao(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Wo.prototype.N=function(){Wo.$.N.call(this),Qo(this)},Wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yo.prototype.Ea=function(){this.g=!1},Yo.prototype.info=function(){};var Jo={},Zo=null;function ea(){return Zo=Zo||new Io}function ta(e){Ls.call(this,Jo.Ta,e)}function na(e){const t=ea();Co(t,new ta(t))}function ra(e,t){Ls.call(this,Jo.STAT_EVENT,e),this.stat=t}function ia(e){const t=ea();Co(t,new ra(t,e))}function sa(e,t){Ls.call(this,Jo.Ua,e),this.size=t}function oa(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return xs.setTimeout((function(){e()}),t)}Jo.Ta="serverreachability",As(ta,Ls),Jo.STAT_EVENT="statevent",As(ra,Ls),Jo.Ua="timingevent",As(sa,Ls);var aa={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},la={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ca(){}function ua(e){return e.h||(e.h=e.i())}function ha(){}ca.prototype.h=null;var da,fa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pa(){Ls.call(this,"d")}function ma(){Ls.call(this,"c")}function ga(){}function ya(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Wo(this),this.P=ba,e=Ws?125:void 0,this.V=new zo(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new va}function va(){this.i=null,this.g="",this.h=!1}As(pa,Ls),As(ma,Ls),As(ga,ca),ga.prototype.g=function(){return new XMLHttpRequest},ga.prototype.i=function(){return{}},da=new ga;var ba=45e3,wa={},xa={};function Ea(e,t,n){e.L=1,e.v=za(ja(t)),e.s=n,e.S=!0,_a(e,null)}function _a(e,t){e.G=Date.now(),Ia(e),e.A=ja(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),el(n.i,"t",r),e.C=0,n=e.l.J,e.h=new va,e.g=tc(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ho(Cs(e.Pa,e,e.g),e.O)),Go(e.U,e.g,"readystatechange",e.nb),t=e.I?lo(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),na(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function ka(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Sa(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=Ta(e,n),r==xa){4==t&&(e.o=4,ia(14),i=!1),Xo(e.j,e.m,null,"[Incomplete Response]");break}if(r==wa){e.o=4,ia(15),Xo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Xo(e.j,e.m,r,null),Ra(e,r)}ka(e)&&r!=xa&&r!=wa&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ia(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Kl(t),t.M=!0,ia(11))):(Xo(e.j,e.m,n,"[Invalid Chunked Response]"),Pa(e),Aa(e))}function Ta(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?xa:(n=Number(t.substring(n,r)),isNaN(n)?wa:(r+=1)+n>t.length?xa:(t=t.slice(r,r+n),e.C=r+n,t))}function Ia(e){e.Y=Date.now()+e.P,Ca(e,e.P)}function Ca(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=oa(Cs(e.lb,e),t)}function Na(e){e.B&&(xs.clearTimeout(e.B),e.B=null)}function Aa(e){0==e.l.H||e.J||Yl(e.l,e)}function Pa(e){Na(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Bo(e.V),Qo(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ra(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||al(n.i,e)))if(!e.K&&al(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ql(n),Ul(n)}Wl(n),ia(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=oa(Cs(n.ib,n),6e3));if(1>=ol(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Jl(n,11)}else if((e.K||n.g==e)&&Ql(n),!Ms(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ll(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Va(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=ec(r,r.J?r.pa:null,r.Y),o.K){cl(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Na(a),Ia(a)),r.g=o}else Hl(r);0<n.j.length&&zl(n)}else"stop"!=c[0]&&"close"!=c[0]||Jl(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Jl(n,7):Fl(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}na()}catch(c){}}function Da(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Es(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Es(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Es(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(ys=ya.prototype).setTimeout=function(e){this.P=e},ys.nb=function(e){e=e.target;const t=this.M;t&&3==Rl(e)?t.l():this.Pa(e)},ys.Pa=function(e){try{if(e==this.g)e:{const u=Rl(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Ws||this.g&&(this.h.h||this.g.ja()||Dl(this.g)))){this.J||4!=u||7==t||na(),Na(this);var n=this.g.da();this.ca=n;t:if(ka(this)){var r=Dl(this.g);e="";var i=r.length,s=4==Rl(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Pa(this),Aa(this);var o="";break t}this.h.i=new xs.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ms(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,ia(12),Pa(this),Aa(this);break e}Xo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ra(this,n)}this.S?(Sa(this,u,o),Ws&&this.i&&3==u&&(Go(this.U,this.V,"tick",this.mb),this.V.start())):(Xo(this.j,this.m,o,null),Ra(this,o)),4==u&&Pa(this),this.i&&!this.J&&(4==u?Yl(this.l,this):(this.i=!1,Ia(this)))}else(function(e){const t={};e=(e.g&&2<=Rl(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Ms(e[r]))continue;var n=Oo(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ia(12)):(this.o=0,ia(13)),Pa(this),Aa(this)}}}catch(u){}},ys.mb=function(){if(this.g){var e=Rl(this.g),t=this.g.ja();this.C<t.length&&(Na(this),Sa(this,e,t),this.i&&4!=e&&Ia(this))}},ys.cancel=function(){this.J=!0,Pa(this)},ys.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(na(),ia(17)),Pa(this),this.o=2,Aa(this)):Ca(this,this.Y-e)};var Oa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function La(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof La){this.h=e.h,Ma(this,e.j),this.s=e.s,this.g=e.g,Fa(this,e.m),this.l=e.l;var t=e.i,n=new Ya;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ua(this,n),this.o=e.o}else e&&(t=String(e).match(Oa))?(this.h=!1,Ma(this,t[1]||"",!0),this.s=Ba(t[2]||""),this.g=Ba(t[3]||"",!0),Fa(this,t[4]),this.l=Ba(t[5]||"",!0),Ua(this,t[6]||"",!0),this.o=Ba(t[7]||"")):(this.h=!1,this.i=new Ya(null,this.h))}function ja(e){return new La(e)}function Ma(e,t,n){e.j=n?Ba(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Fa(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ua(e,t,n){t instanceof Ya?(e.i=t,function(e,t){t&&!e.j&&(Xa(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ja(this,t),el(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=$a(t,Ga)),e.i=new Ya(t,e.h))}function Va(e,t,n){e.i.set(t,n)}function za(e){return Va(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ba(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function $a(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,qa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function qa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}La.prototype.toString=function(){var e=[],t=this.j;t&&e.push($a(t,Ha,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push($a(t,Ha,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push($a(n,"/"==n.charAt(0)?Ka:Wa,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",$a(n,Qa)),e.join("")};var Ha=/[#\/\?@]/g,Wa=/[#\?:]/g,Ka=/[#\?]/g,Ga=/[#\?@]/g,Qa=/#/g;function Ya(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Xa(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ja(e,t){Xa(e),t=tl(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Za(e,t){return Xa(e),t=tl(e,t),e.g.has(t)}function el(e,t,n){Ja(e,t),0<n.length&&(e.i=null,e.g.set(tl(e,t),Ds(n)),e.h+=n.length)}function tl(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ys=Ya.prototype).add=function(e,t){Xa(this),this.i=null,e=tl(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ys.forEach=function(e,t){Xa(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},ys.ta=function(){Xa(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},ys.Z=function(e){Xa(this);let t=[];if("string"===typeof e)Za(this,e)&&(t=t.concat(this.g.get(tl(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},ys.set=function(e,t){return Xa(this),this.i=null,Za(this,e=tl(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ys.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ys.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var nl=class{constructor(e,t){this.g=e,this.map=t}};function rl(e){this.l=e||il,xs.PerformanceNavigationTiming?e=0<(e=xs.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(xs.g&&xs.g.Ka&&xs.g.Ka()&&xs.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var il=10;function sl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ol(e){return e.h?1:e.g?e.g.size:0}function al(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ll(e,t){e.g?e.g.add(t):e.h=t}function cl(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ul(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ds(e.i)}rl.prototype.cancel=function(){if(this.i=ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var hl,dl=class{stringify(e){return xs.JSON.stringify(e,void 0)}parse(e){return xs.JSON.parse(e,void 0)}};function fl(){this.g=new dl}function pl(e,t,n){const r=n||"";try{Da(e,(function(e,n){let i=e;_s(e)&&(i=Ao(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ml(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function gl(e){this.l=e.fc||null,this.j=e.ob||!1}function yl(e,t){Io.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=vl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}As(gl,ca),gl.prototype.g=function(){return new yl(this.l,this.j)},gl.prototype.i=(hl={},function(){return hl}),As(yl,Io);var vl=0;function bl(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function wl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,xl(e)}function xl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ys=yl.prototype).open=function(e,t){if(this.readyState!=vl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,xl(this)},ys.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||xs).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ys.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wl(this)),this.readyState=vl},ys.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,xl(this)),this.g&&(this.readyState=3,xl(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof xs.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bl(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ys.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?wl(this):xl(this),3==this.readyState&&bl(this)}},ys.Za=function(e){this.g&&(this.response=this.responseText=e,wl(this))},ys.Ya=function(e){this.g&&(this.response=e,wl(this))},ys.ka=function(){this.g&&wl(this)},ys.setRequestHeader=function(e,t){this.v.append(e,t)},ys.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ys.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var El=xs.JSON.parse;function _l(e){Io.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=kl,this.L=this.M=!1}As(_l,Io);var kl="",Sl=/^https?$/i,Tl=["POST","PUT"];function Il(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Cl(e),Al(e)}function Cl(e){e.F||(e.F=!0,Co(e,"complete"),Co(e,"error"))}function Nl(e){if(e.h&&"undefined"!=typeof ws&&(!e.C[1]||4!=Rl(e)||2!=e.da()))if(e.v&&4==Rl(e))$o(e.La,0,e);else if(Co(e,"readystatechange"),4==Rl(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Oa)[1]||null;!i&&xs.self&&xs.self.location&&(i=xs.self.location.protocol.slice(0,-1)),r=!Sl.test(i?i.toLowerCase():"")}n=r}if(n)Co(e,"complete"),Co(e,"success");else{e.m=6;try{var s=2<Rl(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Cl(e)}}finally{Al(e)}}}function Al(e,t){if(e.g){Pl(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Co(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Pl(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(xs.clearTimeout(e.A),e.A=null)}function Rl(e){return e.g?e.g.readyState:0}function Dl(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case kl:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Fc){return null}}function Ol(e){let t="";return ao(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ll(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ol(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Va(e,t,n))}function jl(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ml(e){this.Ga=0,this.j=[],this.l=new Yo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=jl("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=jl("baseRetryDelayMs",5e3,e),this.hb=jl("retryDelaySeedMs",1e4,e),this.eb=jl("forwardChannelMaxRetries",2,e),this.xa=jl("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new rl(e&&e.concurrentRequestLimit),this.Ja=new fl,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Fl(e){if(Vl(e),3==e.H){var t=e.W++,n=ja(e.I);if(Va(n,"SID",e.K),Va(n,"RID",t),Va(n,"TYPE","terminate"),$l(e,n),(t=new ya(e,e.l,t)).L=2,t.v=za(ja(n)),n=!1,xs.navigator&&xs.navigator.sendBeacon)try{n=xs.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&xs.Image&&((new Image).src=t.v,n=!0),n||(t.g=tc(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Ia(t)}Zl(e)}function Ul(e){e.g&&(Kl(e),e.g.cancel(),e.g=null)}function Vl(e){Ul(e),e.u&&(xs.clearTimeout(e.u),e.u=null),Ql(e),e.i.cancel(),e.m&&("number"===typeof e.m&&xs.clearTimeout(e.m),e.m=null)}function zl(e){if(!sl(e.i)&&!e.m){e.m=!0;var t=e.Na;jo||Uo(),Mo||(jo(),Mo=!0),Fo.add(t,e),e.C=0}}function Bl(e,t){var n;n=t?t.m:e.W++;const r=ja(e.I);Va(r,"SID",e.K),Va(r,"RID",n),Va(r,"AID",e.V),$l(e,r),e.o&&e.s&&Ll(r,e.o,e.s),n=new ya(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=ql(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ll(e.i,n),Ea(n,r,t)}function $l(e,t){e.na&&ao(e.na,(function(e,n){Va(t,n,e)})),e.h&&Da({},(function(e,n){Va(t,n,e)}))}function ql(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Cs(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{pl(a,e,"req"+n+"_")}catch(Qc){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Hl(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;jo||Uo(),Mo||(jo(),Mo=!0),Fo.add(t,e),e.A=0}}function Wl(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=oa(Cs(e.Ma,e),Xl(e,e.A)),e.A++,!0)}function Kl(e){null!=e.B&&(xs.clearTimeout(e.B),e.B=null)}function Gl(e){e.g=new ya(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ja(e.wa);Va(t,"RID","rpc"),Va(t,"SID",e.K),Va(t,"AID",e.V),Va(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Va(t,"TO",e.qa),Va(t,"TYPE","xmlhttp"),$l(e,t),e.o&&e.s&&Ll(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=za(ja(t)),n.s=null,n.S=!0,_a(n,e)}function Ql(e){null!=e.v&&(xs.clearTimeout(e.v),e.v=null)}function Yl(e,t){var n=null;if(e.g==t){Ql(e),Kl(e),e.g=null;var r=2}else{if(!al(e.i,t))return;n=t.F,cl(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Co(r=ea(),new sa(r,n)),zl(e)}else Hl(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(ol(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=oa(Cs(e.Na,e,t),Xl(e,e.C)),e.C++,!0))}(e,t)||2==r&&Wl(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Jl(e,5);break;case 4:Jl(e,10);break;case 3:Jl(e,6);break;default:Jl(e,2)}}function Xl(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Jl(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Cs(e.pb,e);n||(n=new La("//www.google.com/images/cleardot.gif"),xs.location&&"http"==xs.location.protocol||Ma(n,"https"),za(n)),function(e,t){const n=new Yo;if(xs.Image){const r=new Image;r.onload=Ns(ml,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ns(ml,n,r,"TestLoadImage: error",!1,t),r.onabort=Ns(ml,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ns(ml,n,r,"TestLoadImage: timeout",!1,t),xs.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ia(2);e.H=0,e.h&&e.h.za(t),Zl(e),Vl(e)}function Zl(e){if(e.H=0,e.ma=[],e.h){const t=ul(e.i);0==t.length&&0==e.j.length||(Os(e.ma,t),Os(e.ma,e.j),e.i.i.length=0,Ds(e.j),e.j.length=0),e.h.ya()}}function ec(e,t,n){var r=n instanceof La?ja(n):new La(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Fa(r,r.m);else{var i=xs.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new La(null);r&&Ma(s,r),t&&(s.g=t),i&&Fa(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Va(r,n,t),Va(r,"VER",e.ra),$l(e,r),r}function tc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new _l(new gl({ob:!0})):new _l(e.va)).Oa(e.J),t}function nc(){}function rc(){if(qs&&!(10<=Number(eo)))throw Error("Environmental error: no available transport.")}function ic(e,t){Io.call(this),this.g=new Ml(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ms(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ms(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ac(this)}function sc(e){pa.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function oc(){ma.call(this),this.status=1}function ac(e){this.g=e}function lc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function cc(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function uc(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(ys=_l.prototype).Oa=function(e){this.M=e},ys.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():da.g(),this.C=this.u?ua(this.u):ua(da),this.g.onreadystatechange=Cs(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Il(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=xs.FormData&&e instanceof xs.FormData,!(0<=Rs(Tl,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Pl(this),0<this.B&&((this.L=function(e){return qs&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Cs(this.ua,this)):this.A=$o(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Il(this,s)}},ys.ua=function(){"undefined"!=typeof ws&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Co(this,"timeout"),this.abort(8))},ys.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Co(this,"complete"),Co(this,"abort"),Al(this))},ys.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Al(this,!0)),_l.$.N.call(this)},ys.La=function(){this.s||(this.G||this.v||this.l?Nl(this):this.kb())},ys.kb=function(){Nl(this)},ys.isActive=function(){return!!this.g},ys.da=function(){try{return 2<Rl(this)?this.g.status:-1}catch(hl){return-1}},ys.ja=function(){try{return this.g?this.g.responseText:""}catch(hl){return""}},ys.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),El(t)}},ys.Ia=function(){return this.m},ys.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(ys=Ml.prototype).ra=8,ys.H=1,ys.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ya(this,this.l,e);let s=this.s;if(this.U&&(s?(s=lo(s),uo(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ql(this,i,t),Va(n=ja(this.I),"RID",e),Va(n,"CVER",22),this.F&&Va(n,"X-HTTP-Session-Id",this.F),$l(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ol(s)))+"&"+t:this.o&&Ll(n,this.o,s)),ll(this.i,i),this.bb&&Va(n,"TYPE","init"),this.P?(Va(n,"$req",t),Va(n,"SID","null"),i.aa=!0,Ea(i,n,null)):Ea(i,n,t),this.H=2}}else 3==this.H&&(e?Bl(this,e):0==this.j.length||sl(this.i)||Bl(this))},ys.Ma=function(){if(this.u=null,Gl(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=oa(Cs(this.jb,this),e)}},ys.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ia(10),Ul(this),Gl(this))},ys.ib=function(){null!=this.v&&(this.v=null,Ul(this),Wl(this),ia(19))},ys.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ia(2)):(this.l.info("Failed to ping google.com"),ia(1))},ys.isActive=function(){return!!this.h&&this.h.isActive(this)},(ys=nc.prototype).Ba=function(){},ys.Aa=function(){},ys.za=function(){},ys.ya=function(){},ys.isActive=function(){return!0},ys.Va=function(){},rc.prototype.g=function(e,t){return new ic(e,t)},As(ic,Io),ic.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ia(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ec(e,null,e.Y),zl(e)},ic.prototype.close=function(){Fl(this.g)},ic.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ao(e),e=n);t.j.push(new nl(t.fb++,e)),3==t.H&&zl(t)},ic.prototype.N=function(){this.g.h=null,delete this.j,Fl(this.g),delete this.g,ic.$.N.call(this)},As(sc,pa),As(oc,ma),As(ac,nc),ac.prototype.Ba=function(){Co(this.g,"a")},ac.prototype.Aa=function(e){Co(this.g,new sc(e))},ac.prototype.za=function(e){Co(this.g,new oc)},ac.prototype.ya=function(){Co(this.g,"b")},As(lc,(function(){this.blockSize=-1})),lc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},lc.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)cc(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){cc(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){cc(this,r),i=0;break}}this.h=i,this.i+=t},lc.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var hc={};function dc(e){return-128<=e&&128>e?function(e,t){var n=hc;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new uc([0|e],0>e?-1:0)})):new uc([0|e],0>e?-1:0)}function fc(e){if(isNaN(e)||!isFinite(e))return mc;if(0>e)return wc(fc(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=pc;return new uc(t,0)}var pc=4294967296,mc=dc(0),gc=dc(1),yc=dc(16777216);function vc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function bc(e){return-1==e.h}function wc(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new uc(n,~e.h).add(gc)}function xc(e,t){return e.add(wc(t))}function Ec(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function _c(e,t){this.g=e,this.h=t}function kc(e,t){if(vc(t))throw Error("division by zero");if(vc(e))return new _c(mc,mc);if(bc(e))return t=kc(wc(e),t),new _c(wc(t.g),wc(t.h));if(bc(t))return t=kc(e,wc(t)),new _c(wc(t.g),t.h);if(30<e.g.length){if(bc(e)||bc(t))throw Error("slowDivide_ only works with positive integers.");for(var n=gc,r=t;0>=r.X(e);)n=Sc(n),r=Sc(r);var i=Tc(n,1),s=Tc(r,1);for(r=Tc(r,2),n=Tc(n,2);!vc(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Tc(r,1),n=Tc(n,1)}return t=xc(e,i.R(t)),new _c(i,t)}for(i=mc;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=fc(n)).R(t);bc(o)||0<o.X(e);)o=(s=fc(n-=r)).R(t);vc(s)&&(s=gc),i=i.add(s),e=xc(e,o)}return new _c(i,e)}function Sc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new uc(n,e.h)}function Tc(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new uc(i,e.h)}(ys=uc.prototype).ea=function(){if(bc(this))return-wc(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:pc+r)*t,t*=pc}return e},ys.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(vc(this))return"0";if(bc(this))return"-"+wc(this).toString(e);for(var t=fc(Math.pow(e,6)),n=this,r="";;){var i=kc(n,t).g,s=((0<(n=xc(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(vc(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ys.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ys.X=function(e){return bc(e=xc(this,e))?-1:vc(e)?0:1},ys.abs=function(){return bc(this)?wc(this):this},ys.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new uc(n,-2147483648&n[n.length-1]?-1:0)},ys.R=function(e){if(vc(this)||vc(e))return mc;if(bc(this))return bc(e)?wc(this).R(wc(e)):wc(wc(this).R(e));if(bc(e))return wc(this.R(wc(e)));if(0>this.X(yc)&&0>e.X(yc))return fc(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Ec(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Ec(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ec(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ec(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new uc(n,0)},ys.gb=function(e){return kc(this,e).h},ys.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new uc(n,this.h&e.h)},ys.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new uc(n,this.h|e.h)},ys.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new uc(n,this.h^e.h)},rc.prototype.createWebChannel=rc.prototype.g,ic.prototype.send=ic.prototype.u,ic.prototype.open=ic.prototype.m,ic.prototype.close=ic.prototype.close,aa.NO_ERROR=0,aa.TIMEOUT=8,aa.HTTP_ERROR=6,la.COMPLETE="complete",ha.EventType=fa,fa.OPEN="a",fa.CLOSE="b",fa.ERROR="c",fa.MESSAGE="d",Io.prototype.listen=Io.prototype.O,_l.prototype.listenOnce=_l.prototype.P,_l.prototype.getLastError=_l.prototype.Sa,_l.prototype.getLastErrorCode=_l.prototype.Ia,_l.prototype.getStatus=_l.prototype.da,_l.prototype.getResponseJson=_l.prototype.Wa,_l.prototype.getResponseText=_l.prototype.ja,_l.prototype.send=_l.prototype.ha,_l.prototype.setWithCredentials=_l.prototype.Oa,lc.prototype.digest=lc.prototype.l,lc.prototype.reset=lc.prototype.reset,lc.prototype.update=lc.prototype.j,uc.prototype.add=uc.prototype.add,uc.prototype.multiply=uc.prototype.R,uc.prototype.modulo=uc.prototype.gb,uc.prototype.compare=uc.prototype.X,uc.prototype.toNumber=uc.prototype.ea,uc.prototype.toString=uc.prototype.toString,uc.prototype.getBits=uc.prototype.D,uc.fromNumber=fc,uc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return wc(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=fc(Math.pow(n,8)),i=mc,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=fc(Math.pow(n,o)),i=i.R(o).add(fc(a))):i=(i=i.R(r)).add(fc(a))}return i};var Ic=bs.createWebChannelTransport=function(){return new rc},Cc=bs.getStatEventTarget=function(){return ea()},Nc=bs.ErrorCode=aa,Ac=bs.EventType=la,Pc=bs.Event=Jo,Rc=bs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Dc=bs.FetchXmlHttpFactory=gl,Oc=bs.WebChannel=ha,Lc=bs.XhrIo=_l,jc=bs.Md5=lc,Mc=bs.Integer=uc;const Fc="@firebase/firestore";class Uc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Uc.UNAUTHENTICATED=new Uc(null),Uc.GOOGLE_CREDENTIALS=new Uc("google-credentials-uid"),Uc.FIRST_PARTY=new Uc("first-party-uid"),Uc.MOCK_USER=new Uc("mock-user");let Vc="9.23.0";const zc=new Je("@firebase/firestore");function Bc(){return zc.logLevel}function $c(e){if(zc.logLevel<=Ke.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Wc);zc.debug(`Firestore (${Vc}): ${e}`,...i)}}function qc(e){if(zc.logLevel<=Ke.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Wc);zc.error(`Firestore (${Vc}): ${e}`,...i)}}function Hc(e){if(zc.logLevel<=Ke.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Wc);zc.warn(`Firestore (${Vc}): ${e}`,...i)}}function Wc(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Kc(){const e=`FIRESTORE (${Vc}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw qc(e),new Error(e)}function Gc(e,t){e||Kc()}function Qc(e,t){return e}const Yc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xc extends Pe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Zc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Uc.UNAUTHENTICATED)))}shutdown(){}}class tu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class nu{constructor(e){this.t=e,this.currentUser=Uc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Jc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jc,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{$c("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):($c("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jc)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?($c("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Gc("string"==typeof t.accessToken),new Zc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Gc(null===e||"string"==typeof e),new Uc(e)}}class ru{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Uc.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class iu{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new ru(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Uc.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class su{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ou{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&$c("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,$c("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{$c("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):$c("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Gc("string"==typeof e.token),this.T=e.token,new su(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function au(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class lu{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=au(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function cu(e,t){return e<t?-1:e>t?1:0}function uu(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class hu{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xc(Yc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xc(Yc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xc(Yc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xc(Yc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hu.fromMillis(Date.now())}static fromDate(e){return hu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new hu(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cu(this.nanoseconds,e.nanoseconds):cu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class du{constructor(e){this.timestamp=e}static fromTimestamp(e){return new du(e)}static min(){return new du(new hu(0,0))}static max(){return new du(new hu(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class fu{constructor(e,t,n){void 0===t?t=0:t>e.length&&Kc(),void 0===n?n=e.length-t:n>e.length-t&&Kc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===fu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fu?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pu extends fu{construct(e,t,n){return new pu(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Xc(Yc.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new pu(e)}static emptyPath(){return new pu([])}}const mu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gu extends fu{construct(e,t,n){return new gu(e,t,n)}static isValidIdentifier(e){return mu.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gu.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gu(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Xc(Yc.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xc(Yc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xc(Yc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Xc(Yc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gu(t)}static emptyPath(){return new gu([])}}class yu{constructor(e){this.path=e}static fromPath(e){return new yu(pu.fromString(e))}static fromName(e){return new yu(pu.fromString(e).popFirst(5))}static empty(){return new yu(pu.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pu.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pu.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yu(new pu(e.slice()))}}class vu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}vu.UNKNOWN_ID=-1;function bu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=du.fromTimestamp(1e9===r?new hu(n+1,0):new hu(n,r));return new xu(i,yu.empty(),t)}function wu(e){return new xu(e.readTime,e.key,-1)}class xu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new xu(du.min(),yu.empty(),-1)}static max(){return new xu(du.max(),yu.empty(),-1)}}function Eu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=yu.comparator(e.documentKey,t.documentKey),0!==n?n:cu(e.largestBatchId,t.largestBatchId))}const _u="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ku{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Su(e){if(e.code!==Yc.FAILED_PRECONDITION||e.message!==_u)throw e;$c("LocalStore","Unexpectedly lost primary lease")}class Tu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Kc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Tu(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Tu?t:Tu.resolve(t)}catch(e){return Tu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Tu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Tu.reject(t)}static resolve(e){return new Tu(((t,n)=>{t(e)}))}static reject(e){return new Tu(((t,n)=>{n(e)}))}static waitFor(e){return new Tu(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Tu.resolve(!1);for(const n of e)t=t.next((e=>e?Tu.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Tu(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Tu(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Iu(e){return"IndexedDbTransactionError"===e.name}class Cu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Nu(e){return null==e}function Au(e){return 0===e&&1/e==-1/0}function Pu(e){return"number"==typeof e&&Number.isInteger(e)&&!Au(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Cu.ct=-1;const Ru=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Du=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ou=Du;function Lu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ju(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Mu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Fu{constructor(e,t){this.comparator=e,this.root=t||Vu.EMPTY}insert(e,t){return new Fu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vu.BLACK,null,null))}remove(e){return new Fu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}}class Uu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Vu.RED,this.left=null!=r?r:Vu.EMPTY,this.right=null!=i?i:Vu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Vu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Vu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Kc();if(this.right.isRed())throw Kc();const e=this.left.check();if(e!==this.right.check())throw Kc();return e+(this.isRed()?0:1)}}Vu.EMPTY=null,Vu.RED=!0,Vu.BLACK=!1,Vu.EMPTY=new class{constructor(){this.size=0}get key(){throw Kc()}get value(){throw Kc()}get color(){throw Kc()}get left(){throw Kc()}get right(){throw Kc()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Vu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zu{constructor(e){this.comparator=e,this.data=new Fu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bu(this.data.getIterator())}getIteratorFrom(e){return new Bu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof zu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new zu(this.comparator);return t.data=e,t}}class Bu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $u{constructor(e){this.fields=e,e.sort(gu.comparator)}static empty(){return new $u([])}unionWith(e){let t=new zu(gu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new $u(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uu(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class qu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new qu("Invalid base64 string: "+e):e}}(e);return new Hu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Hu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hu.EMPTY_BYTE_STRING=new Hu("");const Wu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ku(e){if(Gc(!!e),"string"==typeof e){let t=0;const n=Wu.exec(e);if(Gc(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Gu(e.seconds),nanos:Gu(e.nanos)}}function Gu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Qu(e){return"string"==typeof e?Hu.fromBase64String(e):Hu.fromUint8Array(e)}function Yu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xu(e){const t=e.mapValue.fields.__previous_value__;return Yu(t)?Xu(t):t}function Ju(e){const t=Ku(e.mapValue.fields.__local_write_time__.timestampValue);return new hu(t.seconds,t.nanos)}class Zu{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class eh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new eh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof eh&&e.projectId===this.projectId&&e.database===this.database}}const th={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function nh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Yu(e)?4:gh(e)?9007199254740991:10:Kc()}function rh(e,t){if(e===t)return!0;const n=nh(e);if(n!==nh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ju(e).isEqual(Ju(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ku(e.timestampValue),r=Ku(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Qu(e.bytesValue).isEqual(Qu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Gu(e.geoPointValue.latitude)===Gu(t.geoPointValue.latitude)&&Gu(e.geoPointValue.longitude)===Gu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Gu(e.integerValue)===Gu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Gu(e.doubleValue),r=Gu(t.doubleValue);return n===r?Au(n)===Au(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return uu(e.arrayValue.values||[],t.arrayValue.values||[],rh);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Lu(n)!==Lu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!rh(n[i],r[i])))return!1;return!0}(e,t);default:return Kc()}}function ih(e,t){return void 0!==(e.values||[]).find((e=>rh(e,t)))}function sh(e,t){if(e===t)return 0;const n=nh(e),r=nh(t);if(n!==r)return cu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Gu(e.integerValue||e.doubleValue),r=Gu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return oh(e.timestampValue,t.timestampValue);case 4:return oh(Ju(e),Ju(t));case 5:return cu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Qu(e),r=Qu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=cu(n[i],r[i]);if(0!==e)return e}return cu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=cu(Gu(e.latitude),Gu(t.latitude));return 0!==n?n:cu(Gu(e.longitude),Gu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=sh(n[i],r[i]);if(e)return e}return cu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===th.mapValue&&t===th.mapValue)return 0;if(e===th.mapValue)return 1;if(t===th.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=cu(r[o],s[o]);if(0!==e)return e;const t=sh(n[r[o]],i[s[o]]);if(0!==t)return t}return cu(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Kc()}}function oh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return cu(e,t);const n=Ku(e),r=Ku(t),i=cu(n.seconds,r.seconds);return 0!==i?i:cu(n.nanos,r.nanos)}function ah(e){return lh(e)}function lh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ku(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Qu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,yu.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=lh(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${lh(e.fields[i])}`;return n+"}"}(e.mapValue):Kc();var t,n}function ch(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function uh(e){return!!e&&"integerValue"in e}function hh(e){return!!e&&"arrayValue"in e}function dh(e){return!!e&&"nullValue"in e}function fh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ph(e){return!!e&&"mapValue"in e}function mh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ju(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=mh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=mh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function gh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class yh{constructor(e){this.value=e}static empty(){return new yh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ph(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mh(t)}setAll(e){let t=gu.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=mh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ph(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ph(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ju(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new yh(mh(this.value))}}function vh(e){const t=[];return ju(e.fields,((e,n)=>{const r=new gu([e]);if(ph(n)){const e=vh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new $u(t)}class bh{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new bh(e,0,du.min(),du.min(),du.min(),yh.empty(),0)}static newFoundDocument(e,t,n,r){return new bh(e,1,t,du.min(),n,r,0)}static newNoDocument(e,t){return new bh(e,2,t,du.min(),du.min(),yh.empty(),0)}static newUnknownDocument(e,t){return new bh(e,3,t,du.min(),du.min(),yh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(du.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=du.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wh{constructor(e,t){this.position=e,this.inclusive=t}}function xh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?yu.comparator(yu.fromName(o.referenceValue),n.key):sh(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Eh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!rh(e.position[n],t.position[n]))return!1;return!0}class _h{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function kh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Sh{}class Th extends Sh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Oh(e,t,n):"array-contains"===t?new Fh(e,n):"in"===t?new Uh(e,n):"not-in"===t?new Vh(e,n):"array-contains-any"===t?new zh(e,n):new Th(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Lh(e,n):new jh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(sh(t,this.value)):null!==t&&nh(this.value)===nh(t)&&this.matchesComparison(sh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kc()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ih extends Sh{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Ih(e,t)}matches(e){return Ch(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Ch(e){return"and"===e.op}function Nh(e){return Ah(e)&&Ch(e)}function Ah(e){for(const t of e.filters)if(t instanceof Ih)return!1;return!0}function Ph(e){if(e instanceof Th)return e.field.canonicalString()+e.op.toString()+ah(e.value);if(Nh(e))return e.filters.map((e=>Ph(e))).join(",");{const t=e.filters.map((e=>Ph(e))).join(",");return`${e.op}(${t})`}}function Rh(e,t){return e instanceof Th?function(e,t){return t instanceof Th&&e.op===t.op&&e.field.isEqual(t.field)&&rh(e.value,t.value)}(e,t):e instanceof Ih?function(e,t){return t instanceof Ih&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Rh(n,t.filters[r])),!0)}(e,t):void Kc()}function Dh(e){return e instanceof Th?function(e){return`${e.field.canonicalString()} ${e.op} ${ah(e.value)}`}(e):e instanceof Ih?function(e){return e.op.toString()+" {"+e.getFilters().map(Dh).join(" ,")+"}"}(e):"Filter"}class Oh extends Th{constructor(e,t,n){super(e,t,n),this.key=yu.fromName(n.referenceValue)}matches(e){const t=yu.comparator(e.key,this.key);return this.matchesComparison(t)}}class Lh extends Th{constructor(e,t){super(e,"in",t),this.keys=Mh("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jh extends Th{constructor(e,t){super(e,"not-in",t),this.keys=Mh("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Mh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>yu.fromName(e.referenceValue)))}class Fh extends Th{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hh(t)&&ih(t.arrayValue,this.value)}}class Uh extends Th{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ih(this.value.arrayValue,t)}}class Vh extends Th{constructor(e,t){super(e,"not-in",t)}matches(e){if(ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ih(this.value.arrayValue,t)}}class zh extends Th{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>ih(this.value.arrayValue,e)))}}class Bh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function $h(e){return new Bh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function qh(e){const t=Qc(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ph(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Nu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>ah(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>ah(e))).join(",")),t.dt=e}return t.dt}function Hh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!kh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Rh(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Eh(e.startAt,t.startAt)&&Eh(e.endAt,t.endAt)}function Wh(e){return yu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Kh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Gh(e,t,n,r,i,s,o,a){return new Kh(e,t,n,r,i,s,o,a)}function Qh(e){return new Kh(e)}function Yh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Xh(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Jh(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Zh(e){return null!==e.collectionGroup}function ed(e){const t=Qc(e);if(null===t.wt){t.wt=[];const e=Jh(t),n=Xh(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new _h(e)),t.wt.push(new _h(gu.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new _h(gu.keyField(),e))}}}return t.wt}function td(e){const t=Qc(e);if(!t._t)if("F"===t.limitType)t._t=$h(t.path,t.collectionGroup,ed(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of ed(t)){const t="desc"===i.dir?"asc":"desc";e.push(new _h(i.field,t))}const n=t.endAt?new wh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wh(t.startAt.position,t.startAt.inclusive):null;t._t=$h(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function nd(e,t){t.getFirstInequalityField(),Jh(e);const n=e.filters.concat([t]);return new Kh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function rd(e,t,n){return new Kh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function id(e,t){return Hh(td(e),td(t))&&e.limitType===t.limitType}function sd(e){return`${qh(td(e))}|lt:${e.limitType}`}function od(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Dh(e))).join(", ")}]`),Nu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>ah(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>ah(e))).join(",")),`Target(${t})`}(td(e))}; limitType=${e.limitType})`}function ad(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):yu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ed(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=xh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ed(e),t))&&!(e.endAt&&!function(e,t,n){const r=xh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ed(e),t))}(e,t)}function ld(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function cd(e){return(t,n)=>{let r=!1;for(const i of ed(e)){const e=ud(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ud(e,t,n){const r=e.field.isKeyField()?yu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?sh(r,i):Kc()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Kc()}}class hd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ju(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Mu(this.inner)}size(){return this.innerSize}}const dd=new Fu(yu.comparator);function fd(){return dd}const pd=new Fu(yu.comparator);function md(){let e=pd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function gd(e){let t=pd;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function yd(){return bd()}function vd(){return bd()}function bd(){return new hd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const wd=new Fu(yu.comparator),xd=new zu(yu.comparator);function Ed(){let e=xd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const _d=new zu(cu);function kd(){return _d}function Sd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(t)?"-0":t}}function Td(e){return{integerValue:""+e}}function Id(e,t){return Pu(t)?Td(t):Sd(e,t)}class Cd{constructor(){this._=void 0}}function Nd(e,t,n){return e instanceof Rd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Yu(t)&&(t=Xu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Dd?Od(e,t):e instanceof Ld?jd(e,t):function(e,t){const n=Pd(e,t),r=Fd(n)+Fd(e.gt);return uh(n)&&uh(e.gt)?Td(r):Sd(e.serializer,r)}(e,t)}function Ad(e,t,n){return e instanceof Dd?Od(e,t):e instanceof Ld?jd(e,t):n}function Pd(e,t){return e instanceof Md?uh(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Rd extends Cd{}class Dd extends Cd{constructor(e){super(),this.elements=e}}function Od(e,t){const n=Ud(t);for(const r of e.elements)n.some((e=>rh(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Ld extends Cd{constructor(e){super(),this.elements=e}}function jd(e,t){let n=Ud(t);for(const r of e.elements)n=n.filter((e=>!rh(e,r)));return{arrayValue:{values:n}}}class Md extends Cd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Fd(e){return Gu(e.integerValue||e.doubleValue)}function Ud(e){return hh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Vd{constructor(e,t){this.field=e,this.transform=t}}class zd{constructor(e,t){this.version=e,this.transformResults=t}}class Bd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bd}static exists(e){return new Bd(void 0,e)}static updateTime(e){return new Bd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $d(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class qd{}function Hd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new tf(e.key,Bd.none()):new Yd(e.key,e.data,Bd.none());{const n=e.data,r=yh.empty();let i=new zu(gu.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Xd(e.key,r,new $u(i.toArray()),Bd.none())}}function Wd(e,t,n){e instanceof Yd?function(e,t,n){const r=e.value.clone(),i=Zd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xd?function(e,t,n){if(!$d(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Zd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Jd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Kd(e,t,n,r){return e instanceof Yd?function(e,t,n,r){if(!$d(e.precondition,t))return n;const i=e.value.clone(),s=ef(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xd?function(e,t,n,r){if(!$d(e.precondition,t))return n;const i=ef(e.fieldTransforms,r,t),s=t.data;return s.setAll(Jd(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return $d(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Gd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Pd(r.transform,e||null);null!=i&&(null===n&&(n=yh.empty()),n.set(r.field,i))}return n||null}function Qd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&uu(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Dd&&t instanceof Dd||e instanceof Ld&&t instanceof Ld?uu(e.elements,t.elements,rh):e instanceof Md&&t instanceof Md?rh(e.gt,t.gt):e instanceof Rd&&t instanceof Rd}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Yd extends qd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xd extends qd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Jd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Zd(e,t,n){const r=new Map;Gc(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ad(o,a,n[i]))}return r}function ef(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Nd(e,s,t))}return r}class tf extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nf extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Wd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Kd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Kd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=vd();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Hd(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(du.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ed())}isEqual(e){return this.batchId===e.batchId&&uu(this.mutations,e.mutations,((e,t)=>Qd(e,t)))&&uu(this.baseMutations,e.baseMutations,((e,t)=>Qd(e,t)))}}class sf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Gc(e.mutations.length===n.length);let r=wd;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new sf(e,t,n,r)}}class of{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class af{constructor(e,t){this.count=e,this.unchangedNames=t}}var lf,cf;function uf(e){switch(e){default:return Kc();case Yc.CANCELLED:case Yc.UNKNOWN:case Yc.DEADLINE_EXCEEDED:case Yc.RESOURCE_EXHAUSTED:case Yc.INTERNAL:case Yc.UNAVAILABLE:case Yc.UNAUTHENTICATED:return!1;case Yc.INVALID_ARGUMENT:case Yc.NOT_FOUND:case Yc.ALREADY_EXISTS:case Yc.PERMISSION_DENIED:case Yc.FAILED_PRECONDITION:case Yc.ABORTED:case Yc.OUT_OF_RANGE:case Yc.UNIMPLEMENTED:case Yc.DATA_LOSS:return!0}}function hf(e){if(void 0===e)return qc("GRPC error has no .code"),Yc.UNKNOWN;switch(e){case lf.OK:return Yc.OK;case lf.CANCELLED:return Yc.CANCELLED;case lf.UNKNOWN:return Yc.UNKNOWN;case lf.DEADLINE_EXCEEDED:return Yc.DEADLINE_EXCEEDED;case lf.RESOURCE_EXHAUSTED:return Yc.RESOURCE_EXHAUSTED;case lf.INTERNAL:return Yc.INTERNAL;case lf.UNAVAILABLE:return Yc.UNAVAILABLE;case lf.UNAUTHENTICATED:return Yc.UNAUTHENTICATED;case lf.INVALID_ARGUMENT:return Yc.INVALID_ARGUMENT;case lf.NOT_FOUND:return Yc.NOT_FOUND;case lf.ALREADY_EXISTS:return Yc.ALREADY_EXISTS;case lf.PERMISSION_DENIED:return Yc.PERMISSION_DENIED;case lf.FAILED_PRECONDITION:return Yc.FAILED_PRECONDITION;case lf.ABORTED:return Yc.ABORTED;case lf.OUT_OF_RANGE:return Yc.OUT_OF_RANGE;case lf.UNIMPLEMENTED:return Yc.UNIMPLEMENTED;case lf.DATA_LOSS:return Yc.DATA_LOSS;default:return Kc()}}(cf=lf||(lf={}))[cf.OK=0]="OK",cf[cf.CANCELLED=1]="CANCELLED",cf[cf.UNKNOWN=2]="UNKNOWN",cf[cf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cf[cf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cf[cf.NOT_FOUND=5]="NOT_FOUND",cf[cf.ALREADY_EXISTS=6]="ALREADY_EXISTS",cf[cf.PERMISSION_DENIED=7]="PERMISSION_DENIED",cf[cf.UNAUTHENTICATED=16]="UNAUTHENTICATED",cf[cf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cf[cf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cf[cf.ABORTED=10]="ABORTED",cf[cf.OUT_OF_RANGE=11]="OUT_OF_RANGE",cf[cf.UNIMPLEMENTED=12]="UNIMPLEMENTED",cf[cf.INTERNAL=13]="INTERNAL",cf[cf.UNAVAILABLE=14]="UNAVAILABLE",cf[cf.DATA_LOSS=15]="DATA_LOSS";class df{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ff}static getOrCreateInstance(){return null===ff&&(ff=new df),ff}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let ff=null;function pf(){return new TextEncoder}const mf=new Mc([4294967295,4294967295],0);function gf(e){const t=pf().encode(e),n=new jc;return n.update(t),new Uint8Array(n.digest())}function yf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Mc([n,r],0),new Mc([i,s],0)]}class vf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new bf(`Invalid padding: ${t}`);if(n<0)throw new bf(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new bf(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new bf(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Mc.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Mc.fromNumber(n)));return 1===r.compare(mf)&&(r=new Mc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=gf(e),[n,r]=yf(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new vf(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=gf(e),[n,r]=yf(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class bf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wf{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,xf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new wf(du.min(),r,new Fu(cu),fd(),Ed())}}class xf{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xf(n,t,Ed(),Ed(),Ed())}}class Ef{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class _f{constructor(e,t){this.targetId=e,this.Vt=t}}class kf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Sf{constructor(){this.St=0,this.Dt=Cf(),this.Ct=Hu.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Ed(),t=Ed(),n=Ed();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Kc()}})),new xf(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Cf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Tf{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=fd(),this.zt=If(),this.Wt=new Fu(cu)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Kc()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(Wh(s))if(0===r){const e=new yu(s.path);this.Yt(n,e,bh.newNoDocument(e,du.min()))}else Gc(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=df.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=Qu(i).toUint8Array()}catch(e){if(e instanceof qu)return Hc("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new vf(a,s,o)}catch(e){return Hc(e instanceof bf?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&Wh(i.target)){const t=new yu(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,bh.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=Ed();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new wf(e,t,this.Wt,this.jt,n);return this.jt=fd(),this.zt=If(),this.Wt=new Fu(cu),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Sf,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new zu(cu),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||$c("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Sf),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function If(){return new Fu(yu.comparator)}function Cf(){return new Fu(yu.comparator)}const Nf={asc:"ASCENDING",desc:"DESCENDING"},Af={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pf={and:"AND",or:"OR"};class Rf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Df(e,t){return e.useProto3Json||Nu(t)?t:{value:t}}function Of(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Lf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function jf(e,t){return Of(e,t.toTimestamp())}function Mf(e){return Gc(!!e),du.fromTimestamp(function(e){const t=Ku(e);return new hu(t.seconds,t.nanos)}(e))}function Ff(e,t){return function(e){return new pu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Uf(e){const t=pu.fromString(e);return Gc(sp(t)),t}function Vf(e,t){return Ff(e.databaseId,t.path)}function zf(e,t){const n=Uf(t);if(n.get(1)!==e.databaseId.projectId)throw new Xc(Yc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xc(Yc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new yu(Hf(n))}function Bf(e,t){return Ff(e.databaseId,t)}function $f(e){const t=Uf(e);return 4===t.length?pu.emptyPath():Hf(t)}function qf(e){return new pu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Hf(e){return Gc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wf(e,t,n){return{name:Vf(e,t),fields:n.value.mapValue.fields}}function Kf(e,t){let n;if(t instanceof Yd)n={update:Wf(e,t.key,t.value)};else if(t instanceof tf)n={delete:Vf(e,t.key)};else if(t instanceof Xd)n={update:Wf(e,t.key,t.data),updateMask:ip(t.fieldMask)};else{if(!(t instanceof nf))return Kc();n={verify:Vf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Rd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Dd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ld)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Md)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Kc()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:jf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Kc()}(e,t.precondition)),n}function Gf(e,t){return{documents:[Bf(e,t.path)]}}function Qf(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Bf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Bf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return rp(Ih.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:tp(e.field),direction:Jf(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Df(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Yf(e){let t=$f(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Gc(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Xf(e);return t instanceof Ih&&Nh(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new _h(np(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Nu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new wh(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new wh(n,t)}(n.endAt)),Gh(t,i,o,s,a,"F",l,c)}function Xf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=np(e.unaryFilter.field);return Th.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=np(e.unaryFilter.field);return Th.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=np(e.unaryFilter.field);return Th.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=np(e.unaryFilter.field);return Th.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Kc()}}(e):void 0!==e.fieldFilter?function(e){return Th.create(np(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kc()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ih.create(e.compositeFilter.filters.map((e=>Xf(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Kc()}}(e.compositeFilter.op))}(e):Kc()}function Jf(e){return Nf[e]}function Zf(e){return Af[e]}function ep(e){return Pf[e]}function tp(e){return{fieldPath:e.canonicalString()}}function np(e){return gu.fromServerFormat(e.fieldPath)}function rp(e){return e instanceof Th?function(e){if("=="===e.op){if(fh(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NAN"}};if(dh(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fh(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NOT_NAN"}};if(dh(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tp(e.field),op:Zf(e.op),value:e.value}}}(e):e instanceof Ih?function(e){const t=e.getFilters().map((e=>rp(e)));return 1===t.length?t[0]:{compositeFilter:{op:ep(e.op),filters:t}}}(e):Kc()}function ip(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function sp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class op{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:du.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:du.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Hu.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new op(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new op(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new op(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new op(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ap{constructor(e){this.fe=e}}function lp(e){const t=Yf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?rd(t,t.limit,"L"):t}class cp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Gu(e.integerValue));else if("doubleValue"in e){const n=Gu(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Au(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Qu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?gh(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Kc()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),yu.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}cp.Ve=new cp;class up{constructor(){this.rn=new hp}addToCollectionParentIndex(e,t){return this.rn.add(t),Tu.resolve()}getCollectionParents(e,t){return Tu.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Tu.resolve()}deleteFieldIndex(e,t){return Tu.resolve()}getDocumentsMatchingTarget(e,t){return Tu.resolve(null)}getIndexType(e,t){return Tu.resolve(0)}getFieldIndexes(e,t){return Tu.resolve([])}getNextCollectionGroupToUpdate(e){return Tu.resolve(null)}getMinOffset(e,t){return Tu.resolve(xu.min())}getMinOffsetFromCollectionGroup(e,t){return Tu.resolve(xu.min())}updateCollectionGroup(e,t,n){return Tu.resolve()}updateIndexEntries(e,t){return Tu.resolve()}}class hp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zu(pu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new zu(pu.comparator)).toArray()}}new Uint8Array(0);class dp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new dp(e,dp.DEFAULT_COLLECTION_PERCENTILE,dp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}dp.DEFAULT_COLLECTION_PERCENTILE=10,dp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dp.DEFAULT=new dp(41943040,dp.DEFAULT_COLLECTION_PERCENTILE,dp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dp.DISABLED=new dp(-1,0,0);class fp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new fp(0)}static Mn(){return new fp(-1)}}class pp{constructor(){this.changes=new hd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Tu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class gp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Kd(n.mutation,e,$u.empty(),hu.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ed()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ed();const r=yd();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=md();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=yd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ed())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=fd();const s=bd(),o=bd();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Xd)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Kd(o.mutation,t,o.mutation.getFieldMask(),hu.now())):s.set(t.key,$u.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new mp(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=bd();let r=new Fu(((e,t)=>e-t)),i=Ed();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||$u.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Ed()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=vd();l.forEach((e=>{if(!i.has(e)){const r=Hd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Tu.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return yu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Zh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Tu.resolve(yd());let o=-1,a=i;return s.next((t=>Tu.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Tu.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Ed()))).next((e=>({batchId:o,changes:gd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new yu(t)).next((e=>{let t=md();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=md();return this.indexManager.getCollectionParents(e,r).next((s=>Tu.forEach(s,(s=>{const o=function(e,t){return new Kh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,bh.newInvalidDocument(r)))}));let n=md();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Kd(s.mutation,i,$u.empty(),hu.now()),ad(t,i)&&(n=n.insert(e,i))})),n}))}}class yp{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Tu.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Mf(n.createTime)}),Tu.resolve()}getNamedQuery(e,t){return Tu.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:lp(e.bundledQuery),readTime:Mf(e.readTime)}}(t)),Tu.resolve()}}class vp{constructor(){this.overlays=new Fu(yu.comparator),this.ls=new Map}getOverlay(e,t){return Tu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=yd();return Tu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),Tu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),Tu.resolve()}getOverlaysForCollection(e,t,n){const r=yd(),i=t.length+1,s=new yu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Tu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Fu(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=yd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=yd(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Tu.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new of(t,n));let i=this.ls.get(t);void 0===i&&(i=Ed(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class bp{constructor(){this.fs=new zu(wp.ds),this.ws=new zu(wp._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new wp(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new wp(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new yu(new pu([])),n=new wp(t,e),r=new wp(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new yu(new pu([])),n=new wp(t,e),r=new wp(t,e+1);let i=Ed();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new wp(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class wp{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return yu.comparator(e.key,t.key)||cu(e.As,t.As)}static _s(e,t){return cu(e.As,t.As)||yu.comparator(e.key,t.key)}}class xp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new zu(wp.ds)}checkEmpty(e){return Tu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new rf(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new wp(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Tu.resolve(s)}lookupMutationBatch(e,t){return Tu.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return Tu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Tu.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Tu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new wp(t,0),r=new wp(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),Tu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new zu(cu);return t.forEach((e=>{const t=new wp(e,0),r=new wp(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),Tu.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;yu.isDocumentKey(i)||(i=i.child(""));const s=new wp(new yu(i),0);let o=new zu(cu);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),s),Tu.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Gc(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Tu.forEach(t.mutations,(r=>{const i=new wp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new wp(t,0),r=this.Rs.firstAfterOrEqual(n);return Tu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Tu.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ep{constructor(e){this.Ds=e,this.docs=new Fu(yu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Tu.resolve(n?n.document.mutableCopy():bh.newInvalidDocument(t))}getEntries(e,t){let n=fd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():bh.newInvalidDocument(e))})),Tu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=fd();const s=t.path,o=new yu(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Eu(wu(o),n)<=0||(r.has(o.key)||ad(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Tu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Kc()}Cs(e,t){return Tu.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new _p(this)}getSize(e){return Tu.resolve(this.size)}}class _p extends pp{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),Tu.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class kp{constructor(e){this.persistence=e,this.xs=new hd((e=>qh(e)),Hh),this.lastRemoteSnapshotVersion=du.min(),this.highestTargetId=0,this.Ns=0,this.ks=new bp,this.targetCount=0,this.Ms=fp.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),Tu.resolve()}getLastRemoteSnapshotVersion(e){return Tu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Tu.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Tu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Tu.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new fp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Tu.resolve()}updateTargetData(e,t){return this.Fn(t),Tu.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Tu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Tu.waitFor(i).next((()=>r))}getTargetCount(e){return Tu.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Tu.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Tu.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Tu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Tu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Tu.resolve(n)}containsKey(e,t){return Tu.resolve(this.ks.containsKey(t))}}class Sp{constructor(e,t){this.$s={},this.overlays={},this.Os=new Cu(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new kp(this),this.indexManager=new up,this.remoteDocumentCache=function(e){return new Ep(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new ap(t),this.qs=new yp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new xp(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){$c("MemoryPersistence","Starting transaction:",e);const r=new Tp(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return Tu.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class Tp extends ku{constructor(e){super(),this.currentSequenceNumber=e}}class Ip{constructor(e){this.persistence=e,this.Qs=new bp,this.js=null}static zs(e){return new Ip(e)}get Ws(){if(this.js)return this.js;throw Kc()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Tu.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Tu.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Tu.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tu.forEach(this.Ws,(n=>{const r=yu.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,du.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return Tu.or([()=>Tu.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Cp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Ed(),r=Ed();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Cp(e,t.fromCache,n,r)}}class Np{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(Yh(t))return Tu.resolve(null);let n=td(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=rd(t,null,"F"),n=td(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ed(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,rd(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,r){return Yh(t)||r.isEqual(du.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Bc()<=Ke.DEBUG&&$c("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),od(t)),this.Wi(e,s,t,bu(r,-1)))}))}ji(e,t){let n=new zu(cd(e));return t.forEach(((t,r)=>{ad(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Bc()<=Ke.DEBUG&&$c("QueryEngine","Using full collection scan to execute query:",od(t)),this.Ui.getDocumentsMatchingQuery(e,t,xu.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Ap{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Fu(cu),this.Yi=new hd((e=>qh(e)),Hh),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gp(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function Pp(e,t,n,r){return new Ap(e,t,n,r)}async function Rp(e,t){const n=Qc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Ed();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({er:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Dp(e){const t=Qc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function Op(e,t,n){let r=Ed(),i=Ed();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=fd();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(du.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):$c("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:r,sr:i}}))}function Lp(e,t){const n=Qc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function jp(e,t){const n=Qc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,Tu.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new op(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function Mp(e,t,n){const r=Qc(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Iu(e))throw e;$c("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Fp(e,t,n){const r=Qc(e);let i=du.min(),s=Ed();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Qc(e),i=r.Yi.get(n);return void 0!==i?Tu.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,td(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:du.min(),n?s:Ed()))).next((e=>(Up(r,ld(t),e),{documents:e,ir:s})))))}function Up(e,t,n){let r=e.Xi.get(t)||du.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}class Vp{constructor(){this.activeTargetIds=kd()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zp{constructor(){this.Hr=new Vp,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Vp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bp{Yr(e){}shutdown(){}}class $p{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){$c("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){$c("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qp=null;function Hp(){return null===qp?qp=268435456+Math.round(2147483648*Math.random()):qp++,"0x"+qp.toString(16)}const Wp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kp{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Gp="WebChannelConnection";class Qp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=Hp(),o=this.To(e,t);$c("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then((t=>($c("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Hc("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=Wp[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Hp();return new Promise(((s,o)=>{const a=new Lc;a.setWithCredentials(!0),a.listenOnce(Ac.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Nc.NO_ERROR:const t=a.getResponseJson();$c(Gp,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Nc.TIMEOUT:$c(Gp,`RPC '${e}' ${i} timed out`),o(new Xc(Yc.DEADLINE_EXCEEDED,"Request time out"));break;case Nc.HTTP_ERROR:const n=a.getStatus();if($c(Gp,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Yc).indexOf(t)>=0?t:Yc.UNKNOWN}(t.status);o(new Xc(e,t.message))}else o(new Xc(Yc.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Xc(Yc.UNAVAILABLE,"Connection failed."));break;default:Kc()}}finally{$c(Gp,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);$c(Gp,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=Hp(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ic(),o=Cc(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Dc({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");$c(Gp,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Kp({ro:t=>{d?$c(Gp,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||($c(Gp,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),$c(Gp,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Oc.EventType.OPEN,(()=>{d||$c(Gp,`RPC '${e}' stream ${r} transport opened.`)})),p(u,Oc.EventType.CLOSE,(()=>{d||(d=!0,$c(Gp,`RPC '${e}' stream ${r} transport closed`),f.wo())})),p(u,Oc.EventType.ERROR,(t=>{d||(d=!0,Hc(Gp,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new Xc(Yc.UNAVAILABLE,"The operation could not be completed")))})),p(u,Oc.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Gc(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){$c(Gp,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=lf[e];if(void 0!==t)return hf(t)}(t),i=o.message;void 0===n&&(n=Yc.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new Xc(n,i)),u.close()}else $c(Gp,`RPC '${e}' stream ${r} received:`,i),f._o(i)}})),p(o,Pc.STAT_EVENT,(t=>{t.stat===Rc.PROXY?$c(Gp,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Rc.NOPROXY&&$c(Gp,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function Yp(){return"undefined"!=typeof document?document:null}function Xp(e){return new Rf(e,!0)}class Jp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&$c("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Zp{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Jp(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Yc.RESOURCE_EXHAUSTED?(qc(t.toString()),qc("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Yc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new Xc(Yc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return $c("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():($c("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class em extends Zp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Kc()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Gc(void 0===t||"string"==typeof t),Hu.fromBase64String(t||"")):(Gc(void 0===t||t instanceof Uint8Array),Hu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Yc.UNKNOWN:hf(e.code);return new Xc(t,e.message||"")}(o);n=new kf(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=zf(e,r.document.name),s=Mf(r.document.updateTime),o=r.document.createTime?Mf(r.document.createTime):du.min(),a=new yh({mapValue:{fields:r.document.fields}}),l=bh.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ef(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=zf(e,r.document),s=r.readTime?Mf(r.readTime):du.min(),o=bh.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ef([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=zf(e,r.document),s=r.removedTargetIds||[];n=new Ef([],s,i,null)}else{if(!("filter"in t))return Kc();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new af(r,i),o=e.targetId;n=new _f(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return du.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?du.min():t.readTime?Mf(t.readTime):du.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=qf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Wh(r)?{documents:Gf(e,r)}:{query:Qf(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Lf(e,t.resumeToken);const r=Df(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(du.min())>0){n.readTime=Of(e,t.snapshotVersion.toTimestamp());const r=Df(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Kc()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=qf(this.serializer),t.removeTarget=e,this.Wo(t)}}class tm extends Zp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Gc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Gc(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Mf(e.updateTime):Mf(t);return n.isEqual(du.min())&&(n=Mf(t)),new zd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Mf(e.commitTime);return this.listener.cu(n,t)}return Gc(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=qf(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Kf(this.serializer,e)))};this.Wo(t)}}class nm extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Xc(Yc.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Yc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xc(Yc.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Yc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xc(Yc.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class rm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(qc(t),this.mu=!1):$c("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class im{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{fm(this)&&($c("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Qc(e);t.vu.add(4),await om(t),t.bu.set("Unknown"),t.vu.delete(4),await sm(t)}(this))}))})),this.bu=new rm(n,r)}}async function sm(e){if(fm(e))for(const t of e.Ru)await t(!0)}async function om(e){for(const t of e.Ru)await t(!1)}function am(e,t){const n=Qc(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),dm(n)?hm(n):Pm(n).Ko()&&cm(n,t))}function lm(e,t){const n=Qc(e),r=Pm(n);n.Au.delete(t),r.Ko()&&um(n,t),0===n.Au.size&&(r.Ko()?r.jo():fm(n)&&n.bu.set("Unknown"))}function cm(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(du.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Pm(e).su(t)}function um(e,t){e.Vu.qt(t),Pm(e).iu(t)}function hm(e){e.Vu=new Tf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Pm(e).start(),e.bu.gu()}function dm(e){return fm(e)&&!Pm(e).Uo()&&e.Au.size>0}function fm(e){return 0===Qc(e).vu.size}function pm(e){e.Vu=void 0}async function mm(e){e.Au.forEach(((t,n)=>{cm(e,t)}))}async function gm(e,t){pm(e),dm(e)?(e.bu.Iu(t),hm(e)):e.bu.set("Unknown")}async function ym(e,t,n){if(e.bu.set("Online"),t instanceof kf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){$c("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await vm(e,n)}else if(t instanceof Ef?e.Vu.Ht(t):t instanceof _f?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(du.min()))try{const t=await Dp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(Hu.EMPTY_BYTE_STRING,r.snapshotVersion)),um(e,t);const i=new op(r.target,t,n,r.sequenceNumber);cm(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){$c("RemoteStore","Failed to raise snapshot:",t),await vm(e,t)}}async function vm(e,t,n){if(!Iu(t))throw t;e.vu.add(1),await om(e),e.bu.set("Offline"),n||(n=()=>Dp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{$c("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await sm(e)}))}function bm(e,t){return t().catch((n=>vm(e,n,t)))}async function wm(e){const t=Qc(e),n=Rm(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;xm(t);)try{const e=await Lp(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Em(t,e)}catch(e){await vm(t,e)}_m(t)&&km(t)}function xm(e){return fm(e)&&e.Eu.length<10}function Em(e,t){e.Eu.push(t);const n=Rm(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function _m(e){return fm(e)&&!Rm(e).Uo()&&e.Eu.length>0}function km(e){Rm(e).start()}async function Sm(e){Rm(e).hu()}async function Tm(e){const t=Rm(e);for(const n of e.Eu)t.uu(n.mutations)}async function Im(e,t,n){const r=e.Eu.shift(),i=sf.from(r,t,n);await bm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await wm(e)}async function Cm(e,t){t&&Rm(e).ou&&await async function(e,t){if(uf(n=t.code)&&n!==Yc.ABORTED){const n=e.Eu.shift();Rm(e).Qo(),await bm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await wm(e)}var n}(e,t),_m(e)&&km(e)}async function Nm(e,t){const n=Qc(e);n.asyncQueue.verifyOperationInProgress(),$c("RemoteStore","RemoteStore received new credentials");const r=fm(n);n.vu.add(3),await om(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await sm(n)}async function Am(e,t){const n=Qc(e);t?(n.vu.delete(2),await sm(n)):t||(n.vu.add(2),await om(n),n.bu.set("Unknown"))}function Pm(e){return e.Su||(e.Su=function(e,t,n){const r=Qc(e);return r.fu(),new em(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:mm.bind(null,e),ao:gm.bind(null,e),nu:ym.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),dm(e)?hm(e):e.bu.set("Unknown")):(await e.Su.stop(),pm(e))}))),e.Su}function Rm(e){return e.Du||(e.Du=function(e,t,n){const r=Qc(e);return r.fu(),new tm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Sm.bind(null,e),ao:Cm.bind(null,e),au:Tm.bind(null,e),cu:Im.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await wm(e)):(await e.Du.stop(),e.Eu.length>0&&($c("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))}))),e.Du}class Dm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Jc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Dm(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xc(Yc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Om(e,t){if(qc("AsyncQueue",`${t}: ${e}`),Iu(e))return new Xc(Yc.UNAVAILABLE,`${t}: ${e}`);throw e}class Lm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||yu.comparator(t.key,n.key):(e,t)=>yu.comparator(e.key,t.key),this.keyedMap=md(),this.sortedSet=new Fu(this.comparator)}static emptySet(e){return new Lm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Lm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class jm{constructor(){this.Cu=new Fu(yu.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Kc():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Mm{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Mm(e,t,Lm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Fm{constructor(){this.Nu=void 0,this.listeners=[]}}class Um{constructor(){this.queries=new hd((e=>sd(e)),id),this.onlineState="Unknown",this.ku=new Set}}async function Vm(e,t){const n=Qc(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Fm),i)try{s.Nu=await n.onListen(r)}catch(e){const n=Om(e,`Initialization of query '${od(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&qm(n)}async function zm(e,t){const n=Qc(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Bm(e,t){const n=Qc(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&qm(n)}function $m(e,t,n){const r=Qc(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function qm(e){e.ku.forEach((e=>{e.next()}))}class Hm{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Mm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Mm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Wm{constructor(e){this.key=e}}class Km{constructor(e){this.key=e}}class Gm{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Ed(),this.mutatedKeys=Ed(),this.tc=cd(e),this.ec=new Lm(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new jm,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=ad(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kc()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new Mm(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new jm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Ed(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new Km(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new Wm(n))})),t}hc(e){this.Yu=e.ir,this.Zu=Ed();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Mm.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Qm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ym{constructor(e){this.key=e,this.fc=!1}}class Xm{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new hd((e=>sd(e)),id),this._c=new Map,this.mc=new Set,this.gc=new Fu(yu.comparator),this.yc=new Map,this.Ic=new bp,this.Tc={},this.Ec=new Map,this.Ac=fp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Jm(e,t){const n=gg(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await jp(n.localStore,td(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Zm(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&am(n.remoteStore,e)}return i}async function Zm(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Fp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return ug(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await Fp(e.localStore,t,!0),o=new Gm(t,s.ir),a=o.sc(s.documents),l=xf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);ug(e,n,c.cc);const u=new Qm(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function eg(e,t){const n=Qc(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!id(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Mp(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),lm(n.remoteStore,r.targetId),lg(n,r.targetId)})).catch(Su)):(lg(n,r.targetId),await Mp(n.localStore,r.targetId,!0))}async function tg(e,t){const n=Qc(e);try{const e=await function(e,t){const n=Qc(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Hu.EMPTY_BYTE_STRING,du.min()).withLastLimboFreeSnapshotVersion(du.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Bs.updateTargetData(e,c))}));let a=fd(),l=Ed();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Op(e,s,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual(du.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Tu.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(Gc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?Gc(r.fc):e.removedDocuments.size>0&&(Gc(r.fc),r.fc=!1))})),await fg(n,e,t)}catch(e){await Su(e)}}function ng(e,t,n){const r=Qc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Qc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&qm(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function rg(e,t,n){const r=Qc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new Fu(yu.comparator);e=e.insert(s,bh.newNoDocument(s,du.min()));const n=Ed().add(s),i=new wf(du.min(),new Map,new Fu(cu),e,n);await tg(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),dg(r)}else await Mp(r.localStore,t,!1).then((()=>lg(r,t,n))).catch(Su)}async function ig(e,t){const n=Qc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Qc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Tu.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Gc(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ed();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);ag(n,r,null),og(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fg(n,e)}catch(e){await Su(e)}}async function sg(e,t,n){const r=Qc(e);try{const e=await function(e,t){const n=Qc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Gc(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);ag(r,t,n),og(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await fg(r,e)}catch(n){await Su(n)}}function og(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function ag(e,t,n){const r=Qc(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function lg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||cg(e,t)}))}function cg(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(lm(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),dg(e))}function ug(e,t,n){for(const r of n)r instanceof Wm?(e.Ic.addReference(r.key,t),hg(e,r)):r instanceof Km?($c("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||cg(e,r.key)):Kc()}function hg(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||($c("SyncEngine","New document in limbo: "+n),e.mc.add(r),dg(e))}function dg(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new yu(pu.fromString(t)),r=e.Ac.next();e.yc.set(r,new Ym(n)),e.gc=e.gc.insert(n,r),am(e.remoteStore,new op(td(Qh(n.path)),r,"TargetPurposeLimboResolution",Cu.ct))}}async function fg(e,t,n){const r=Qc(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{o.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Cp.Li(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=Qc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Tu.forEach(t,(t=>Tu.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Tu.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Iu(e))throw e;$c("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function pg(e,t){const n=Qc(e);if(!n.currentUser.isEqual(t)){$c("SyncEngine","User change. New user:",t.toKey());const e=await Rp(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new Xc(Yc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await fg(n,e.er)}}function mg(e,t){const n=Qc(e),r=n.yc.get(t);if(r&&r.fc)return Ed().add(r.key);{let e=Ed();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function gg(e){const t=Qc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=tg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rg.bind(null,t),t.dc.nu=Bm.bind(null,t.eventManager),t.dc.Pc=$m.bind(null,t.eventManager),t}function yg(e){const t=Qc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ig.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sg.bind(null,t),t}class vg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Xp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Pp(this.persistence,new Np,e.initialUser,this.serializer)}createPersistence(e){return new Sp(Ip.zs,this.serializer)}createSharedClientState(e){return new zp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class bg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ng(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pg.bind(null,this.syncEngine),await Am(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Um}createDatastore(e){const t=Xp(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Qp(r));var r;return function(e,t,n,r){return new nm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>ng(this.syncEngine,e,0),s=$p.D()?new $p:new Bp,new im(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Xm(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Qc(e);$c("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await om(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class wg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):qc("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class xg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Xc(Yc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Qc(e),r=qf(n.serializer)+"/documents",i={documents:t.map((e=>Vf(n.serializer,e)))},s=await n.vo("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Gc(!!t.found),t.found.name,t.found.updateTime;const n=zf(e,t.found.name),r=Mf(t.found.updateTime),i=t.found.createTime?Mf(t.found.createTime):du.min(),s=new yh({mapValue:{fields:t.found.fields}});return bh.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Gc(!!t.missing),Gc(!!t.readTime);const n=zf(e,t.missing),r=Mf(t.readTime);return bh.newNoDocument(n,r)}(e,t):Kc()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Gc(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new tf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=yu.fromPath(t);this.mutations.push(new nf(n,this.precondition(n)))})),await async function(e,t){const n=Qc(e),r=qf(n.serializer)+"/documents",i={writes:t.map((e=>Kf(n.serializer,e)))};await n.Io("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kc();t=du.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Xc(Yc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(du.min())?Bd.exists(!1):Bd.updateTime(t):Bd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(du.min()))throw new Xc(Yc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bd.updateTime(t)}return Bd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Eg{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Bc=n.maxAttempts,this.qo=new Jp(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No((async()=>{const e=new xg(this.datastore),t=this.qc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Uc(e)}))))})).catch((e=>{this.Uc(e)}))}))}qc(e){try{const t=this.updateFunction(e);return!Nu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Lc(),Promise.resolve())))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!uf(t)}return!1}}class _g{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Uc.UNAUTHENTICATED,this.clientId=lu.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{$c("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>($c("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Xc(Yc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Om(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function kg(e,t){e.asyncQueue.verifyOperationInProgress(),$c("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Rp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Sg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ig(e);$c("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Nm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Nm(t.remoteStore,n))),e._onlineComponents=t}function Tg(e){return"FirebaseError"===e.name?e.code===Yc.FAILED_PRECONDITION||e.code===Yc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Ig(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){$c("FirestoreClient","Using user provided OfflineComponentProvider");try{await kg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Tg(n))throw n;Hc("Error using user provided cache. Falling back to memory cache: "+n),await kg(e,new vg)}}else $c("FirestoreClient","Using default OfflineComponentProvider"),await kg(e,new vg);return e._offlineComponents}async function Cg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?($c("FirestoreClient","Using user provided OnlineComponentProvider"),await Sg(e,e._uninitializedComponentsProvider._online)):($c("FirestoreClient","Using default OnlineComponentProvider"),await Sg(e,new bg))),e._onlineComponents}function Ng(e){return Cg(e).then((e=>e.syncEngine))}function Ag(e){return Cg(e).then((e=>e.datastore))}async function Pg(e){const t=await Cg(e),n=t.eventManager;return n.onListen=Jm.bind(null,t.syncEngine),n.onUnlisten=eg.bind(null,t.syncEngine),n}function Rg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Jc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new wg({next:n=>{t.enqueueAndForget((()=>zm(e,o))),n.fromCache&&"server"===r.source?i.reject(new Xc(Yc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Hm(n,s,{includeMetadataChanges:!0,Ku:!0});return Vm(e,o)}(await Pg(e),e.asyncQueue,t,n,r))),r.promise}function Dg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Og=new Map;function Lg(e,t,n){if(!n)throw new Xc(Yc.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function jg(e){if(!yu.isDocumentKey(e))throw new Xc(Yc.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Mg(e){if(yu.isDocumentKey(e))throw new Xc(Yc.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Fg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Kc()}function Ug(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xc(Yc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fg(e);throw new Xc(Yc.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Vg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Xc(Yc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xc(Yc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Xc(Yc.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Xc(Yc.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Xc(Yc.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Xc(Yc.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class zg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Xc(Yc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xc(Yc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new eu;switch(e.type){case"firstParty":return new iu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Xc(Yc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Og.get(e);t&&($c("ComponentProvider","Removing Datastore"),Og.delete(e),t.terminate())}(this),Promise.resolve()}}function Bg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Ug(e,zg))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Hc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Uc.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Xc(Yc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Uc(s)}e._authCredentials=new tu(new Zc(t,n))}}class $g{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $g(this.firestore,e,this._key)}}class qg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new qg(this.firestore,e,this._query)}}class Hg extends qg{constructor(e,t,n){super(e,t,Qh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $g(this.firestore,null,new yu(e))}withConverter(e){return new Hg(this.firestore,e,this._path)}}function Wg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ze(e),Lg("collection","path",t),e instanceof zg){const n=pu.fromString(t,...r);return Mg(n),new Hg(e,null,n)}{if(!(e instanceof $g||e instanceof Hg))throw new Xc(Yc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(pu.fromString(t,...r));return Mg(n),new Hg(e.firestore,null,n)}}function Kg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ze(e),1===arguments.length&&(t=lu.A()),Lg("doc","path",t),e instanceof zg){const n=pu.fromString(t,...r);return jg(n),new $g(e,null,new yu(n))}{if(!(e instanceof $g||e instanceof Hg))throw new Xc(Yc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(pu.fromString(t,...r));return jg(n),new $g(e.firestore,e instanceof Hg?e.converter:null,new yu(n))}}class Gg{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Jp(this,"async_queue_retry"),this.Xc=()=>{const e=Yp();e&&$c("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Yp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Yp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new Jc;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Iu(e))throw e;$c("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw qc("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Dm.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&Kc()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Qg(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class Yg extends zg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Gg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Jg(this),this._firestoreClient.terminate()}}function Xg(e){return e._firestoreClient||Jg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Jg(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Zu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Dg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new _g(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Zg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zg(Hu.fromBase64String(e))}catch(e){throw new Xc(Yc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Zg(Hu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ey{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ty{constructor(e){this._methodName=e}}class ny{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xc(Yc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xc(Yc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cu(this._lat,e._lat)||cu(this._long,e._long)}}const ry=/^__.*__$/;class iy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Xd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yd(e,this.data,t,this.fieldTransforms)}}class sy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Xd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kc()}}class ay{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ay(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Sy(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(oy(this.ca)&&ry.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class ly{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Xp(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ay({ca:e,methodName:t,ga:n,path:gu.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cy(e){const t=e._freezeSettings(),n=Xp(e._databaseId);return new ly(e._databaseId,!!t.ignoreUndefinedProperties,n)}function uy(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);xy("Data must be an object, but it was:",o,r);const a=by(r,o);let l,c;if(s.merge)l=new $u(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Ey(t,r,n);if(!o.contains(i))throw new Xc(Yc.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Ty(e,i)||e.push(i)}l=new $u(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new iy(new yh(a),l,c)}class hy extends ty{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hy}}function dy(e,t,n){return new ay({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class fy extends ty{_toFieldTransform(e){return new Vd(e.path,new Rd)}isEqual(e){return e instanceof fy}}class py extends ty{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=dy(this,e,!0),n=this.pa.map((e=>vy(e,t))),r=new Dd(n);return new Vd(e.path,r)}isEqual(e){return this===e}}function my(e,t,n,r){const i=e.ya(1,t,n);xy("Data must be an object, but it was:",i,r);const s=[],o=yh.empty();ju(r,((e,r)=>{const a=ky(t,e,n);r=ze(r);const l=i.da(a);if(r instanceof hy)s.push(a);else{const e=vy(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new $u(s);return new sy(o,a,i.fieldTransforms)}function gy(e,t,n,r,i,s){const o=e.ya(1,t,n),a=[Ey(t,r,n)],l=[i];if(s.length%2!=0)throw new Xc(Yc.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Ey(t,s[d])),l.push(s[d+1]);const c=[],u=yh.empty();for(let d=a.length-1;d>=0;--d)if(!Ty(c,a[d])){const e=a[d];let t=l[d];t=ze(t);const n=o.da(e);if(t instanceof hy)c.push(e);else{const r=vy(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new $u(c);return new sy(u,h,o.fieldTransforms)}function yy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return vy(n,e.ya(r?4:3,t))}function vy(e,t){if(wy(e=ze(e)))return xy("Unsupported field value:",t,e),by(e,t);if(e instanceof ty)return function(e,t){if(!oy(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=vy(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ze(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Id(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=hu.fromDate(e);return{timestampValue:Of(t.serializer,n)}}if(e instanceof hu){const n=new hu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Of(t.serializer,n)}}if(e instanceof ny)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Zg)return{bytesValue:Lf(t.serializer,e._byteString)};if(e instanceof $g){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ff(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${Fg(e)}`)}(e,t)}function by(e,t){const n={};return Mu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ju(e,((e,r)=>{const i=vy(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function wy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof hu||e instanceof ny||e instanceof Zg||e instanceof $g||e instanceof ty)}function xy(e,t,n){if(!wy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Fg(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Ey(e,t,n){if((t=ze(t))instanceof ey)return t._internalPath;if("string"==typeof t)return ky(e,t);throw Sy("Field path arguments must be of type string or ",e,!1,void 0,n)}const _y=new RegExp("[~\\*/\\[\\]]");function ky(e,t,n){if(t.search(_y)>=0)throw Sy(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ey(...t.split("."))._internalPath}catch(r){throw Sy(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Sy(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Xc(Yc.INVALID_ARGUMENT,a+e+l)}function Ty(e,t){return e.some((e=>e.isEqual(t)))}class Iy{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $g(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Cy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ny("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Cy extends Iy{data(){return super.data()}}function Ny(e,t){return"string"==typeof t?ky(e,t):t instanceof ey?t._internalPath:t._delegate._internalPath}function Ay(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xc(Yc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Py{}class Ry extends Py{}function Dy(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Py&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof jy)).length,n=e.filter((e=>e instanceof Oy)).length;if(t>1||t>0&&n>0)throw new Xc(Yc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Oy extends Ry{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Oy(e,t,n)}_apply(e){const t=this._parse(e);return Uy(e._query,t),new qg(e.firestore,e.converter,nd(e._query,t))}_parse(e){const t=cy(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Xc(Yc.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Fy(o,s);const t=[];for(const n of o)t.push(My(r,e,n));a={arrayValue:{values:t}}}else a=My(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Fy(o,s),a=yy(n,"where",o,"in"===s||"not-in"===s);return Th.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ly(e,t,n){const r=t,i=Ny("where",e);return Oy._create(i,r,n)}class jy extends Py{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jy(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ih.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Uy(n,i),n=nd(n,i)}(e._query,t),new qg(e.firestore,e.converter,nd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function My(e,t,n){if("string"==typeof(n=ze(n))){if(""===n)throw new Xc(Yc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zh(t)&&-1!==n.indexOf("/"))throw new Xc(Yc.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(pu.fromString(n));if(!yu.isDocumentKey(r))throw new Xc(Yc.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ch(e,new yu(r))}if(n instanceof $g)return ch(e,n._key);throw new Xc(Yc.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fg(n)}.`)}function Fy(e,t){if(!Array.isArray(e)||0===e.length)throw new Xc(Yc.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Uy(e,t){if(t.isInequality()){const n=Jh(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Xc(Yc.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=Xh(e);null!==i&&Vy(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Xc(Yc.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Xc(Yc.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function Vy(e,t,n){if(!n.isEqual(t))throw new Xc(Yc.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class zy{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(nh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Kc()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ju(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new ny(Gu(e.latitude),Gu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Xu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const t=Ku(e);return new hu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=pu.fromString(e);Gc(sp(n));const r=new eh(n.get(1),n.get(3)),i=new yu(n.popFirst(5));return r.isEqual(t)||qc(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function By(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class $y extends zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $g(this.firestore,null,t)}}class qy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hy extends Iy{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Wy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ny("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Wy extends Hy{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Ky{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new qy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Wy(this._firestore,this._userDataWriter,n.key,n,new qy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xc(Yc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Wy(e._firestore,e._userDataWriter,n.doc.key,n.doc,new qy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Wy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new qy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Gy(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Gy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kc()}}class Qy extends zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $g(this.firestore,null,t)}}function Yy(e){e=Ug(e,qg);const t=Ug(e.firestore,Yg),n=Xg(t),r=new Qy(t);return Ay(e._query),Rg(n,e._query).then((n=>new Ky(t,r,e,n)))}function Xy(e,t,n){e=Ug(e,$g);const r=Ug(e.firestore,Yg),i=cy(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=ze(t))||t instanceof ey?gy(i,"updateDoc",e._key,t,n,a):my(i,"updateDoc",e._key,t),Jy(r,[s.toMutation(e._key,Bd.exists(!0))])}function Jy(e,t){return function(e,t){const n=new Jc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=yg(e);try{const e=await function(e,t){const n=Qc(e),r=hu.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ed());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=fd(),l=Ed();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Gd(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Xd(e.key,t,vh(t.value.mapValue),Bd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:gd(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Fu(cu)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await fg(r,e.changes),await wm(r.remoteStore)}catch(e){const t=Om(e,"Failed to persist write");n.reject(t)}}(await Ng(e),t,n))),n.promise}(Xg(e),t)}function Zy(e,t,n){const r=n.docs.get(t._key),i=new Qy(e);return new Hy(e,i,t._key,r,new qy(n.hasPendingWrites,n.fromCache),t.converter)}const ev={maxAttempts:5};function tv(e,t){if((e=ze(e)).firestore!==t)throw new Xc(Yc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class nv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cy(e)}get(e){const t=tv(e,this._firestore),n=new $y(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Kc();const r=e[0];if(r.isFoundDocument())return new Iy(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Iy(this._firestore,n,t._key,null,t.converter);throw Kc()}))}set(e,t,n){const r=tv(e,this._firestore),i=By(r.converter,t,n),s=uy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=tv(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=ze(t))||t instanceof ey?gy(this._dataReader,"Transaction.update",r._key,t,n,o):my(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=tv(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tv(e,this._firestore),n=new Qy(this._firestore);return super.get(e).then((e=>new Hy(this._firestore,n,t._key,e._document,new qy(!1,!1),t.converter)))}}function rv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new py("arrayUnion",t)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Vc=e}(Jt),Gt(new Be("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Yg(new nu(e.getProvider("auth-internal")),new ou(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xc(Yc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eh(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),tn(Fc,"3.13.0",e),tn(Fc,"3.13.0","esm2017")}();const iv=Zt({apiKey:"AIzaSyBBSDWWb8W1YD5o34R99U2YLBcd75hhOwA",authDomain:"my-shop-cdeac.firebaseapp.com",projectId:"my-shop-cdeac",storageBucket:"my-shop-cdeac.firebasestorage.app",messagingSenderId:"656183080182",appId:"1:656183080182:web:2657a61c5d62ae383268d7"}),sv=ms(iv),ov=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Qt("object"==typeof e?e:en(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=Se(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Bg(r,...e)}return r}(iv),av=async(e,t,n)=>{if(!e||!Array.isArray(t)||0===t.length||!n)throw new Error("Invalid transaction data provided.");const r=Kg(ov,"stalls",e),i=Wg(ov,"sales"),s=new fy("serverTimestamp");try{await function(e,t,n){e=Ug(e,Yg);const r=Object.assign(Object.assign({},ev),n);return function(e){if(e.maxAttempts<1)throw new Xc(Yc.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Jc;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Ag(e);new Eg(e.asyncQueue,i,n,t,r).run()})),r.promise}(Xg(e),(n=>t(new nv(e,n))),r)}(ov,(async o=>{const a=await o.get(r);if(!a.exists())throw new Error("Stall document does not exist!");let l=[...a.data().products||[]];for(const r of t){const t=l.findIndex((e=>e.id===r.productId));if(-1===t)throw new Error(`Product with ID ${r.productId} not found in stall.`);const a=l[t];if(null!==a.stockCount&&void 0!==a.stockCount){if(a.stockCount<r.quantity)throw new Error(`Insufficient stock for product ${a.name}. Available: ${a.stockCount}, Requested: ${r.quantity}`);l[t]={...a,stockCount:a.stockCount-r.quantity}}const c=a.price,u=c*r.quantity;o.set(Kg(i),{stallId:e,productId:r.productId,quantity:r.quantity,pricePerItem:c,totalPrice:u,paymentMethod:n,timestamp:s})}o.update(r,{products:l})})),console.log("Multi-item transaction successfully committed!")}catch(o){throw console.error("Multi-item transaction failed: ",o),o}},lv=async e=>{if(!e)return[];const t=Dy(Wg(ov,"sales"),Ly("stallId","==",e));return(await Yy(t)).docs.map((e=>({id:e.id,...e.data()})))};var cv=n(579);const uv=(0,e.createContext)();function hv(){return(0,e.useContext)(uv)}function dv(t){let{children:n}=t;const[r,i]=(0,e.useState)(null),[s,o]=(0,e.useState)(!0);(0,e.useEffect)((()=>{const e=function(e,t,n,r){return ze(e).onAuthStateChanged(t,n,r)}(sv,(e=>{i(e),o(!1)}));return e}),[]);const a={currentUser:r,logout:function(){return ti(sv)}};return(0,cv.jsx)(uv.Provider,{value:a,children:!s&&n})}const fv=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)(""),[s,o]=(0,e.useState)({}),[a,l]=(0,e.useState)({}),[c,u]=(0,e.useState)({}),[h,d]=(0,e.useState)({}),[f,p]=(0,e.useState)({}),[m,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)(0);(0,e.useEffect)((()=>{g(!0);const e=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=ze(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Qg(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(Qg(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof $g)h=Ug(e.firestore,Yg),d=Qh(e._key.path),u={next:t=>{n[l]&&n[l](Zy(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Ug(e,qg);h=Ug(t.firestore,Yg),d=t._query;const r=new Qy(h);u={next:e=>{n[l]&&n[l](new Ky(h,r,t,e))},error:n[l+1],complete:n[l+2]},Ay(e._query)}return function(e,t,n,r){const i=new wg(r),s=new Hm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Vm(await Pg(e),s))),()=>{i.Dc(),e.asyncQueue.enqueueAndForget((async()=>zm(await Pg(e),s)))}}(Xg(h),d,c,u)}(Wg(ov,"stalls"),(async e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));n(t);const r={},i={},s={},a={},c=[],h={};t.forEach((e=>{r[e.id]="",i[e.id]="",s[e.id]="",a[e.id]="",c.push(lv(e.id).then((t=>{h[e.id]=t.sort(((e,t)=>{var n,r;return((null===(n=t.timestamp)||void 0===n?void 0:n.toDate())||0)-((null===(r=e.timestamp)||void 0===r?void 0:r.toDate())||0)}))})))})),o(r),l(i),u(s),d(a),await Promise.all(c),p(h);let f=0;t.forEach((e=>{const t=h[e.id]||[];f+=t.reduce(((e,t)=>e+(t.totalPrice||0)),0)})),v(f),g(!1)}));return()=>{e()}}),[]);const b=(e,t,n)=>{e((e=>({...e,[t]:n})))},w=(e,t)=>{var n;const r=null===(n=e.products)||void 0===n?void 0:n.find((e=>e.id===t));return r?r.name:"Unknown Product"},x=e=>e&&e.toDate?e.toDate().toLocaleString():"N/A";return(0,cv.jsxs)("div",{className:"p-6 md:p-10",children:[(0,cv.jsx)("h1",{className:"text-3xl font-semibold mb-4 text-center",children:"Admin Dashboard"}),(0,cv.jsxs)("div",{className:"mb-8 glass-card max-w-lg mx-auto p-4 flex justify-between items-center",children:[(0,cv.jsxs)("div",{children:[(0,cv.jsx)("h2",{className:"text-xl font-medium mb-2",children:"Overall Summary"}),(0,cv.jsxs)("p",{className:"text-lg",children:["Total Sales Across All Stalls: ",(0,cv.jsxs)("span",{className:"font-semibold text-green-400",children:["\xa3",y.toFixed(2)]})]})]}),(0,cv.jsx)("button",{onClick:async()=>{g(!0);try{const e=await Yy(Wg(ov,"stalls")),t={};e.forEach((e=>{t[e.id]={id:e.id,...e.data()}}));const n=(await Yy(Dy(Wg(ov,"sales")))).docs.map((e=>({id:e.id,...e.data()})));let r="data:text/csv;charset=utf-8,";r+=["Timestamp","Stall Name","Product Name","Quantity","Price Per Item (\xa3)","Total Price (\xa3)"].join(",")+"\r\n",n.sort(((e,t)=>{var n,r;return((null===(n=e.timestamp)||void 0===n?void 0:n.toDate())||0)-((null===(r=t.timestamp)||void 0===r?void 0:r.toDate())||0)})),n.forEach((e=>{const n=t[e.stallId],i=n?n.name:"Unknown Stall",s=n?w(n,e.productId):"Unknown Product",o=e.timestamp?x(e.timestamp):"N/A",a=(e.pricePerItem||0).toFixed(2),l=(e.totalPrice||0).toFixed(2),c=e.quantity||1,u=`"${i.replace(/"/g,'""')}"`,h=`"${s.replace(/"/g,'""')}"`,d=`"${o.replace(/"/g,'""')}"`;r+=[d,u,h,c,a,l].join(",")+"\r\n"}));const i=encodeURI(r),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download","sales_export.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(e){console.error("Error exporting sales to CSV:",e),alert("Failed to export sales data. Please check the console for details.")}finally{g(!1)}},disabled:m,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50",children:m?"Exporting...":"Export All Sales (CSV)"})]}),(0,cv.jsxs)("div",{className:"mb-8 glass-card max-w-lg mx-auto",children:[(0,cv.jsx)("h2",{className:"text-xl font-medium mb-4",children:"Add New Stall"}),(0,cv.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),r&&(await function(e,t){const n=Ug(e.firestore,Yg),r=Kg(e),i=By(e.converter,t);return Jy(n,[uy(cy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Bd.exists(!1))]).then((()=>r))}(Wg(ov,"stalls"),{name:r,products:[],sellerPin:null}),i(""))},className:"flex items-center space-x-3",children:[(0,cv.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"New Stall Name",className:"flex-grow",required:!0}),(0,cv.jsx)("button",{type:"submit",children:"Add Stall"})]})]}),m&&!t.length?(0,cv.jsx)("div",{className:"text-center text-xl",children:"Loading stall data..."}):(0,cv.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e=>{const t=(n=e.id,(f[n]||[]).reduce(((e,t)=>e+(t.totalPrice||0)),0));var n;const r=f[e.id]||[];return(0,cv.jsxs)("div",{className:"glass-card flex flex-col space-y-4",children:[(0,cv.jsxs)("div",{className:"flex justify-between items-start border-b border-vision-border pb-2 mb-2",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold",children:e.name}),(0,cv.jsxs)("div",{className:"text-right",children:[(0,cv.jsx)("span",{className:"block text-sm text-vision-text-secondary",children:"Total Raised"}),(0,cv.jsxs)("span",{className:"block text-lg font-semibold text-green-400",children:["\xa3",t.toFixed(2)]})]})]}),(0,cv.jsxs)("form",{onSubmit:t=>{t.preventDefault(),(async e=>{const t=s[e],n=a[e],r=c[e];if(t&&n){const s=parseFloat(n);if(isNaN(s)||s<0)return void alert("Please enter a valid positive price.");let a=null;if(r&&(a=parseInt(r),isNaN(a)||a<0||!Number.isInteger(a)))return void alert("Please enter a valid whole number for stock (0 or greater), or leave it empty.");const c={id:Date.now().toString(),name:t,price:s,stockCount:a},h=Kg(ov,"stalls",e);try{await Xy(h,{products:rv(c)}),o((t=>({...t,[e]:""}))),l((t=>({...t,[e]:""}))),u((t=>({...t,[e]:""})))}catch(i){console.error("Error adding product: ",i),alert("Failed to add product. Please try again.")}}})(e.id)},className:"space-y-3",children:[(0,cv.jsx)("input",{type:"text",value:s[e.id]||"",onChange:t=>b(o,e.id,t.target.value),placeholder:"Product Name",className:"w-full",required:!0}),(0,cv.jsxs)("div",{className:"flex space-x-3",children:[(0,cv.jsx)("input",{type:"number",step:"0.01",min:"0",value:a[e.id]||"",onChange:t=>b(l,e.id,t.target.value),placeholder:"Price (\xa3)",className:"w-1/2",required:!0}),(0,cv.jsx)("input",{type:"number",step:"1",min:"0",value:c[e.id]||"",onChange:t=>b(u,e.id,t.target.value),placeholder:"Stock (Optional)",className:"w-1/2"})]}),(0,cv.jsx)("button",{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-sm py-2 px-3",children:"Add Product"})]}),(0,cv.jsxs)("form",{onSubmit:t=>{t.preventDefault(),(async e=>{const t=h[e];if(t){const n=Kg(ov,"stalls",e);await Xy(n,{sellerPin:t}),d((t=>({...t,[e]:""})))}})(e.id)},className:"flex items-center space-x-3",children:[(0,cv.jsx)("input",{type:"text",value:h[e.id]||"",onChange:t=>b(d,e.id,t.target.value),placeholder:"Seller PIN (4 digits)",className:"flex-grow",maxLength:"4",pattern:"\\d{4}",title:"PIN must be 4 digits"}),(0,cv.jsx)("button",{type:"submit",className:"bg-yellow-500 hover:bg-yellow-600 text-sm py-1 px-3",children:"Set PIN"})]}),(0,cv.jsxs)("p",{className:"text-sm text-vision-text-secondary",children:["Current Seller PIN: ",e.sellerPin||"Not Assigned"]}),(0,cv.jsxs)("div",{children:[(0,cv.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Products:"}),(0,cv.jsx)("ul",{className:"list-none space-y-2 text-vision-text-secondary",children:Array.isArray(e.products)&&e.products.length>0?e.products.map((e=>e&&void 0!==e.price&&null!==e.price?(0,cv.jsxs)("li",{className:"flex justify-between items-center text-sm p-2 bg-black bg-opacity-10 rounded-md",children:[(0,cv.jsx)("span",{children:e.name||"Unnamed Product"}),(0,cv.jsxs)("span",{className:"font-medium text-vision-text",children:["\xa3","number"===typeof e.price?e.price.toFixed(2):"N/A"]}),null!==e.stockCount&&void 0!==e.stockCount?(0,cv.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full "+(e.stockCount<=0?"bg-red-900 bg-opacity-70 text-red-200":"bg-blue-900 bg-opacity-50"),children:["Stock: ",e.stockCount]}):(0,cv.jsx)("span",{className:"text-xs italic",children:"Stock N/A"})]},e.id||e.name):null)):(0,cv.jsx)("li",{className:"italic text-xs",children:"No products added yet."})})]}),(0,cv.jsxs)("div",{className:"mt-4 pt-4 border-t border-vision-border",children:[(0,cv.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Recent Sales:"}),m&&!r.length?(0,cv.jsx)("p",{className:"italic text-xs text-vision-text-secondary",children:"Loading sales..."}):r.length>0?(0,cv.jsxs)("ul",{className:"list-none space-y-2 max-h-48 overflow-y-auto pr-2",children:[" ",r.map((t=>(0,cv.jsxs)("li",{className:"text-xs p-2 bg-black bg-opacity-20 rounded-md",children:[(0,cv.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,cv.jsx)("span",{className:"font-medium text-vision-text",children:w(e,t.productId)}),(0,cv.jsxs)("span",{className:"font-semibold text-green-300",children:["+\xa3",(t.totalPrice||0).toFixed(2)]})]}),(0,cv.jsxs)("div",{className:"flex justify-between items-center text-vision-text-secondary",children:[(0,cv.jsxs)("span",{children:["Qty: ",t.quantity||1," @ \xa3",(t.pricePerItem||0).toFixed(2)]}),(0,cv.jsx)("span",{children:x(t.timestamp)})]})]},t.id)))]}):(0,cv.jsx)("p",{className:"italic text-xs text-vision-text-secondary",children:"No sales recorded yet."})]})]},e.id)}))})]})},pv=()=>{const{logout:e}=hv(),t=ae();return(0,cv.jsxs)("div",{className:"min-h-screen p-6 md:p-10",children:[(0,cv.jsxs)("div",{className:"w-full flex justify-between items-center mb-8",children:[(0,cv.jsx)("h1",{className:"text-3xl font-semibold",children:"Stall Manager - Admin Panel"}),(0,cv.jsx)("button",{onClick:async()=>{try{await e(),t.push("/")}catch(n){console.error("Failed to log out",n)}},className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-5 rounded-xl transition-colors duration-200",children:"Logout"})]}),(0,cv.jsx)(fv,{})]})},mv=()=>{const[t,n]=(0,e.useState)(null),[r,i]=(0,e.useState)(!0),[s,o]=(0,e.useState)(""),{currentUser:a}=hv(),l=ae(),[c,u]=(0,e.useState)(""),[h,d]=(0,e.useState)([]),[f,p]=(0,e.useState)(!1),[m,g]=(0,e.useState)({}),[y,v]=(0,e.useState)("Card"),[b,w]=(0,e.useState)(""),[x,E]=(0,e.useState)(""),_=e.useRef(!0);(0,e.useEffect)((()=>()=>{_.current=!1}),[]);const k=(0,e.useCallback)((async e=>{i(!0),p(!0),o("");try{const t=await(async e=>{if(!e)return null;const t=Dy(Wg(ov,"stalls"),Ly("sellerPin","==",e)),n=await Yy(t);if(n.empty)return console.log("No matching stall found for PIN:",e),null;const r=n.docs[0];return{id:r.id,...r.data()}})(e);if(t){n(t);const e=await lv(t.id);d(e.sort(((e,t)=>{var n,r;return((null===(n=t.timestamp)||void 0===n?void 0:n.toDate())||0)-((null===(r=e.timestamp)||void 0===r?void 0:r.toDate())||0)})))}else o("Invalid PIN or stall not found. Please try again."),await ti(sv),sessionStorage.removeItem("sellerPin"),l.push("/seller-login")}catch(r){console.error("Error fetching stall details or sales:",r),o("Failed to fetch stall details or sales."),null===t&&(await ti(sv),sessionStorage.removeItem("sellerPin"),l.push("/seller-login"))}finally{_.current&&(i(!1),p(!1))}g({}),v("Card"),w(""),E("")}),[l]);(0,e.useEffect)((()=>{const e=sessionStorage.getItem("sellerPin");return a?e?void k(e):(o("PIN not provided. Please log in again."),i(!1),ti(sv).catch((e=>console.error("Sign out failed:",e))),sessionStorage.removeItem("sellerPin"),void l.push("/seller-login")):(o("Authentication required."),i(!1),void l.push("/seller-login"))}),[a,l,k]);const S=(e,n)=>{g((r=>{var i;const s=r[e]||0,o=Math.max(0,s+n),a=null===t||void 0===t||null===(i=t.products)||void 0===i?void 0:i.find((t=>t.id===e)),l=null===a||void 0===a?void 0:a.stockCount;if(null!==l&&void 0!==l&&o>l)return E(`Cannot add more than available stock (${l}) for ${a.name}.`),setTimeout((()=>E("")),3e3),r;if(0===o){const{[e]:t,...n}=r;return n}return{...r,[e]:o}})),E("")},T=()=>{g({}),v("Card"),w(""),E("")},I=(0,e.useMemo)((()=>Object.entries(m).reduce(((e,n)=>{var r;let[i,s]=n;const o=null===t||void 0===t||null===(r=t.products)||void 0===r?void 0:r.find((e=>e.id===i));return e+((null===o||void 0===o?void 0:o.price)||0)*s}),0)),[m,null===t||void 0===t?void 0:t.products]),C=(0,e.useMemo)((()=>{if("Cash"!==y||!b)return 0;const e=parseFloat(b);return Math.max(0,e-I)}),[b,I,y]);return r&&!t?(0,cv.jsx)("div",{className:"flex-center min-h-screen",children:(0,cv.jsx)("div",{className:"text-xl",children:"Loading Stall Details..."})}):s?(0,cv.jsx)("div",{className:"flex-center min-h-screen",children:(0,cv.jsxs)("div",{className:"glass-card text-center p-6",children:[(0,cv.jsxs)("p",{className:"text-red-400 mb-4",children:["Error: ","string"===typeof s?s:"An error occurred"]}),(0,cv.jsx)("button",{onClick:()=>l.push("/seller-login"),className:"bg-vision-accent hover:bg-blue-600 text-white font-semibold py-2 px-5 rounded-xl transition-colors duration-200",children:"Back to Login"})]})}):t?(0,cv.jsxs)("div",{className:"min-h-screen p-4 md:p-8 flex flex-col items-center relative",children:[(0,cv.jsxs)("div",{className:"glass-card w-full max-w-4xl p-6 z-10 mb-6",children:[" ",(0,cv.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,cv.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold",children:["Your Stall: ",(null===t||void 0===t?void 0:t.name)||"Loading..."]}),(0,cv.jsx)("button",{onClick:async()=>{i(!0);try{await ti(sv),sessionStorage.removeItem("sellerPin"),l.push("/")}catch(s){console.error("Seller Logout Error:",s),o("Failed to log out. Please try again."),i(!1)}},className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 text-sm",children:"Logout"})]}),"string"===typeof x&&x&&(0,cv.jsx)("div",{className:"mb-4 p-3 rounded-lg text-center text-sm font-medium "+(x.startsWith("Failed")||x.startsWith("Cart is empty")||x.startsWith("Cannot add")||x.startsWith("Cash received")?"bg-red-800 bg-opacity-70 text-red-100":"bg-green-800 bg-opacity-70 text-green-100"),children:x}),(0,cv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cv.jsxs)("div",{children:[(0,cv.jsx)("h2",{className:"text-xl font-semibold mb-4 border-b border-vision-border pb-2",children:"Products"}),(0,cv.jsxs)("ul",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:[" ",(t.products||[]).map((e=>{const t=m[e.id]||0,n=null!==e.stockCount&&void 0!==e.stockCount&&e.stockCount<=0,r=!n&&(null===e.stockCount||void 0===e.stockCount||t<e.stockCount);return(0,cv.jsxs)("li",{className:"glass-card flex flex-col sm:flex-row justify-between items-start sm:items-center p-3 "+(n&&0===t?"opacity-60":""),children:[(0,cv.jsxs)("div",{className:"flex-grow mb-2 sm:mb-0 sm:mr-4",children:[(0,cv.jsx)("span",{className:"block font-medium text-vision-text",children:e.name}),(0,cv.jsxs)("span",{className:"text-sm text-vision-text-secondary",children:["\xa3","number"===typeof e.price?e.price.toFixed(2):"N/A"]}),null!==e.stockCount&&void 0!==e.stockCount?(0,cv.jsx)("span",{className:"block text-xs mt-1 "+(n?"text-red-400 font-semibold":"text-blue-400"),children:n?"Out of Stock":`Stock: ${e.stockCount}`}):(0,cv.jsx)("span",{className:"block text-xs text-gray-500 mt-1",children:"Stock not tracked"})]}),(0,cv.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,cv.jsx)("button",{onClick:()=>S(e.id,-1),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-3 rounded disabled:opacity-50 disabled:cursor-not-allowed",disabled:0===t,"aria-label":`Decrease quantity of ${e.name}`,children:"-"}),(0,cv.jsx)("span",{className:"font-semibold w-8 text-center",children:t}),(0,cv.jsx)("button",{onClick:()=>S(e.id,1),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-3 rounded disabled:opacity-50 disabled:cursor-not-allowed",disabled:!r,"aria-label":`Increase quantity of ${e.name}`,children:"+"})]})]},e.id)}))]})]}),(0,cv.jsxs)("div",{children:[(0,cv.jsx)("h2",{className:"text-xl font-semibold mb-4 border-b border-vision-border pb-2",children:"Current Transaction"}),0===Object.keys(m).length?(0,cv.jsx)("p",{className:"italic text-sm text-vision-text-secondary",children:"Cart is empty. Add products using the controls on the left."}):(0,cv.jsxs)(cv.Fragment,{children:[(0,cv.jsx)("ul",{className:"space-y-2 mb-4 max-h-60 overflow-y-auto pr-2",children:Object.entries(m).map((e=>{let[n,r]=e;const i=t.products.find((e=>e.id===n));return i?(0,cv.jsxs)("li",{className:"text-sm flex justify-between items-center p-2 bg-black bg-opacity-10 rounded",children:[(0,cv.jsxs)("span",{children:[i.name," x ",r]}),(0,cv.jsxs)("span",{className:"font-medium",children:["\xa3",(i.price*r).toFixed(2)]})]},n):null}))}),(0,cv.jsxs)("div",{className:"text-lg font-bold mb-4 border-t border-vision-border pt-3",children:["Total: \xa3",I.toFixed(2)]}),(0,cv.jsxs)("div",{className:"mb-4",children:[(0,cv.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Payment Method:"}),(0,cv.jsxs)("div",{className:"flex space-x-4",children:[(0,cv.jsxs)("label",{className:"flex items-center",children:[(0,cv.jsx)("input",{type:"radio",name:"paymentMethod",value:"Card",checked:"Card"===y,onChange:e=>{v(e.target.value),w("")},className:"mr-2"})," Card"]}),(0,cv.jsxs)("label",{className:"flex items-center",children:[(0,cv.jsx)("input",{type:"radio",name:"paymentMethod",value:"Cash",checked:"Cash"===y,onChange:e=>v(e.target.value),className:"mr-2"})," Cash"]})]})]}),"Cash"===y&&(0,cv.jsxs)("div",{className:"mb-4 p-3 bg-black bg-opacity-10 rounded",children:[(0,cv.jsx)("label",{htmlFor:"cashReceived",className:"block text-sm font-medium mb-1",children:"Cash Received (\xa3):"}),(0,cv.jsx)("input",{type:"number",id:"cashReceived",value:b,onChange:e=>w(e.target.value),placeholder:"e.g., 20.00",className:"w-full p-2 rounded bg-white bg-opacity-10 border border-vision-border focus:ring-2 focus:ring-vision-accent focus:outline-none",min:I.toFixed(2),step:"0.01"}),parseFloat(b)>=I&&(0,cv.jsxs)("p",{className:"text-sm mt-2 text-green-300",children:["Change Due: \xa3",C.toFixed(2)]}),b&&parseFloat(b)<I&&(0,cv.jsx)("p",{className:"text-sm mt-2 text-red-400",children:"Amount is less than total."})]}),(0,cv.jsxs)("div",{className:"flex space-x-3",children:[(0,cv.jsx)("button",{onClick:async()=>{if(0===Object.keys(m).length)return E("Cart is empty."),void setTimeout((()=>E("")),3e3);if("Cash"===y&&(isNaN(parseFloat(b))||parseFloat(b)<I))return E("Cash received is less than the total amount or invalid."),void setTimeout((()=>E("")),4e3);E("Processing transaction..."),i(!0);const e=Object.entries(m).map((e=>{var n,r;let[i,s]=e;return{productId:i,quantity:s,pricePerItem:(null===t||void 0===t||null===(n=t.products)||void 0===n||null===(r=n.find((e=>e.id===i)))||void 0===r?void 0:r.price)||0}}));try{if(await av(t.id,e,y),_.current){E(`Transaction successful (${y})! Total: \xa3${I.toFixed(2)}.`),T();sessionStorage.getItem("sellerPin")&&(p(!0),lv(t.id).then((e=>{_.current&&d(e.sort(((e,t)=>{var n,r;return((null===(n=t.timestamp)||void 0===n?void 0:n.toDate())||0)-((null===(r=e.timestamp)||void 0===r?void 0:r.toDate())||0)})))})).catch((e=>{console.error("Error fetching sales after transaction:",e)})).finally((()=>{_.current&&p(!1)}))),setTimeout((()=>{_.current&&E("")}),5e3)}}catch(s){console.error("Error completing transaction:",s),_.current&&(E(`Transaction failed: ${s.message||"Unknown error"}`),setTimeout((()=>{_.current&&E("")}),1e4))}finally{_.current&&i(!1)}},className:"flex-grow bg-vision-accent hover:bg-blue-600 text-white font-semibold py-2 px-5 rounded-xl transition-colors duration-200 disabled:opacity-60 disabled:cursor-not-allowed",disabled:r||0===Object.keys(m).length||"Cash"===y&&(isNaN(parseFloat(b))||parseFloat(b)<I),children:r?"Processing...":`Complete Sale (${y})`}),(0,cv.jsx)("button",{onClick:T,className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 text-sm",disabled:r||0===Object.keys(m).length,children:"Clear Cart"})]})]})]})]})," "]})," ",(0,cv.jsxs)("div",{className:"glass-card w-full max-w-4xl p-6 z-10 mt-0",children:[" ",(0,cv.jsx)("h3",{className:"text-xl font-semibold mb-3 border-b border-vision-border pb-2",children:"Your Recent Sales:"}),f?(0,cv.jsx)("p",{className:"text-vision-text-secondary",children:"Loading sales..."}):Array.isArray(h)&&h.length>0?(0,cv.jsx)("ul",{className:"list-none space-y-2 max-h-60 overflow-y-auto pr-2",children:h.map((e=>{if(!e||!e.id)return null;const n=(e=>{if(!t||!t.products)return"Unknown Product";const n=t.products.find((t=>t.id===e));return n?n.name:"Unknown Product"})(e.productId),r=(e=>{if(!e||!e.toDate)return"N/A";try{return e.toDate().toLocaleString()}catch(s){return console.error("Error formatting timestamp:",s),"Invalid Date"}})(e.timestamp),i=e.quantity||1,o=e.totalPrice||0,a=e.paymentMethod||"N/A";return(0,cv.jsxs)("li",{className:"text-sm p-3 bg-black bg-opacity-20 rounded-lg",children:[(0,cv.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,cv.jsxs)("span",{className:"font-medium text-vision-text",children:["string"===typeof n?n:"Invalid Product"," (x","number"===typeof i?i:"N/A",")"]}),(0,cv.jsx)("span",{className:"font-semibold text-green-300",children:`+\xa3${"number"===typeof o?o.toFixed(2):"0.00"}`})]}),(0,cv.jsxs)("div",{className:"flex justify-between items-center text-xs text-vision-text-secondary",children:[(0,cv.jsx)("span",{children:`Paid via: ${a}`}),(0,cv.jsx)("span",{children:"string"===typeof r?r:"Invalid Date"})]})]},e.id)}))}):(0,cv.jsx)("p",{className:"italic text-sm text-vision-text-secondary",children:"You haven't recorded any sales yet."})]})]}):(0,cv.jsx)("div",{className:"flex-center min-h-screen",children:(0,cv.jsx)("div",{className:"text-xl",children:"Stall data unavailable."})})},gv=()=>{const[t,n]=(0,e.useState)(!1);(0,e.useEffect)((()=>{if(!localStorage.getItem("cookieConsent")){const e=setTimeout((()=>{n(!0)}),1e3);return()=>clearTimeout(e)}}),[]);return t?(0,cv.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4",children:(0,cv.jsxs)("div",{className:"glass-card max-w-4xl mx-auto p-4 md:p-6 flex flex-col md:flex-row items-center justify-between",children:[(0,cv.jsxs)("div",{className:"mb-4 md:mb-0 md:mr-6",children:[(0,cv.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Cookie Consent"}),(0,cv.jsx)("p",{className:"text-vision-text-secondary text-sm",children:'We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies.'})]}),(0,cv.jsxs)("div",{className:"flex space-x-3",children:[(0,cv.jsx)("button",{onClick:()=>{localStorage.setItem("cookieConsent","false"),n(!1)},className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 text-sm",children:"Decline"}),(0,cv.jsx)("button",{onClick:()=>{localStorage.setItem("cookieConsent","true"),n(!1)},className:"bg-vision-accent hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 text-sm",children:"Accept All"})]})]})}):null},yv=t=>{let{isOpen:n,onClose:r}=t;const i=(0,e.useRef)(null);return(0,e.useEffect)((()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&n&&r()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[n,r]),(0,e.useEffect)((()=>(document.body.style.overflow=n?"hidden":"",()=>{document.body.style.overflow=""})),[n]),n?(0,cv.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 backdrop-blur-sm",children:(0,cv.jsxs)("div",{ref:i,className:"fixed right-0 top-0 h-full w-64 bg-vision-card backdrop-blur-md border-l border-vision-border shadow-lg p-4 transform transition-transform duration-300",children:[(0,cv.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,cv.jsx)("h2",{className:"text-xl font-semibold",children:"Menu"}),(0,cv.jsx)("button",{onClick:r,className:"text-vision-text-secondary hover:text-vision-text focus:outline-none","aria-label":"Close menu",children:(0,cv.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,cv.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,cv.jsx)("nav",{children:(0,cv.jsxs)("ul",{className:"space-y-4",children:[(0,cv.jsx)("li",{children:(0,cv.jsx)(me,{to:"/",className:"block py-2 text-vision-text hover:text-white transition-colors duration-200 no-underline",onClick:r,children:"Home"})}),(0,cv.jsx)("li",{children:(0,cv.jsx)(me,{to:"/privacy-policy",className:"block py-2 text-vision-text hover:text-white transition-colors duration-200 no-underline",onClick:r,children:"Privacy Policy"})}),(0,cv.jsx)("li",{children:(0,cv.jsx)(me,{to:"/terms-of-service",className:"block py-2 text-vision-text hover:text-white transition-colors duration-200 no-underline",onClick:r,children:"Terms of Service"})}),(0,cv.jsx)("li",{children:(0,cv.jsx)(me,{to:"/developer-info",className:"block py-2 text-vision-text hover:text-white transition-colors duration-200 no-underline",onClick:r,children:"Developer Info"})})]})}),(0,cv.jsx)("div",{className:"absolute bottom-8 left-0 right-0 px-4",children:(0,cv.jsxs)("div",{className:"flex space-x-4 justify-center",children:[(0,cv.jsx)(me,{to:"/admin-login",className:"bg-vision-accent hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 text-sm no-underline",onClick:r,children:"Admin Login"}),(0,cv.jsx)(me,{to:"/seller-login",className:"bg-vision-accent hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 text-sm no-underline",onClick:r,children:"Seller Login"})]})})]})}):null},vv=t=>{let{children:n}=t;const[r,i]=(0,e.useState)(!1),s=le(),o="/"===s.pathname,a="/admin-login"===s.pathname||"/seller-login"===s.pathname;return!o&&!a&&"/privacy-policy"!==s.pathname&&"/terms-of-service"!==s.pathname&&"/developer-info"!==s.pathname?(0,cv.jsxs)(cv.Fragment,{children:[n,(0,cv.jsx)(gv,{})]}):(0,cv.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,cv.jsx)("header",{className:"bg-vision-card backdrop-blur-md border-b border-vision-border py-4",children:(0,cv.jsxs)("div",{className:"container mx-auto px-4 flex justify-between items-center",children:[(0,cv.jsx)(me,{to:"/",className:"text-2xl font-bold text-vision-text no-underline",children:"Church Fundraising"}),(0,cv.jsx)("nav",{className:"hidden md:block",children:(0,cv.jsxs)("ul",{className:"flex space-x-6",children:[(0,cv.jsx)("li",{children:(0,cv.jsx)(me,{to:"/",className:"text-vision-text hover:text-white transition-colors duration-200 no-underline",children:"Home"})}),(0,cv.jsx)("li",{children:(0,cv.jsx)(me,{to:"/privacy-policy",className:"text-vision-text hover:text-white transition-colors duration-200 no-underline",children:"Privacy Policy"})}),(0,cv.jsx)("li",{children:(0,cv.jsx)(me,{to:"/terms-of-service",className:"text-vision-text hover:text-white transition-colors duration-200 no-underline",children:"Terms of Service"})}),(0,cv.jsx)("li",{children:(0,cv.jsx)(me,{to:"/developer-info",className:"text-vision-text hover:text-white transition-colors duration-200 no-underline",children:"Developer Info"})})]})}),(0,cv.jsx)("div",{className:"md:hidden",children:(0,cv.jsx)("button",{onClick:()=>i(!0),className:"text-vision-text hover:text-white transition-colors duration-200 focus:outline-none","aria-label":"Menu",children:(0,cv.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,cv.jsx)("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})})]})}),(0,cv.jsx)("main",{className:"flex-grow",children:n}),(0,cv.jsx)("footer",{className:"bg-vision-card backdrop-blur-md border-t border-vision-border py-6",children:(0,cv.jsx)("div",{className:"container mx-auto px-4",children:(0,cv.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,cv.jsx)("div",{className:"mb-4 md:mb-0",children:(0,cv.jsxs)("p",{className:"text-vision-text-secondary text-sm",children:["\xa9 ",(new Date).getFullYear()," Church Fundraising Stall Manager. All rights reserved."]})}),(0,cv.jsxs)("div",{className:"flex flex-wrap justify-center space-x-4",children:[(0,cv.jsx)(me,{to:"/privacy-policy",className:"text-vision-text-secondary hover:text-white text-sm transition-colors duration-200 no-underline",children:"Privacy Policy"}),(0,cv.jsx)(me,{to:"/terms-of-service",className:"text-vision-text-secondary hover:text-white text-sm transition-colors duration-200 no-underline",children:"Terms of Service"}),(0,cv.jsx)(me,{to:"/developer-info",className:"text-vision-text-secondary hover:text-white text-sm transition-colors duration-200 no-underline",children:"Developer Info"})]})]})})}),(0,cv.jsx)(yv,{isOpen:r,onClose:()=>i(!1)}),(0,cv.jsx)(gv,{})]})},bv=()=>{const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)(""),[s,o]=(0,e.useState)(""),[a,l]=(0,e.useState)(!1),c=ae();return(0,cv.jsx)(vv,{children:(0,cv.jsx)("div",{className:"flex-center min-h-screen py-10",children:(0,cv.jsxs)("div",{className:"glass-card w-full max-w-md p-8",children:[(0,cv.jsx)("h1",{className:"text-3xl font-semibold mb-6 text-center",children:"Admin Login"}),(0,cv.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(""),l(!0);try{await function(e,t,n){return ei(ze(e),Ur.credential(t,n))}(sv,t,r),c.push("/admin")}catch(n){console.error("Admin Login Error:",n),o("Failed to log in. Please check your email and password."),l(!1)}},children:[(0,cv.jsxs)("div",{className:"mb-4",children:[(0,cv.jsx)("label",{htmlFor:"email",children:"Email"}),(0,cv.jsx)("input",{id:"email",type:"email",placeholder:"Enter your email",value:t,onChange:e=>n(e.target.value),className:"w-full",required:!0,disabled:a})]}),(0,cv.jsxs)("div",{className:"mb-6",children:[(0,cv.jsx)("label",{htmlFor:"password",children:"Password"}),(0,cv.jsx)("input",{id:"password",type:"password",placeholder:"Enter your password",value:r,onChange:e=>i(e.target.value),className:"w-full",required:!0,disabled:a})]}),s&&(0,cv.jsx)("p",{className:"text-red-400 text-sm mb-4 text-center",children:s}),(0,cv.jsx)("button",{type:"submit",className:"w-full",disabled:a,children:a?"Logging in...":"Login"})]})]})})})},wv=()=>{const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)(""),[s,o]=(0,e.useState)(!1),a=ae(),l=ms();return(0,cv.jsx)(vv,{children:(0,cv.jsx)("div",{className:"flex-center min-h-screen py-10",children:(0,cv.jsxs)("div",{className:"glass-card w-full max-w-md p-8",children:[(0,cv.jsx)("h1",{className:"text-3xl font-semibold mb-6 text-center",children:"Seller Login"}),(0,cv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i(""),o(!0),!t||!/^\d{4}$/.test(t))return i("Please enter a valid 4-digit PIN."),void o(!1);try{await async function(e){var t;const n=Sr(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Kr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Wr(n,{returnSecureToken:!0}),i=await Kr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(l),sessionStorage.setItem("sellerPin",t),a.push("/seller")}catch(n){console.error("Seller Anonymous Login Error:",n),i("Login failed. Please try again."),o(!1)}},children:[(0,cv.jsxs)("div",{className:"mb-6",children:[(0,cv.jsx)("label",{htmlFor:"pin-input",children:"4-Digit PIN"}),(0,cv.jsx)("input",{id:"pin-input",type:"password",placeholder:"Enter your 4-digit PIN",value:t,onChange:e=>n(e.target.value),className:"w-full",maxLength:"4",pattern:"\\d*",inputMode:"numeric",required:!0,disabled:s})]}),r&&(0,cv.jsx)("p",{className:"text-red-400 text-sm mb-4 text-center",children:r}),(0,cv.jsx)("button",{type:"submit",className:"w-full",disabled:s,children:s?"Logging in...":"Login"})]})]})})})},xv=()=>(0,cv.jsx)(vv,{children:(0,cv.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,cv.jsxs)("div",{className:"glass-card max-w-4xl mx-auto p-6 md:p-8",children:[(0,cv.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Privacy Policy"}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Introduction"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:'This Privacy Policy explains how the Church Fundraising Stall Manager ("we", "our", or "us") collects, uses, and shares your information when you use our application.'}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"We respect your privacy and are committed to protecting your personal data. Please read this Privacy Policy carefully to understand our practices regarding your personal data."})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Information We Collect"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"We collect the following types of information:"}),(0,cv.jsxs)("ul",{className:"list-disc pl-6 mb-4 text-vision-text-secondary",children:[(0,cv.jsx)("li",{className:"mb-2",children:"Account information: When you register as an admin, we collect your email address and password."}),(0,cv.jsx)("li",{className:"mb-2",children:"Stall information: Information about stalls, products, and sales that you input into the application."}),(0,cv.jsx)("li",{className:"mb-2",children:"Usage data: Information about how you use our application, including log data and analytics."}),(0,cv.jsx)("li",{className:"mb-2",children:"Cookies: We use cookies to enhance your experience and analyze our traffic."})]})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"How We Use Your Information"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"We use your information for the following purposes:"}),(0,cv.jsxs)("ul",{className:"list-disc pl-6 mb-4 text-vision-text-secondary",children:[(0,cv.jsx)("li",{className:"mb-2",children:"To provide and maintain our service"}),(0,cv.jsx)("li",{className:"mb-2",children:"To notify you about changes to our service"}),(0,cv.jsx)("li",{className:"mb-2",children:"To allow you to participate in interactive features of our service"}),(0,cv.jsx)("li",{className:"mb-2",children:"To provide customer support"}),(0,cv.jsx)("li",{className:"mb-2",children:"To gather analysis or valuable information so that we can improve our service"}),(0,cv.jsx)("li",{className:"mb-2",children:"To monitor the usage of our service"}),(0,cv.jsx)("li",{className:"mb-2",children:"To detect, prevent and address technical issues"})]})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Data Security"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"We implement appropriate security measures to protect your personal data against unauthorized access, alteration, disclosure, or destruction. However, no method of transmission over the Internet or method of electronic storage is 100% secure."})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Your Data Protection Rights"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"You have the following data protection rights:"}),(0,cv.jsxs)("ul",{className:"list-disc pl-6 mb-4 text-vision-text-secondary",children:[(0,cv.jsx)("li",{className:"mb-2",children:"The right to access, update or delete the information we have on you"}),(0,cv.jsx)("li",{className:"mb-2",children:"The right of rectification"}),(0,cv.jsx)("li",{className:"mb-2",children:"The right to object"}),(0,cv.jsx)("li",{className:"mb-2",children:"The right of restriction"}),(0,cv.jsx)("li",{className:"mb-2",children:"The right to data portability"}),(0,cv.jsx)("li",{className:"mb-2",children:"The right to withdraw consent"})]})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Changes to This Privacy Policy"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:'We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.'}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"You are advised to review this Privacy Policy periodically for any changes. Changes to this Privacy Policy are effective when they are posted on this page."})]}),(0,cv.jsxs)("section",{children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Contact Us"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"If you have any questions about this Privacy Policy, please contact us at:"}),(0,cv.jsx)("p",{className:"text-vision-text-secondary",children:"Email: privacy@churchfundraising.example.com"})]}),(0,cv.jsx)("div",{className:"mt-8 pt-6 border-t border-vision-border text-sm text-vision-text-secondary",children:"Last Updated: April 23, 2025"})]})})}),Ev=()=>(0,cv.jsx)(vv,{children:(0,cv.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,cv.jsxs)("div",{className:"glass-card max-w-4xl mx-auto p-6 md:p-8",children:[(0,cv.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Terms of Service"}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"1. Acceptance of Terms"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:'By accessing or using the Church Fundraising Stall Manager application ("Service"), you agree to be bound by these Terms of Service ("Terms"). If you do not agree to these Terms, please do not use the Service.'})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"2. Description of Service"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:'The Church Fundraising Stall Manager is a web application designed to help churches manage their fundraising stalls, track inventory, and record sales. The Service is provided "as is" and "as available" without any warranties of any kind.'})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"3. User Accounts"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"To use certain features of the Service, you may be required to create an account. You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account."}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"You agree to:"}),(0,cv.jsxs)("ul",{className:"list-disc pl-6 mb-4 text-vision-text-secondary",children:[(0,cv.jsx)("li",{className:"mb-2",children:"Provide accurate and complete information when creating your account"}),(0,cv.jsx)("li",{className:"mb-2",children:"Update your information to keep it accurate and current"}),(0,cv.jsx)("li",{className:"mb-2",children:"Protect your account credentials and not share them with others"}),(0,cv.jsx)("li",{className:"mb-2",children:"Notify us immediately of any unauthorized use of your account"})]})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"4. User Conduct"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"You agree not to use the Service to:"}),(0,cv.jsxs)("ul",{className:"list-disc pl-6 mb-4 text-vision-text-secondary",children:[(0,cv.jsx)("li",{className:"mb-2",children:"Violate any applicable laws or regulations"}),(0,cv.jsx)("li",{className:"mb-2",children:"Infringe on the rights of others"}),(0,cv.jsx)("li",{className:"mb-2",children:"Distribute malicious software or engage in harmful activities"}),(0,cv.jsx)("li",{className:"mb-2",children:"Attempt to gain unauthorized access to the Service or its related systems"}),(0,cv.jsx)("li",{className:"mb-2",children:"Interfere with or disrupt the integrity or performance of the Service"})]})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"5. Data and Privacy"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"Your use of the Service is also governed by our Privacy Policy, which is incorporated into these Terms by reference. Please review our Privacy Policy to understand how we collect, use, and disclose information about you."})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"6. Intellectual Property"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"The Service and its original content, features, and functionality are owned by the Church Fundraising Team and are protected by international copyright, trademark, patent, trade secret, and other intellectual property laws."})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"7. Termination"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"We may terminate or suspend your account and access to the Service immediately, without prior notice or liability, for any reason, including if you breach these Terms."})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"8. Limitation of Liability"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"In no event shall the Church Fundraising Team, its directors, employees, partners, agents, suppliers, or affiliates be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your access to or use of or inability to access or use the Service."})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"9. Changes to Terms"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"We reserve the right to modify or replace these Terms at any time. If a revision is material, we will provide at least 30 days' notice prior to any new terms taking effect. What constitutes a material change will be determined at our sole discretion."})]}),(0,cv.jsxs)("section",{children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"10. Contact Us"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"If you have any questions about these Terms, please contact us at:"}),(0,cv.jsx)("p",{className:"text-vision-text-secondary",children:"Email: terms@churchfundraising.example.com"})]}),(0,cv.jsx)("div",{className:"mt-8 pt-6 border-t border-vision-border text-sm text-vision-text-secondary",children:"Last Updated: April 23, 2025"})]})})}),_v=()=>(0,cv.jsx)(vv,{children:(0,cv.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,cv.jsxs)("div",{className:"glass-card max-w-4xl mx-auto p-6 md:p-8",children:[(0,cv.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Developer Information"}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"About the Application"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"The Church Fundraising Stall Manager is a web application designed to help churches manage their fundraising stalls efficiently. It provides a simple interface for administrators to create stalls, add products, and track sales, while allowing sellers to record transactions in real-time."})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Technology Stack"}),(0,cv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,cv.jsxs)("div",{className:"glass-card p-4",children:[(0,cv.jsx)("h3",{className:"text-xl font-medium mb-3",children:"Frontend"}),(0,cv.jsxs)("ul",{className:"list-disc pl-6 text-vision-text-secondary",children:[(0,cv.jsx)("li",{className:"mb-2",children:"React.js - A JavaScript library for building user interfaces"}),(0,cv.jsx)("li",{className:"mb-2",children:"React Router - For navigation and routing"}),(0,cv.jsx)("li",{className:"mb-2",children:"Tailwind CSS - A utility-first CSS framework"}),(0,cv.jsx)("li",{className:"mb-2",children:"Context API - For state management"})]})]}),(0,cv.jsxs)("div",{className:"glass-card p-4",children:[(0,cv.jsx)("h3",{className:"text-xl font-medium mb-3",children:"Backend"}),(0,cv.jsxs)("ul",{className:"list-disc pl-6 text-vision-text-secondary",children:[(0,cv.jsx)("li",{className:"mb-2",children:"Firebase Authentication - For user authentication"}),(0,cv.jsx)("li",{className:"mb-2",children:"Firestore - NoSQL database for storing application data"}),(0,cv.jsx)("li",{className:"mb-2",children:"Firebase Hosting - For deploying the application"})]})]})]})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Features"}),(0,cv.jsx)("div",{className:"glass-card p-4",children:(0,cv.jsxs)("ul",{className:"list-disc pl-6 text-vision-text-secondary",children:[(0,cv.jsx)("li",{className:"mb-2",children:"Admin Dashboard - Create and manage stalls, products, and view sales data"}),(0,cv.jsx)("li",{className:"mb-2",children:"Seller Interface - Record sales and track inventory in real-time"}),(0,cv.jsx)("li",{className:"mb-2",children:"Authentication - Secure login for admins and sellers"}),(0,cv.jsx)("li",{className:"mb-2",children:"Sales Tracking - Monitor sales performance across all stalls"}),(0,cv.jsx)("li",{className:"mb-2",children:"Data Export - Export sales data to CSV for further analysis"}),(0,cv.jsx)("li",{className:"mb-2",children:"Responsive Design - Works on desktop and mobile devices"})]})})]}),(0,cv.jsxs)("section",{className:"mb-8",children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Development Team"}),(0,cv.jsx)("div",{className:"glass-card p-4",children:(0,cv.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start",children:[(0,cv.jsx)("div",{className:"w-32 h-32 rounded-full bg-vision-accent flex items-center justify-center mb-4 md:mb-0 md:mr-6",children:(0,cv.jsx)("span",{className:"text-4xl font-bold text-white",children:"CF"})}),(0,cv.jsxs)("div",{children:[(0,cv.jsx)("h3",{className:"text-xl font-medium mb-2",children:"Church Fundraising Team"}),(0,cv.jsx)("p",{className:"text-vision-text-secondary mb-4",children:"A dedicated team of developers passionate about creating tools to help churches and non-profit organizations."}),(0,cv.jsxs)("div",{className:"flex space-x-4",children:[(0,cv.jsx)("a",{href:"https://github.com/example",target:"_blank",rel:"noopener noreferrer",className:"text-vision-accent hover:text-blue-400 transition-colors duration-200",children:"GitHub"}),(0,cv.jsx)("a",{href:"https://linkedin.com/in/example",target:"_blank",rel:"noopener noreferrer",className:"text-vision-accent hover:text-blue-400 transition-colors duration-200",children:"LinkedIn"}),(0,cv.jsx)("a",{href:"mailto:contact@churchfundraising.example.com",className:"text-vision-accent hover:text-blue-400 transition-colors duration-200",children:"Email"})]})]})]})})]}),(0,cv.jsxs)("section",{children:[(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Open Source"}),(0,cv.jsx)("p",{className:"mb-4 text-vision-text-secondary",children:"This project is open source and available under the MIT License. Contributions are welcome!"}),(0,cv.jsx)("a",{href:"https://github.com/example/church-fundraising-stall-manager",target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-vision-accent hover:bg-blue-600 text-white font-semibold py-2 px-5 rounded-xl transition-colors duration-200",children:"View on GitHub"})]}),(0,cv.jsx)("div",{className:"mt-8 pt-6 border-t border-vision-border text-sm text-vision-text-secondary",children:"Version 1.0.0 - Last Updated: April 23, 2025"})]})})}),kv=()=>(0,cv.jsx)(vv,{children:(0,cv.jsx)("div",{className:"flex-center min-h-screen",children:(0,cv.jsxs)("div",{className:"glass-card text-center p-8 max-w-lg",children:[(0,cv.jsx)("h1",{className:"text-6xl font-bold mb-6",children:"404"}),(0,cv.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Page Not Found"}),(0,cv.jsx)("p",{className:"text-vision-text-secondary mb-8",children:"The page you are looking for doesn't exist or has been moved."}),(0,cv.jsx)(me,{to:"/",className:"bg-vision-accent hover:bg-blue-600 text-white font-semibold py-2 px-5 rounded-xl transition-colors duration-200 inline-block",children:"Return to Home"})]})})}),Sv=e=>{let{component:t,...n}=e;const{currentUser:r}=hv();return(0,cv.jsx)(Z,{...n,render:e=>r?(0,cv.jsx)(t,{...e}):(0,cv.jsx)(Q,{to:"/admin-login"})})},Tv=()=>(0,cv.jsx)("div",{className:"flex-center min-h-screen py-10",children:(0,cv.jsxs)("div",{className:"text-center glass-card p-10 max-w-lg",children:[(0,cv.jsx)("h1",{className:"text-4xl font-semibold mb-6",children:"Welcome to the Church Fundraising Stall Manager"}),(0,cv.jsx)("p",{className:"text-vision-text-secondary mb-8",children:"A simple and efficient way to manage your church fundraising stalls and track sales."}),(0,cv.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6",children:[(0,cv.jsx)("a",{href:"/admin-login",className:"bg-vision-accent hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200 no-underline text-center",children:"Admin Login"}),(0,cv.jsx)("a",{href:"/seller-login",className:"bg-vision-accent hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200 no-underline text-center",children:"Seller Login"})]})]})}),Iv=()=>(0,cv.jsx)(vv,{children:(0,cv.jsx)(Tv,{})}),Cv=()=>(0,cv.jsx)(vv,{children:(0,cv.jsx)(kv,{})}),Nv=()=>(0,cv.jsx)(dv,{children:(0,cv.jsx)(ce,{children:(0,cv.jsxs)(se,{children:[(0,cv.jsx)(Z,{path:"/admin-login",component:bv}),(0,cv.jsx)(Z,{path:"/seller-login",component:wv}),(0,cv.jsx)(Sv,{path:"/admin",component:pv}),(0,cv.jsx)(Sv,{path:"/seller",component:mv}),(0,cv.jsx)(Z,{path:"/privacy-policy",component:xv}),(0,cv.jsx)(Z,{path:"/terms-of-service",component:Ev}),(0,cv.jsx)(Z,{path:"/developer-info",component:_v}),(0,cv.jsx)(Z,{path:"/",exact:!0,component:Iv}),(0,cv.jsx)(Z,{path:"*",component:Cv})]})})});t.render((0,cv.jsx)(e.StrictMode,{children:(0,cv.jsx)(Nv,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.217a1480.js.map